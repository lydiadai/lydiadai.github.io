<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title><![CDATA[ios universal link]]></title>
    <url>%2Fposts%2Fios-universal-link.html</url>
    <content type="text"></content>
      <tags>
        <tag>ios</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ios IAP]]></title>
    <url>%2Fposts%2Fios-in-app-purchase.html</url>
    <content type="text"></content>
      <tags>
        <tag>ios</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[python初体验]]></title>
    <url>%2Fposts%2Fpython-first.html</url>
    <content type="text"><![CDATA[安装环境 安装python 3.7 安装 anaconda 直接搜索下载 安装虚拟环境3.1 创建环境 conda create –name your_env_name python=3.53.2 conda env list 查看虚拟环境列表3.3 conda create –name new_env_name –clone old_env_name 复制环境3.4 conda remove –name your_env_name –all 删除环境3.5 conda activate –name 切换环境3.6 conda install -n env_name package_name 为指定环境安装某个包https://blog.csdn.net/menc15/article/details/71477949 安装Django 下载pycharm 创建第一个python项目 切换到对应的虚拟环境 进入对应文件夹 1django-admin startproject python2]]></content>
      <tags>
        <tag>python</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[iOS 13 adjust]]></title>
    <url>%2Fposts%2FiOS%2013%20adjust.html</url>
    <content type="text"><![CDATA[presentView 不是全屏 1nav.modalPresentationStyle = UIModalPresentationFullScreen; search bar 左侧icon位置偏移在uiimageview 外面套一层uiview 设置uiview的职位 1234567UIView * iconOutView = [[UIView alloc]initWithFrame:CGRectMake(0, 0, 40, 30)];UIImageView* iconView = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@&quot;搜索图标&quot;]];iconView.center = CGPointMake(iconOutView.frame.size.width/2,iconOutView.frame.size.height/2);[iconOutView addSubview:iconView];self.leftView = iconOutView;self.leftViewMode = UITextFieldViewModeAlways; launch img要被禁用了 需要配置成launch screen 先创建一个launch screen文件 点击xcode 右上角的加号 添加imageview 添加约束显示 dark mode status bar not showStatus bar style DefaultUser Interface Style LightView controller-based status bar appearance YES]]></content>
      <tags>
        <tag>-- oc</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[vue项目接入微信js]]></title>
    <url>%2Fposts%2Fvue-wechat-js.html</url>
    <content type="text"><![CDATA[$ npm install weixin-js-sdk –save 引入wechat js文件 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768import wx from &apos;weixin-js-sdk&apos;const wxPlugin = &#123;&#125;wxPlugin.install = function (Vue, options) &#123; function extend (obj1, obj2) &#123; for (var k in obj2) &#123; if (obj1.hasOwnProperty(k)) &#123; if (isObject(obj2[k])) &#123; extend(obj1[k], obj2[k]) &#125; else &#123; obj1[k] = obj2[k] &#125; &#125; else &#123; obj1[k] = obj2[k] &#125; &#125; return obj1 &#125; function getProp (obj, str) &#123; var result = extend(&#123;&#125;, obj) var array = str.split(&apos;.&apos;) for (var i = 0; i &lt; array.length; i++) &#123; if (result[array[i]]) &#123; result = result[array[i]] &#125; else &#123; result = result[array[i]] break &#125; &#125; return result &#125; // 判断options.config的数据类型 if (!options.config) &#123; console.error(&apos;wxPlugin Error：config属性必须为一个对象或者promise，不能为空&apos;) return &#125; // 如果config为一个对象 if (Object.prototype.toString.call(options.config) === &apos;[object Object]&apos;) &#123; wxConfig(options.config) &#125; // 如果config为一个promise if (options.config instanceof Promise) &#123; options.config.then(function (res) &#123; var config if (options.path) &#123; config = getProp(res, options.path) &#125; else &#123; config = res.data &#125; wxConfig(config) &#125;) &#125; function wxConfig (config) &#123; wx.config(&#123; debug: false, appId: config.appId, timestamp: config.timestamp, nonceStr: config.nonceStr, signature: config.signature, jsApiList: options.actions &#125;) wx.error(function (err) &#123; console.error(err) &#125;) &#125; Vue.prototype.wx = wx&#125;export default wxPlugin main.js中引用 1234567891011import wxPlugin from &apos;common/js/wechatJs.js&apos;const options = &#123; config: api.me.getWechatJsConfig(&#123;url: location.href&#125;), // 如果config是promise，path需要指定如何从promise返回值中拿到符合格式的object; // 如果config是一个object，则无需指定path值 path: &apos;data&apos;, // 声明用到的微信api actions: [&apos;onMenuShareAppMessage&apos;, &apos;onMenuShareTimeline&apos;]&#125;Vue.use(wxPlugin, options) 页面中引用 1234567891011121314151617181920212223wx_share () &#123; this.wx.ready(function () &#123; // 分享给朋友 this.wx.onMenuShareAppMessage(&#123; title: &apos;问题反馈&apos;, desc: &apos;问题反馈&apos;, link: location.href, imgUrl: &apos;https://files.wondercv.com/App%20Icon@2x.png&apos;, success: function () &#123; alert(&apos;分享成功&apos;) &#125; &#125;) // 分享到朋友圈 this.wx.onMenuShareTimeline(&#123; title: &apos;问题反馈&apos;, link: location.href, imgUrl: &apos;https://files.wondercv.com/App%20Icon@2x.png&apos;, success: function () &#123; alert(&apos;分享成功&apos;) &#125; &#125;) &#125;)&#125;]]></content>
      <tags>
        <tag>-- vue wechat</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[nginx 不改变url 根据需求分发到不同的项目]]></title>
    <url>%2Fposts%2Fnginx-rewrite-location.html</url>
    <content type="text"><![CDATA[需求一：根据页面转发 12345location /account/users/mobile_account_index &#123; root /opt/app/vuetest.wondercv.com/current; index index.html; try_files $uri /index.html $uri/;&#125; ps: 要注意指向的文件夹里有没有版本库 来判定要不要current 需求二：根据user agent &amp;&amp; url转发 12345678location /feedbacks/new &#123; root /opt/app/vuetest.wondercv.com/current; index index.html; try_files $uri /index.html $uri/; if ($http_user_agent !~* &quot;Mobile|webOS|Jike&quot;) &#123; proxy_pass http://app_servers; &#125;&#125; 需求三：重写url 12345678location ~ /jianlimoban/&#123; #url不变 # rewrite ^(.*)jianlimoban(.*)$ $1muban$2;&quot;[&apos;&quot; #url改变 if ($http_user_agent !~* &quot;Mobile|webOS|Jike&quot;) &#123; rewrite ^(.*)jianlimoban(.*)$ $1muban$2 redirect; &#125;&#125; ps:nginx 关于 rewrite 指令最后一项的参数说明： last : 相当于apache里的 [L]标示，表示完成rewrite； break：本条规则匹配完成后，终止匹配，不再匹配后面的规则； redirect：返回302 临时重定向，浏览器地址栏会显示跳转后的url地址； permanent： 返回301 永久重定向，浏览器地址会显示跳转后的url地址；需求四：转发server （换域名） 12345location ~ /jianlimoban/&#123; if ($http_user_agent ~* &quot;Mobile|webOS|Jike&quot;) &#123; return 301 https://m.wondercv.com$request_uri; &#125;&#125; ps： 12345678910set $to_vue 0;if ($http_user_agent !~* &quot;Mobile|webOS|Jike&quot;) &#123; set $to_vue 1;&#125;if ($http_user_agent ~* &quot;wondercv_ios&quot;) &#123; set $to_vue 1;&#125;if ($request_method ~* &quot;POST&quot;) &#123; set $to_vue 1;&#125; https://moonbingbing.gitbooks.io/openresty-best-practices/ngx/nginx_local_pcre.html location 匹配规则语法规则location [=|||^] /uri/ { … }模式 含义location = /uri = 表示精确匹配，只有完全匹配上才能生效location ^ /uri ^~ 开头对URL路径进行前缀匹配，并且在正则之前。location ~ pattern 开头表示区分大小写的正则匹配location ~ pattern 开头表示不区分大小写的正则匹配location /uri 不带任何修饰符，也表示前缀匹配，但是在正则匹配之后location / 通用匹配，任何未匹配到其它location的请求都会匹配到，相当于switch中的default]]></content>
      <tags>
        <tag>-- nginx</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[根据pc 还是移动使用不同页面]]></title>
    <url>%2Fposts%2Fvue-adjust-pc-mobile.html</url>
    <content type="text"><![CDATA[12345678910111213141516171819import Vue from &apos;vue&apos;import Router from &apos;vue-router&apos;import mobileMe from &apos;./mobile/me&apos;import pcMe from &apos;./pc/me&apos;Vue.use(Router)let route = []if (/Mobile|webOS|Jike/i.test(navigator.userAgent)) &#123; route = [...mobileMe]&#125; else &#123; route = [...pcMe]&#125;const router = new Router(&#123; mode: &apos;history&apos;, routes: route&#125;)]]></content>
      <tags>
        <tag>-- tag</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[子div设置margin-top使得父div也跟着向下移动]]></title>
    <url>%2Fposts%2Fchildren-div-margin-top-influence-father-div.html</url>
    <content type="text"><![CDATA[解决方案：1、修改父元素的高度,给父元素加上padding-top 这是我常用的方法，但是总是感觉解决了问题，但是没有抓到本质。2、为父元素添加overflow:hidden3、为父元素添加border4、为父元素或者子元素声明绝对定位。5、为父元素或者子元素声明浮动 推荐前三种解决方法，因为没必要因为这个去修改元素的定位或者是浮动 原理：一个盒子如果没有上补白(padding-top)和上边框(border-top)，那么这个盒子的上边距会和其内部文档流中的第一个子元素的上边距重叠。]]></content>
      <tags>
        <tag>css</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[vue 路由中#]]></title>
    <url>%2Fposts%2Fvue-router.html</url>
    <content type="text"><![CDATA[seo 中有需求 url中最好不要带有#，就去查了一下怎么做 1234const router = new VueRouter(&#123; mode: &apos;history&apos;, routes: [...]&#125;) 参考：https://router.vuejs.org/zh/guide/essentials/history-mode.html]]></content>
      <tags>
        <tag>vue</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[vue项目部署]]></title>
    <url>%2Fposts%2Fvue-deploy.html</url>
    <content type="text"><![CDATA[先新建一个Gemfile 123source 'https://gems.ruby-china.com' gem 'capistrano', '2.12.0' gem 'capistrano-rbenv', '1.0.1' $ bundle install $ bundle exec capify . 配置deploy文件 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162# -*- encoding : utf-8 -*-require 'capistrano-rbenv'load 'deploy/assets'SSH_USER = 'root'set :rake, "bundle exec rake"set :application, "xxx"#set :application, "xxx"set :repository, "./dist"set :scm, :none# Or: `accurev`, `bzr`, `cvs`, `darcs`, `git`, `mercurial`, `perforce`, `subversion` or `none`set :deploy_via, :copy#测试服务器ssh_options[:port] = xxxserver = "xxx"#正式服务器#server = "xxx"role :web, serverrole :app, server # This may be the same as your `Web` serverrole :db, server, :primary =&gt; true # This is where Rails migrations will runrole :db, serverset :deploy_to, "xxx" #项目路径set :copy_exclude, [".git", "node_modules", "src"]default_run_options[:pty] = trueset :user, SSH_USERnamespace :deploy do task :restart, :roles =&gt; :app, :except =&gt; &#123; :no_release =&gt; true &#125; do run "nginx -s reload" end namespace :assets do task :precompile do puts "== 这个命令没有用，但是rails中每次都会执行，所以使用空语句覆盖它。" #run "bundle install" #run "cd #&#123;release_path&#125; &amp;&amp; bundle exec rake RAILS_ENV=production RAILS_GROUPS=assets assets:precompile " end task :symlink do puts "== 这个命令没有用，但是rails中每次都会执行，所以使用空语句覆盖它。" end end enddesc "编译vuejs"task :build_vue do puts '== 清空 dist 文件夹' puts `rm -rf dist/*` puts "== 编译 vuejs:" puts `npm run build`endtask :remove_redundant_files do puts "== 删掉远程无用的文件夹： log, public, tmp" run "cd #&#123;release_path&#125; &amp;&amp; trash log public tmp REVISION"endbefore "deploy", :build_vueafter "deploy", :remove_redundant_files 配置nginx 12345678910111213141516171819202122232425262728server &#123; listen 443 ssl; charset utf-8; server_name vue1.wondercv.com; ssl_certificate /opt/ssl/wondercv/wondercv.com.crt; ssl_certificate_key /opt/ssl/wondercv/wondercv.com.key; ssl_session_cache shared:SSL:1m; # 第一步,把所有的 mysite.com/api/interface 转换成: mysite.com/interface location /api &#123; rewrite ^(.*)\/api(.*)$ $1$2; &#125; # 第二步， 把所有的 mysite.com/interface 的请求，转发到 siwei.me/interface location /interface &#123; proxy_pass http://siwei.me; &#125; location / &#123; root /opt/app/vue1.wondercv.com/current; &#125;&#125;server &#123; listen 80; server_name vue1.wondercv.com; return 301 https://$server_name$request_uri;&#125; 在本地 $ bundle exec cap deploy:setupps: 创建完文件夹及时停止 $bundle exec cap deploy]]></content>
      <tags>
        <tag>vue deploy</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[小程序-获取小程序码]]></title>
    <url>%2Fposts%2Fwechat-get-miniprogram-qr.html</url>
    <content type="text"><![CDATA[打开微信公众平台接口调试工具，在参数列表中输入小程序的appid和secret，点击检查问题，如果appid和secret正确，则可以返回正确的access_token结果 生成小程序码有三个接口，我采用的是接口B 接口B：适用于需要的码数量极多的业务场景 0）可接受页面参数较短 1）通过该接口生成的小程序码，永久有效 2）数量不做限制（截止今天，官方未对生成数量做限制） 3）用户扫码后，可以在对应页面获取到二维码中scene字段下面的值 4）B接口调用分钟频率受限(目前5000次/分钟，会调整) 接口地址： https://api.weixin.qq.com/wxa/getwxacodeunlimit?access_token=ACCESS_TOKEN 打开Postman 请求方式选择POSTURL一栏输入https://api.weixin.qq.com/wxa/getwxacodeunlimit?access_token=（上一条中返回的access_token值） Body中输入的格式为{“page”: “pages/newImportCv/newImportCv”,“scene”: “a”}的json字符串 确认信息无误后，点击右上方Send按钮请求接口]]></content>
      <tags>
        <tag>wechat</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[vue-tynimce]]></title>
    <url>%2Fposts%2Fvue-tynimce.html</url>
    <content type="text"><![CDATA[安装安装包$ npm install @tinymce/tinymce-vue -S$ npm install tinymce -S 在 node_modules 中找到 tinymce/skins 目录，然后将 skins 目录拷贝到 static 目录下 // 如果是使用 vue-cli 3.x 构建的 typescript 项目，就放到 public 目录下，文中所有 static 目录相关都这样处理 tinymce 默认是英文界面，所以还需要下载一个中文语言包（记得搭梯子！搭梯子！搭梯子！） 然后将这个语言包放到 static 目录下，为了结构清晰，我包了一层 tinymce 目录 添加一个editor.vue 文件 作为组件 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273747576777879808182838485&lt;template&gt; &lt;div class=&quot;tinymce-editor&quot;&gt; &lt;editor v-model=&quot;myValue&quot; :init=&quot;init&quot; :disabled=&quot;disabled&quot; @onClick=&quot;onClick&quot;&gt;&lt;/editor&gt; &lt;/div&gt;&lt;/template&gt;&lt;script&gt;import tinymce from &apos;tinymce/tinymce&apos;import Editor from &apos;@tinymce/tinymce-vue&apos;import &apos;tinymce/themes/silver&apos;// 编辑器插件plugins// 更多插件参考：https://www.tiny.cloud/docs/plugins/import &apos;tinymce/plugins/image&apos;// 插入上传图片插件import &apos;tinymce/plugins/media&apos;// 插入视频插件import &apos;tinymce/plugins/table&apos;// 插入表格插件import &apos;tinymce/plugins/lists&apos;// 列表插件import &apos;tinymce/plugins/wordcount&apos;// 字数统计插件export default &#123; components: &#123; Editor &#125;, props: &#123; value: &#123; type: String, default: &apos;&apos; &#125;, disabled: &#123; type: Boolean, default: false &#125;, plugins: &#123; type: [String, Array], default: &apos;lists image media table wordcount&apos; &#125;, toolbar: &#123; type: [String, Array], default: &apos;undo redo | formatselect | bold italic forecolor backcolor | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | lists image media table | removeformat&apos; &#125; &#125;, data () &#123; return &#123; init: &#123; language_url: &apos;/tinymce/langs/zh_CN.js&apos;, language: &apos;zh_CN&apos;, skin_url: &apos;/tinymce/skins/ui/oxide&apos;, // skin_url: &apos;/tinymce/skins/ui/oxide-dark&apos;,//暗色系 height: 300, plugins: this.plugins, toolbar: this.toolbar, branding: false, menubar: false, // 此处为图片上传处理函数，这个直接用了base64的图片形式上传图片， // 如需ajax上传可参考https://www.tiny.cloud/docs/configure/file-image-upload/#images_upload_handler images_upload_handler: (blobInfo, success, failure) =&gt; &#123; const img = &apos;data:image/jpeg;base64,&apos; + blobInfo.base64() success(img) &#125; &#125;, myValue: this.value &#125; &#125;, mounted () &#123; tinymce.init(&#123;&#125;) &#125;, methods: &#123; // 添加相关的事件，可用的事件参照文档=&gt; https://github.com/tinymce/tinymce-vue =&gt; All available events // 需要什么事件可以自己增加 onClick (e) &#123; this.$emit(&apos;onClick&apos;, e, tinymce) &#125;, // 可以添加一些自己的自定义事件，如清空内容 clear () &#123; this.myValue = &apos;&apos; &#125; &#125;, watch: &#123; value (newValue) &#123; this.myValue = newValue &#125;, myValue (newValue) &#123; this.$emit(&apos;input&apos;, newValue) &#125; &#125;&#125;&lt;/script&gt; 封装后使用 123456789101112131415161718192021222324252627282930313233343536373839&lt;template&gt; &lt;div&gt; &#123;&#123; msg &#125;&#125; &lt;tinymce-editor ref=&quot;editor&quot; v-model=&quot;msg&quot; :disabled=&quot;disabled&quot; @onClick=&quot;onClick&quot;&gt; &lt;/tinymce-editor&gt; &lt;button @click=&quot;clear&quot;&gt;清空内容&lt;/button&gt; &lt;button @click=&quot;disabled = true&quot;&gt;禁用&lt;/button&gt; &lt;/div&gt;&lt;/template&gt;&lt;script&gt;import TinymceEditor from &apos;./tinymce-editor/tinymce-editor&apos;export default &#123; components: &#123; TinymceEditor &#125;, data () &#123; return &#123; msg: &apos;Welcome to Use Tinymce Editor&apos;, disabled: false &#125; &#125;, methods: &#123; // 鼠标单击的事件 onClick (e, editor) &#123; console.log(&apos;Element clicked&apos;) console.log(e) console.log(editor) &#125;, // 清空内容 clear () &#123; this.$refs.editor.clear() &#125; &#125;&#125;&lt;/script&gt;]]></content>
      <tags>
        <tag>vue</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[vue-components]]></title>
    <url>%2Fposts%2Fvue-components.html</url>
    <content type="text"><![CDATA[新建一个component文件（vue）(最好新建一个文件夹) 引用 123456import pagination from &apos;@/components/base/pagination&apos;export default &#123; components: &#123; pagination &#125;&#125; 子组件给父组件传值用 $emit父组件给子组件传值用 propseg: 1&lt;pagination :listData=&apos;blogs&apos; @pageBlogs=&quot;cutBlog&quot;&gt;&lt;/pagination&gt; 1this.$emit(&apos;pageBlogs&apos;, this.listData.slice(start, end))]]></content>
      <tags>
        <tag>vue</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[微信小程序-客服消息配置（自动回复）]]></title>
    <url>%2Fposts%2Fminiprogram-custom-service-auto-reply.html</url>
    <content type="text"><![CDATA[微信小程序客服消息分两种，一种是自动回复 需要我们在后台配置 另一种是人工回复 只要我们在小程序后台配置就可以了今天主要写的是自动回复在小程序后台配置的坑 1234567891011def check_miniprogram_msg_signature(token, signature, timestamp, nonce) arr = [token, timestamp, nonce] arr = arr.sort text = &apos;&apos; arr.each &#123;|element| text += element&#125; (Digest::SHA1.hexdigest(text)==signature) ? true : false # 验证消息end def recieve_miniprogram_msg render :text =&gt; params[:echostr] if check_miniprogram_msg_signature(ENV[&apos;NAME_CARD_WECHAT_TOKEN&apos;],params[:signature], params[:timestamp], params[:nonce]) end 读取消息内容： 12content = Nokogiri::XML(request.body.read)username = content.at_css(&apos;FromUserName&apos;)&amp;.children&amp;.text 自动回复：如果是图片 需要mediaid 12res = RestClient.post &apos;https://api.weixin.qq.com/cgi-bin/media/upload?access_token=&apos; + access_token + &apos;&amp;type=image&apos;, &#123;media: file &#125;, &#123;&apos;Content-Type&apos;: &apos;application/octet-stream&apos;&#125;media_id = JSON.parse(res)[&apos;media_id&apos;] 12345678temp = &#123; &quot;touser&quot;: username, &quot;msgtype&quot;:&quot;image&quot;, &quot;image&quot;: &#123; &quot;media_id&quot;: media_id &#125;&#125;msg = RestClient.post &apos;https://api.weixin.qq.com/cgi-bin/message/custom/send?access_token=&apos; + a ccess_token, temp.to_json, &#123;content_type: :json, accept: :json&#125; 最后在小程序后台 – 开发 -开发设置-消息推送中配置启用并设置服务器配置后，用户发送的消息以及开发者需要的事件推送，都将被微信转发至开发者URL中。]]></content>
      <tags>
        <tag>wechat</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Hello World]]></title>
    <url>%2Fposts%2Fhello-world.html</url>
    <content type="text"><![CDATA[Welcome to Hexo! This is your very first post. Check documentation for more info. If you get any problems when using Hexo, you can find the answer in troubleshooting or you can ask me on GitHub. Quick StartCreate a new post1$ hexo new "My New Post" More info: Writing Run server1$ hexo server More info: Server Generate static files1$ hexo generate More info: Generating Deploy to remote sites1$ hexo deploy More info: Deployment]]></content>
      <tags>
        <tag>hexo</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[html-raw-show]]></title>
    <url>%2Fposts%2Fhtml-raw-show.html</url>
    <content type="text"><![CDATA[我们爬来的数据有的时候可能是html 用简单的simple_format会将所有的inline style清掉所以这个时候我们要用sanitized后面可以配置 白名单的tag 跟attribute 1&lt;%= sanitize @comment.body, tags: %w(strong em a), attributes: %w(href) %&gt; 参考]]></content>
      <tags>
        <tag>html</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[直接展示爬来数据的html]]></title>
    <url>%2Fposts%2Fshow-spider-html.html</url>
    <content type="text"><![CDATA[我们爬来的数据有的时候可能是html 用简单的simple_format会将所有的inline style清掉所以这个时候我们要用sanitized后面可以配置 白名单的tag 跟attribute&lt;%= sanitize @comment.body, tags: %w(strong em a), attributes: %w(href) %&gt; 参考]]></content>
      <tags>
        <tag>html</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[服务器搭建]]></title>
    <url>%2Fposts%2Fbuild-server.html</url>
    <content type="text"><![CDATA[购买服务器， 这次买的是阿里云的 根据配置买就可以了 ssh 根据设置的用户名 密码登陆 根据使用的是什么数据库 安装数据库123$ apt-get update（自带mysql）$ apt-get install libapr1-dev libxml2-dev libxslt-dev mysql-server libmysqlclient-dev git curl build-essential libssl-dev libreadline-dev build-essential libssl-dev libreadline-dev vim libcurl3 ruby-dev zlib1g-dev liblzma-dev ruby-all-dev$ apt-get install postgresql libpq-dev (安装pgsql) 安装对应的ruby raiils 版本$ apt-get install rbenv（绝对不行！！！！)$ git clone git://github.com/sstephenson/rbenv.git ~/.rbenv (用这个)然后根据rbenv 安装 具体可见本地环境配置注： 一定要安装ruby-build$ git clone https://github.com/rbenv/ruby-build.git ~/.rbenv/plugins/ruby-build 正常可以用capstrino可以直接部署 不能直接部署的时候 在/opt/app 目录下git clone 代码库 然后bundle 手动创建shared,releases目录 还有shared里的tmp,public,log等子目录 创建数据库 导入数据（正常使用rake db:create，但是我安装的时候 一直报没有rake gem的问题 ，所以就手动在数据库里创建了 create tablexxxxx，这个是由于bundle install 没有指定目录 他使用不到 对应的gembundle install –path /root/.rbenv/versions/2.3.8/lib/ruby/gems/2.3.0/) 安装并配置nginx$ apt-get install nginx配置文件在/etc/nginx 下 bundle exec rails s -p 6661 测试能不能启动(跑步起来 一直报NameError: uninitialized constant ActiveModel::Serializers::Xml 还未找到原因， rbenv版本问题应该是 重装了rbenv之后用capstrano 装就没有这个问题了） ps: 所有配置项文件都要放到shared/config 目录下]]></content>
      <tags>
        <tag>server</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[wechaty-settings]]></title>
    <url>%2Fposts%2Fwechaty-settings.html</url>
    <content type="text"><![CDATA[创建docker image 下载docker.dmg 双击安装 链接 在对应的文件下 docker build1docker build -t wondercv_wechaty . 在远程仓库再打一个tag 1docker tag wondercv_wechaty wondercv/wechaty:latest 推上去 docker push wondercv/wechaty:lastest 查看命令docker image lsdocker container ls wechaty docker login docker pull wondercv/wechaty:latest docker run -d -t -i –rm –name=lydiashenyang -e WECHATY_PUPPET_PADPRO_TOKEN=”puppet_padpro_2d85d172d6d3c5e1” wondercv/wechaty:latest docker container logs lydiashenyang -f docker container stop ChaoJiJianLi]]></content>
      <tags>
        <tag>wechaty</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[css-fuctions-summary]]></title>
    <url>%2Fposts%2Fcss-fuctions-summary.html</url>
    <content type="text"><![CDATA[模糊背景： filter: blur(8px); iOS禁止长按触发js：-webkit-touch-callout:none; iOS除了body外 默认都是正常滑动 没有惯性 想更顺滑：-webkit-overflow-scrolling: touch; ol li 前面的数字默认是以数字内侧对齐 我们想改成左对齐 这样就不会有下载简历之后前面的数字被截掉的问题了 在li的style上加: list-style-position: inside;]]></content>
      <tags>
        <tag>css</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ruby-base64-encode]]></title>
    <url>%2Fposts%2Fruby-base64-encode.html</url>
    <content type="text"><![CDATA[ruby的base64转换如果用Base64.encode64会自动在每60个字符后加入\nBase64.strict_encode64就不会有这个问题了]]></content>
      <tags>
        <tag>ruby</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[微信-文章定向推送]]></title>
    <url>%2Fposts%2Fwechat-send-posts.html</url>
    <content type="text"><![CDATA[先找到人群 openid导出成csv123CSV.open(&apos;/home/ubuntu/20190417-openids.csv&apos;, &apos;a+&apos;) do |csv| User.all.find_each &#123;|user| openids &lt;&lt; [user.wondercv_openid]&#125;end 文章发给自己预览 123456789 items = [&#123; thumb_media_id: Wechat.api.media_create(&apos;image&apos;, &apos;/opt/wondercv_files/0514summer-vacation.png&apos;)[&quot;media_id&quot;], author: &apos;xxx&apos;, title: &apos;xxx&apos;,content_source_url:&apos;https://www.wondercv.com/cvs&apos;, content: File.read(&quot;/opt/wondercv_files/wx_content1.html&quot;), digest: &quot;xxx&quot;, show_cover_pic: 0 &#125;\nxxx]result = Wechat.api.media_uploadnews(Wechat::Message.new(MsgType: &apos;mpnews&apos;).mpnews(items))Wechat.api.message_mass_preview(Wechat::Message.to(&quot;oodHF0pynBim76dsu7tGKVTui_Vs&quot;).ref_mpnews(result[&quot;media_id&quot;]))#预览查看 发给用户 1234567891011Wechat.api.class_eval do def message_mass_send(message) post &apos;message/mass/send&apos;, message.to_json endendsend_result = []openids.each_slice(8000).to_a.each do |ids| a = Wechat.api.message_mass_send(Wechat::Message.to(ids, send_ignore_reprint: 1).ref_mpnews(result[&quot;media_id&quot;])) send_result &lt;&lt; aendWechat.api.message_mass_get(msg_id) 8000一个任务 这个会分成多个send result 状态分别有DELETE SENDING SEND_SUCCESS一次最多发1W]]></content>
      <tags>
        <tag>wechat</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ios-wechat-share]]></title>
    <url>%2Fposts%2Fios-wechat-share.html</url>
    <content type="text"><![CDATA[URL分享 123456789101112WXMediaMessage * message = [WXMediaMessage message]; message.title = title; message.description = desc; [message setThumbImage:[UIImage imageWithData:[NSData dataWithContentsOfURL:[NSURL URLWithString:img]]]]; WXWebpageObject * web = [WXWebpageObject object]; web.webpageUrl = [NSString stringWithH5Route:url]; message.mediaObject = web; SendMessageToWXReq *req= [[SendMessageToWXReq alloc]init]; req.bText = NO; req.message = message; req.scene = WXSceneSession; [WXApi sendReq:req]; 分享小程序 123456789101112131415161718NSString *filePath = [[NSBundle mainBundle] pathForResource:@&quot;shareMiniprogram&quot; ofType:@&quot;png&quot;];NSData *image = [NSData dataWithContentsOfFile:filePath];NSRange range = [[NSString stringWithH5Route:_shareUrl] rangeOfString:@&quot;?client&quot;];//匹配得到的下标NSString* urlStr = [[NSString stringWithH5Route:_shareUrl] substringToIndex:range.location];//截取范围类的字符串WXMiniProgramObject *wxMiniObject = [WXMiniProgramObject object];wxMiniObject.userName = @&quot;gh_8de940b01a61&quot;;wxMiniObject.webpageUrl = urlStr; //打不开小程序的自动转成网页wxMiniObject.path = [[[@&quot;pages/cvShare/cvShare?url=&quot; stringByAppendingString:urlStr] stringByAppendingString:@&quot;&amp;title=&quot;]stringByAppendingString:_clName];wxMiniObject.hdImageData = image;WXMediaMessage *message = [WXMediaMessage message];message.title = _clName;message.description = @&quot;&quot;;message.mediaObject = wxMiniObject;message.thumbData = image; //分享出去的网页的图片SendMessageToWXReq *req = [[SendMessageToWXReq alloc] init];req.message = message;req.scene = WXSceneSession;[WXApi sendReq:req]; 直接打开小程序 12345 WXLaunchMiniProgramReq *launchMiniProgramReq = [WXLaunchMiniProgramReq object];launchMiniProgramReq.userName = name; //拉起的小程序的username（gh_7a4d78xxxxx）launchMiniProgramReq.path = @“pages/index/index”; //拉起小程序页面的可带参路径，不填默认拉起小程序首页launchMiniProgramReq.miniProgramType = WXMiniProgramTypeRelease;[WXApi sendReq:launchMiniProgramReq]; Image分享 12345678910111213141516 NSDictionary * dataDir = (NSDictionary*)data;NSString * img = [NSString stringWithFormat:@&quot;%@&quot;, [dataDir objectForKey:@&quot;img&quot;]];UIImage *image = [UIImage imageWithData:[NSData dataWithContentsOfURL:[NSURL URLWithString:img]]];NSData*imageData = UIImageJPEGRepresentation(image, 0.7);WXImageObject *imageObject = [WXImageObject object];imageObject.imageData = imageData;WXMediaMessage *message = [WXMediaMessage message];NSString *filePath = [[NSBundle mainBundle] pathForResource:@&quot;invite&quot; ofType:@&quot;png&quot;];message.thumbData = [NSData dataWithContentsOfFile:filePath];message.mediaObject = imageObject;SendMessageToWXReq *req = [[SendMessageToWXReq alloc] init];req.bText = NO;req.message = message;req.scene = WXSceneTimeline;//分享到朋友圈 分享给会话是WXSceneSession[WXApi sendReq:req]; ps: 几点注意1.微信小程序分享图片不能超过32k 否则分享不出去2.微信小程序分享图片必须是nsdata格式 12NSString *filePath = [[NSBundle mainBundle] pathForResource:@&quot;shareMiniprogram&quot; ofType:@&quot;png&quot;]; NSData *image = [NSData dataWithContentsOfFile:filePath]; 所以一定要这么取 ps：有时候图片拖进项目里会找不到图片这个时候需要选中图片之后选择菜单中的Source Control —&gt; add selected files 就加进去了 参考：微信开发者平台ps: base64 转图片方法 NSString * img = [NSString stringWithFormat:@&quot;%@&quot;, [dataDir objectForKey:@&quot;img&quot;]]; NSURL *url = [NSURL URLWithString:img]; NSData *imgData = [NSData dataWithContentsOfURL:url]; UIImage *image = [UIImage imageWithData:imgData];]]></content>
      <tags>
        <tag>wechat ios</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Linux命令合集]]></title>
    <url>%2Fposts%2Flinux-order-summary.html</url>
    <content type="text"><![CDATA[根据内存使用由低到高展示进程（Sorting down processes by memory usage）ps aux –sort rss 查看CPU使用情况top —&gt; c —&gt; 1 按照由低到高排序space刷新 压缩文件zip 要生成文件名 xxx xxx(后面跟的都是要压缩的文件)解压文件unzip 文件名 du -a . | sort -n -r | head -n 10disk usage 列出全部文件 | 排序（从大到小） | 看最大的前十个 5.更改文件权限sudo chown -R apps.apps wechaty-file-pro1]]></content>
      <tags>
        <tag>server</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[js-魔法方法汇总]]></title>
    <url>%2Fposts%2Fjs-magic-function-summary.html</url>
    <content type="text"><![CDATA[js直接修改url=window.history.pushState(‘’,’’,’/blog/&lt;%= params[:tag]%&gt;’);最后一个参数是url 相对路径 alert出所有的js error=window.onerror = function myErrorHandler(errorMsg, url, lineNumber) { alert(“Error occured: “ + errorMsg);//or any message return false;}]]></content>
      <tags>
        <tag>js</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Capistrano 基本用法]]></title>
    <url>%2Fposts%2Fcapistrano-useage.html</url>
    <content type="text"><![CDATA[安装gemgem ‘capistrano’, ‘2.12.0’gem ‘capistrano-rbenv’, ‘1.0.1’bundle capify . 会生成两个文件： Capfile , config/deploy.rb cap deploy:setup 会建立必须的 文件夹 （眼疾手快 及时停止executing “if test -f /etc/debian_version; then echo debian; elif test -f /etc/redhat-release; then echo redhat; elif test -f /etc/system-release; then echo redhat; else echo unknown; fi;”） 到服务器上 shared目录下创建config 文件夹 里面创建secrets.yml database.yml. application.yml 文件并配置 执行bundle exec cap deploy 一个deploy.rb 部署多个服务器1234567891011121314151617181920212223242526272829303132SERVER_TEST_32 = &quot;10.103.23.32&quot;SERVER_TEST_103 = &quot;10.103.23.103&quot;SERVER_PRODUCTION_121 = &quot;10.103.23.121&quot;SERVER_PRODUCTION_11 = &quot;10.103.23.11&quot;SERVER_PRODUCTION_73 = &quot;10.103.23.73&quot;SERVER_PRODUCTION_74 = &quot;10.103.23.74&quot;set(:server_type) &#123; puts &quot;== 测试服务器是： test103 (.32 已经废弃，不过有需要的话仍然可以上去)&quot; puts &quot;== 正式服务器是： 73, 74 &quot; Capistrano::CLI.ui.ask(&quot;== which server do you want to deploy to? (test103/test32/73/74)? &quot;)&#125;case server_type.chomp when &apos;test32&apos; server = SERVER_TEST_32 password = &apos;Q7sKxQoM8&apos; when &apos;test103&apos; server = SERVER_TEST_103 password = &apos;v6piiz9cx&apos; when &apos;11&apos; server = SERVER_PRODUCTION_11 password = &apos;no need for password&apos; when &apos;121&apos; server = SERVER_PRODUCTION_121 password = &apos;YopmwECgn&apos; when &apos;73&apos; server = SERVER_PRODUCTION_73 password = &apos;avCNz7gv6&apos; when &apos;74&apos; server = SERVER_PRODUCTION_74 password = &apos;N0NYxtZCo&apos;end 注：deploy.rb examle:role :db, server, :primary =&gt; truerole :db, server set :deploy_to, “/opt/app/test.wondercv.com”default_run_options[:pty] = true #change to your usernameset :user, SSH_USER namespace :deploy do task :start do run “cd #{release_path} &amp;&amp; bundle exec thin start -C config/thin.yml” end task :stop do run “cd #{release_path} &amp;&amp; bundle exec thin stop -C config/thin.yml” end task :restart, :roles =&gt; :app, :except =&gt; { :no_release =&gt; true } do db_migrate stop sleep 2 start end task :db_migrate do run “cd #{release_path} &amp;&amp; bundle install” run “cd #{release_path} &amp;&amp; RAILS_ENV=test bundle exec rake db:migrate” end namespace :assets do task :precompile do #puts “======= should run precompile” #command = “cd #{release_path} &amp;&amp; bundle exec rake RAILS_ENV=production RAILS_GROUPS=assets assets:precompile “ #puts “== please run == \n #{command} \n == manually after deploy is done” #run “bundle install” #run “cd #{release_path} &amp;&amp; bundle exec rake RAILS_ENV=production RAILS_GROUPS=assets assets:precompile “ end endend desc “Copy database.yml to release_path”task :cp_database_yml do puts “=== executing my customized command: “ run “cp -r #{shared_path}/config/* #{release_path}/config/“ run “ln -s #{shared_path}/files #{release_path}/public/files” puts “=== done (executing my customized command)”end before “deploy:assets:precompile”, :cp_database_yml #after “deploy”, “deploy:restart”]]></content>
      <tags>
        <tag>deploy</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[灵异现象汇总]]></title>
    <url>%2Fposts%2Fstrange-events-summary.html</url>
    <content type="text"><![CDATA[在服务器上怎么precompile都不会生成新的assets 文件解决：RAILS_ENV=production放在命令后面https://stackoverflow.com/questions/22778784/rake-assetsprecompile-rails-env-production-not-working-as-required js click事件只监听一次就不再触发了解决： 因为使用的是封装好的dropdown 将他换成普通的隐藏/出现 就不会有问题了]]></content>
      <tags>
        <tag>other</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[微信打开网页 提示防诈骗]]></title>
    <url>%2Fposts%2Fwechat-alert-avoid-cons.html</url>
    <content type="text"><![CDATA[之前我们的网站一在微信里打开 输入的时候就会提示防诈骗 对用户来说体验很不好 找了很久配置的地方也没有找到 终于找到了 特此记录]]></content>
      <tags>
        <tag>wechat</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[服务器调优-log分析工具]]></title>
    <url>%2Fposts%2Flog-analyzer.html</url>
    <content type="text"><![CDATA[rails log(passenger log)1$ gem install request-log-analyzer 简单用法： 分析一个文件，并且把它输出到 report-for-logs.html 中： 1$ request-log-analyzer cms_production_2013-02-17.log --format rails3 --output HTML --file report-for-cms-logs.html nginx log1$ brew install goaccess cd usr/local/Cellar/goaccess进去找到etc/goaccess.conf 就是依次根据 nginx 的格式，打开下面的注释： 123time-format %H:%M:%Sdate-format %d/%b/%Ylog-format %h %^[%d:%t %^] &quot;%r&quot; %s %b &quot;%R&quot; &quot;%u&quot; 1$ goaccess -f &lt;your_log_file&gt; -a &gt; result.html 就可以看到对应的日志的细节了． ps :要确保你的电脑内存大小大于日志：分析大日志时，如果你的机器内存太小，就会报错退出。例如，你的机器是4G内存，但是要分析的内容是7G大小，这时候就会 在机器运行2，3分钟，接近死机是，出现 Killed 的结果（还好GoAccess会自动 干掉这个进程 ) ( but it’s a weakpoint that goaccess can’t analyze big file, e.g. 7G size. ) 所以解决办法是： 1. 把大日志切成小文件。 2. 分析小文件。 $ split -b 2G $ goaccess… 略]]></content>
      <tags>
        <tag>log</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Mac ROR开发环境配置]]></title>
    <url>%2Fposts%2F2019-04-05-computer-configuration.html</url>
    <content type="text"><![CDATA[为了导入数据库 调整了一个底层参数 给电脑调崩了 又要重新配置特此记录配置文档 1.安装homebrew https://brew.sh/2.安装pgsql 1$ brew install postgresql 3.安装bundle 1$ gem install bundler 4.安装rbenv 1$ brew install rbenv 5.安装rails 1$ sudo gem install rails 6.生成ssh key 1$ ssh-keygen 查看ssh key 1$ cat ~/.ssh/id_rsa.pub 应用ssh key 1ssh-add ~/.ssh/id_rsa 7.配置bash profile 1$ sudo vim .bash_profile 文件内容： export PATH=/usr/local/bin:$PATH使其生效 1$ source .bash_profile 8.安装redis在这下载 https://redis.io/将下载下来的包解压后放到/usr/local进到对应文件夹 1$ make install 参考9.配置 vim$ git clone https://github.com/VundleVim/Vundle.vim.git ~/.vim/bundle/Vundle.vim配置 .vimrc 下载vimrc:PlunginInstall 用了一段时间发现 console 跟irb 里不能输入中文又折腾了好久 其实就是没有安装readline 123$ brew install readline $ rbenv uninstall 2.3.7$ CONFIGURE_OPTS=&quot;--with-readline-dir=/usr/local/Cellar/readline/8.0.0&quot; rbenv install 2.3.7 .bash_profile 里要配置eval “$(rbenv init -)”$ rbenv shell 2.3.7 ps:vimrc 参考filetype onset langmenu=noneset fileencodings=utf-8set fileencoding=utf-8set encoding=utf8 set expandtabset shiftwidth=2set softtabstop=2set tabstop=2set numberset autoindentset hlsearchset incsearchset encoding=utf-8“ highlight Normal ctermfg=white ctermbg=cyanset nowrapsyntax enable let g:proj_window_width=5set laststatus=2 map :FufFilemap :MRUmap :Rmodelmap :Rcontrollermap :Runitmap :Rfunctionalmap :Rhelpermap :Rviewmap :ZoomWin “ Strip trailing whitespacefunction! StripTrailingWhitespaces()“ Preparation: save last search, and cursor position.let _s=@/let l = line(“.”)let c = col(“.”)“ Do the business:%s/\s+$//e“ Clean up: restore previous search history, and cursor positionlet @/=_scall cursor(l, c)endfunctionautocmd BufWritePre * :call StripTrailingWhitespaces() “ match Todo /\s+$/filetype plugin onlet mapleader = “,” “ THE VIM OUTLINER (TVO)“ defaults:let otl_install_menu=1let no_otl_maps=0let no_otl_insert_maps=0 “ overrides:let otl_bold_headers=0let otl_use_thlnk=0 “ au BufWinLeave *.otl mkview“ au BufWinEnter *.otl silent loadviewlet maplocalleader = “,” “”Only do this part when compiled with support for autocommands.“if has(“autocmd”)“ autocmd Filetype java setlocal omnifunc=javacomplete#Complete“endif set nocompatible “ be iMprovedfiletype off “ required! “ ============== Vundle part =================set rtp+=~/.vim/bundle/Vundle.vim/call vundle#begin() “ let Vundle manage Vundle“ required!Plugin ‘gmarik/vundle’ “ My Bundles here:““ original repos on githubPlugin ‘tpope/vim-fugitive’Plugin ‘Lokaltog/vim-easymotion’“Plugin ‘rstacruz/sparkup’, {‘rtp’: ‘vim/‘}Plugin ‘tpope/vim-rails.git’Plugin ‘bumaociyuan/vim-matchit.git’Plugin ‘ecomba/vim-ruby-refactoring.git’ “ vim-scripts reposPlugin ‘L9’Plugin ‘FuzzyFinder’ Plugin ‘git://git.wincent.com/command-t.git’“Plugin ‘snipMate’“Plugin ‘snipmate-snippets’“Plugin ‘Jasmine-snippets-for-snipMate’Plugin ‘YankRing.vim’Plugin ‘The-NERD-Commenter’Plugin ‘The-NERD-tree’Plugin ‘kchmck/vim-coffee-script’ colorscheme monokaiset background=lightset background=darkPlugin ‘mru.vim’Plugin ‘greplace.vim’call vundle#end() filetype plugin indent on “ required!““ Brief help“ :PluginList - list configured bundles“ :PluginInstall(!) - install(update) bundles“ :PluginSearch(!) foo - search(or refresh cache first) for foo“ :PluginClean(!) - confirm(or auto-approve) removal of unused bundles““ see :h vundle for more details or wiki for FAQ“ NOTE: comments after Plugin command are not allowed.. map fmap a :YRShowmap t :NERDTreemap q :qmap f :Rfixturemap rj :Rjavascript “autocmd BufWritePost,FileWritePost .coffee :silent !coffee –compile –join appstore/static/javascripts/angular/controllers.js appstore/static/javascripts/angular/controllers.coffee appstore/static/javascripts/angular/tabs/coffee appstore/static/javascripts/angular/applications/coffee appstore/static/javascripts/angular/users/coffee appstore/static/javascripts/angular/commons/*coffee“autocmd BufWritePost,FileWritePost *.coffee :silent !coffee –compile appstore/static/javascripts/angular/app.coffee appstore/static/javascripts/angular/directives.coffee appstore/static/javascripts/angular/filters.coffee appstore/static/javascripts/angular/services.coffee “autocmd BufWritePost,FileWritePost .coffee :silent !coffee –compile –join tvboxcms/static/javascripts/angular/controllers.js tvboxcms/static/javascripts/angular/controllers.coffee tvboxcms/static/javascripts/angular/tabs/coffee tvboxcms/static/javascripts/angular/applications/coffee tvboxcms/static/javascripts/angular/users/coffee tvboxcms/static/javascripts/angular/commons/*coffee“autocmd BufWritePost,FileWritePost *.coffee :silent !coffee –compile tvboxcms/static/javascripts/angular/app.coffee tvboxcms/static/javascripts/angular/directives.coffee tvboxcms/static/javascripts/angular/filters.coffee tvboxcms/static/javascripts/angular/services.coffee “autocmd BufWritePost,FileWritePost .coffee :silent !coffee –compile –join m-cms-preview/static/javascripts/angular/controllers.js m-cms-preview/static/javascripts/angular/controllers.coffee m-cms-preview/static/javascripts/angular/tabs/coffee m-cms-preview/static/javascripts/angular/applications/coffee m-cms-preview/static/javascripts/angular/users/coffee m-cms-preview/static/javascripts/angular/commons/*coffee“autocmd BufWritePost,FileWritePost *.coffee :silent !coffee –compile m-cms-preview/static/javascripts/angular/app.coffee m-cms-preview/static/javascripts/angular/directives.coffee m-cms-preview/static/javascripts/angular/filters.coffee m-cms-preview/static/javascripts/angular/services.coffee]]></content>
      <tags>
        <tag>environment</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[html-多行... 按照字数]]></title>
    <url>%2Fposts%2F2019-03-30-html-many-lines.html</url>
    <content type="text"><![CDATA[1&lt;%= truncate(page.description, length: 70, omission: '...') %&gt;]]></content>
      <tags>
        <tag>html</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[gem - imgkit 的坑]]></title>
    <url>%2Fposts%2F2019-03-25-the-pit-of-gem-imgkit.html</url>
    <content type="text"><![CDATA[1.css js 文件都可以写在页面里但是必须配置config.asset_host = ENV[‘HOST’]否则会找不到文件如果不能配置就只能将文件传到服务器然后指定全路径2.有部分jquery方法不能用需要找到js方法代替3.css filter 不可用]]></content>
      <tags>
        <tag>ruby css</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[jquery-select2 highlight dropdown keywords]]></title>
    <url>%2Fposts%2F2018-12-25-ruby-match.html</url>
    <content type="text"><![CDATA[基本逻辑是在搜索的时候将query 存起来 然后用query.term在templateResult方法中拼接显示matcher只能用于拼接文字什么的 html不行 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253var query = &#123;&#125;; function markMatch (text, term) &#123; // Find where the match is var match = text.toUpperCase().indexOf(term.toUpperCase()); var $result = $('&lt;span&gt;&lt;/span&gt;'); // If there is no match, move on if (match &lt; 0) &#123; return $result.text(text); &#125; // Put in whatever text is before the match $result.text(text.substring(0, match)); // Mark the match var $match = $('&lt;span style="color: #ff4f4c"&gt;&lt;/span&gt;'); $match.text(text.substring(match, match + term.length)); // Append the matching text $result.append($match); // Put in whatever is after the match $result.append(text.substring(match + term.length)); return $result; &#125; function formatState (state) &#123; if (!state.id) &#123; return state.text; &#125; var term = query.term || ''; var $result = markMatch(state.text, term); return $result; &#125;; $('#intentions_profession').select2(&#123; templateSelection: formatSelectedProfession,//改变选中的条目显示 templateResult: formatState,//改变下拉单里条目显示 language: &#123; searching: function (params) &#123; // Intercept the query as it is happening query = params; // Change this to be appropriate for your application return 'Searching…'; &#125; &#125; &#125;); 参考 backspace删除一整个tag 123456$('#intentions_profession').on('select2:unselect', function(event) &#123; $el = $(this) setTimeout(function() &#123; $el.closest('.intention-input').find('.select2-search__field').val('') &#125;, 0) &#125;)]]></content>
      <tags>
        <tag>js</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ios-notification]]></title>
    <url>%2Fposts%2F2019-02-27-ios-notification.html</url>
    <content type="text"><![CDATA[要先addObserver 然后postNotificationName]]></content>
      <tags>
        <tag>ios</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[rails - cache]]></title>
    <url>%2Fposts%2Fundefined.html</url>
    <content type="text"><![CDATA[View: 123&lt;% cache current_user.active_cvs.order('updated_at desc').first.updated_at do%&gt; xxxxx&lt;% end %&gt; 当cache后面的key变了的时候 页面中的内容才会重新加载 Controller: Model: 1Rails.cache.fetch() ps: 开启development cache mode rails dev:cache 参考]]></content>
      <tags>
        <tag>rails</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[sql 基础(pgsql & mysql)]]></title>
    <url>%2Fposts%2F2019-01-15-sql-base.html</url>
    <content type="text"><![CDATA[pgsql 进入本地数据库 1psql resumehack_development 进入服务器数据库console 直接连数据库 bin/rails dbconsole production 修改数据库密码\password 查看数据库大小 命令： 1SELECT pg_size_pretty(pg_database_size(&apos;database name&apos;)); 查询所有表并按照大小排列 1select table_name, pg_relation_size(quote_ident(table_name)) from information_schema.tables where table_schema = &apos;public&apos; order by 2; 复制单张表数据pg_dump -U postgres –table jd_temps -Fc test_production &gt; /home/apps/jd_temps.sql scp apps@wondermail.club:/home/apps/jd_temps.sql /Users/dailanyi/Downloads/ psql resumehack_developmentDROP TABLE jd_temps; pg_restore -U dailanyi –dbname resumehack_development –table=jd_temps /Users/dailanyi/Downloads/jd_temps.sql psql resumehack_developmentALTER TABLE jd_temps ADD PRIMARY KEY (id); 导入数据库到本地 1psql resumehack_development &lt; /Users/dailanyi/Desktop/PostgreSQL.sql restore db 12psql -U postgres -d wondercv_test -c &quot;drop schema public cascade; create schema public;&quot;psql --set ON_ERROR_STOP=on -U postgres wondercv_test &lt; #&#123;db_unzip_file&#125; mysql从远程拷贝数据库到本地 1.先上远程查看是否有备份文件没有就创建一个：mysqldump -uroot -p密码 数据库名称 &gt; 导出来的数据库文件名称.sql 2.在本地运行scp -P 端口号 root@服务器名称:/opt/app/程序名称/current/导出来的数据库文件名称.sql . 3.将远程拷下来的数据库库备份文件倒入本地数据库mysql -uroot -p本地数据库密码 本地数据库名称 &lt; 导出来的数据库文件名称.sql ps: 远程文件下载： 1scp -r apps@staging.wondercv.com:/home/apps/main-backup/resumehack_pg/2018.12.02.15.30.02 /Users/dailanyi/Downloads/ 上传本地文件到服务器 1scp /path/local_filename username@servername:/path 在文件目录下跑 不在console里面export RAILS_ENV=productionrails runner /home/apps/download_interview_data.rb]]></content>
      <tags>
        <tag>sql</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[js-在数组中固定位置插值]]></title>
    <url>%2Fposts%2F2019-01-07-js-fixed-position-interpolation-in-arrays.html</url>
    <content type="text"><![CDATA[1234567// 原来的数组var array = ["one", "two", "four"];// splice(position, numberOfItemsToRemove, item)// 拼接函数(索引位置, 要删除元素的数量, 元素)array.splice(2, 0, "three"); array; // 现在数组是这个样子 ["one", "two", "three", "four"]]]></content>
      <tags>
        <tag>js</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[rails - js rendern]]></title>
    <url>%2Fposts%2F2018-12-26-rails-js-render-rn.html</url>
    <content type="text"><![CDATA[1$(&apos;#recruit_info_customize_company_intro&apos;).val(&apos;&lt;%=j @company.intro%&gt;&apos;)]]></content>
      <tags>
        <tag>ruby</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ruby-match]]></title>
    <url>%2Fposts%2F2018-12-25-ruby-match.html</url>
    <content type="text"><![CDATA[12str = '产品xxx产品经理'str.match(/(产品)/).size]]></content>
      <tags>
        <tag>ruby</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[js-textarea文字计数]]></title>
    <url>%2Fposts%2F2018-12-14-html-txt-line-wrap.html</url>
    <content type="text"><![CDATA[123456&lt;div class='input-field'&gt; &lt;%= f.text_area :jd, value: text, maxlength: '100'%&gt; &lt;span class='text-num'&gt; &lt;span class='real-text-num'&gt;0&lt;/span&gt;/100 &lt;/span&gt;&lt;/div&gt; 123$(document).on('input propertychange paste keyup','#recruit_info_jd', function(event) &#123; $(this).closest('.input-field').find('span.text-num .real-text-num').html($(this).val().length)&#125;)]]></content>
      <tags>
        <tag>js</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[js- textarea placeholder 换行显示]]></title>
    <url>%2Fposts%2F2018-12-21-js-textarea-placeholder-line-wrapping-display.html</url>
    <content type="text"><![CDATA[12345678910111213141516171819var placeholder = "This is a line \nthis should be a new line"$(document).ready(function()&#123; if($('#recruit_info_jd').val() == '')&#123; $('#recruit_info_jd').val(placeholder) $('#recruit_info_jd').css('color', "#999") &#125;&#125;$('#recruit_info_jd').focus(function()&#123; if($(this).val() === placeholder)&#123; $(this).val(''); $(this).css('color', '#404040'); &#125;&#125;); $('#recruit_info_jd').blur(function()&#123; if($(this).val() ==='')&#123; $(this).val(placeholder); $('#recruit_info_jd').css('color', "#999") &#125;&#125;);]]></content>
      <tags>
        <tag>js</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[html-txt area换行]]></title>
    <url>%2Fposts%2F2018-12-14-html-txt-line-wrap.html</url>
    <content type="text"><![CDATA[文字拼接成字符串，要换行：拼接”\n”ps:一定得是双引号]]></content>
      <tags>
        <tag>html</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[jquery-highlight]]></title>
    <url>%2Fposts%2F2018-12-08-jquery-highlight.html</url>
    <content type="text"><![CDATA[参考]]></content>
      <tags>
        <tag>js</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[jquery- autocomplete]]></title>
    <url>%2Fposts%2F2018-12-08-jquery-autocomplete.html</url>
    <content type="text"><![CDATA[12345678910111213141516171819202122232425262728293031$( "#jd-temp-name" ).autocomplete(&#123; source: function (request, response) &#123; $.ajax(&#123; dataType: "json", type : 'Get', url: '&lt;%= search_jd_temps_path%&gt;', data:&#123; name: request.term, &#125;, success: function(data) &#123; console.log(data.professions) var items = []; $.each( data.professions, function(key, val)&#123; items.push("&lt;div class='result-item'&gt;" + val.level3 + "&lt;div class='subtitle'&gt;" + val.level1 + "-" + val.level2 + "&lt;/div&gt;&lt;/div&gt;") &#125;); console.log(items) response(items); &#125;, error: function(data) &#123; console.log('fail') &#125; &#125;); &#125;, &#125;).data('ui-autocomplete')._renderItem = function(ul, item)&#123; var expression = new RegExp(this.term,'gi') var result = item.label.replace(expression, "&lt;span style='color: #ff4f4c!important;'&gt;" + this.term + "&lt;/span&gt;") return $("&lt;li&gt;&lt;/li&gt;").append(result).appendTo(ul) &#125;]]></content>
      <tags>
        <tag>js</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[js-监听input 输入中文]]></title>
    <url>%2Fposts%2F2018-12-08-js-listening-input-into-chinese.html</url>
    <content type="text"><![CDATA[1234567891011121314var cpLock = false;$('#jd-temp-name').on('compositionstart', function () &#123; cpLock = true; &#125;);$('#jd-temp-name').on('compositionend', function () &#123; cpLock = false;&#125;);$('#jd-temp-name').on('input', function() &#123; if (!cpLock) &#123; setTimeout(function () &#123; $('#jd-temp-search-form').submit() &#125;, 1) &#125; &#125;)]]></content>
      <tags>
        <tag>js</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[devise-将密码设成空字符串]]></title>
    <url>%2Fposts%2F2018-12-03-devise-set-the-password-to-an-empty-string.html</url>
    <content type="text"><![CDATA[u.update_column(:encrypted_password, ‘’)]]></content>
      <tags>
        <tag>ruby</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[rails- format.js]]></title>
    <url>%2Fposts%2F2018-12-03-rails-formatjs.html</url>
    <content type="text"><![CDATA[respond_to do |format| format.js { # 在 client 端執行 alert (javascript) “alert(‘Hello Rails’);”, # page not fount status: 404, # render /app/views/your-controller/test_action.js.erb action: “test_action”, # 將 test_item 以 json 格式 render json: @test_item, # 找到指定的檔案作 render file: filename, # 直接 render text: Hello text: “Hello” } end]]></content>
      <tags>
        <tag>ruby</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ios-打开其他app里的文件]]></title>
    <url>%2Fposts%2F2018-11-26-ios-open-messages-from-other-apps.html</url>
    <content type="text"><![CDATA[1.info.plist里面配置 123456789101112131415&lt;key&gt;CFBundleDocumentTypes&lt;/key&gt;&lt;array&gt; &lt;dict&gt; &lt;key&gt;CFBundleTypeName&lt;/key&gt; &lt;string&gt;downloadPDF&lt;/string&gt; &lt;key&gt;LSHandlerRank&lt;/key&gt; &lt;string&gt;Default&lt;/string&gt; &lt;key&gt;LSItemContentTypes&lt;/key&gt; &lt;array&gt; &lt;string&gt;com.adobe.pdf&lt;/string&gt; //pdf &lt;string&gt;com.microsoft.word.doc&lt;/string&gt; //doc &lt;string&gt;org.openxmlformats.wordprocessingml.document&lt;/string&gt; //docx &lt;/array&gt; &lt;/dict&gt;&lt;/array&gt; 2.appdelegate在- (BOOL)application:(UIApplication )app openURL:(NSURL *)url options:(NSDictionary&lt;NSString, id&gt; *)options方法里 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273747576777879808182838485868788899091929394959697 if (url &amp;&amp; [url isFileURL]) &#123; NSString *fileName = url.lastPathComponent; // 从路径中获得完整的文件名（带后缀） // path 类似这种格式：file:///private/var/mobile/Containers/Data/Application/83643509-E90E-40A6-92EA-47A44B40CBBF/Documents/Inbox/jfkdfj123a.pdf NSString *path = url.absoluteString; // 完整的url字符串 path = [path stringByRemovingPercentEncoding]; // 解决url编码问题 NSMutableString *string = [[NSMutableString alloc] initWithString:path]; if ([path hasPrefix:@&quot;file://&quot;]) &#123; // 通过前缀来判断是文件 // 去除前缀：/private/var/mobile/Containers/Data/Application/83643509-E90E-40A6-92EA-47A44B40CBBF/Documents/Inbox/jfkdfj123a.pdf [string replaceOccurrencesOfString:@&quot;file://&quot; withString:@&quot;&quot; options:NSCaseInsensitiveSearch range:NSMakeRange(0, path.length)]; if( [DXAccountSave account])&#123; unsigned long long size = [[NSFileManager defaultManager] attributesOfItemAtPath:string error:nil].fileSize; size = (size*1.0)/(1024*1024); if(size &gt;= 2)&#123; [SVProgressHUD showErrorWithStatus:@&quot;上传简历请小于2M&quot;]; [SVProgressHUD dismissWithDelay:4]; &#125;else&#123; AppDelegate * delegate = (AppDelegate*)[UIApplication sharedApplication].delegate; [delegate toSelectRoot:0]; AFHTTPSessionManager * manager = [AFHTTPSessionManager manager]; manager.requestSerializer = [AFJSONRequestSerializer serializer]; manager.responseSerializer = [AFJSONResponseSerializer serializer]; NSString *importUrl = [H5_SERVER stringByAppendingString:@&quot;/interface/files/can_upload_file&quot;];[manager POST:importUrl parameters:nil progress:nil success:^(NSURLSessionDataTask * _Nonnull task, id _Nullable responseObject) &#123;NSString*info= [responseObject objectForKey:@&quot;info&quot;];if([info isEqualToString:@&quot;can_create&quot;])&#123;UIAlertController *alert = [UIAlertController alertControllerWithTitle:@&quot;上传简历&quot; message:@&quot;将简历上传到超级简历&quot; preferredStyle:UIAlertControllerStyleAlert];UIAlertAction* defaultAction = [UIAlertAction actionWithTitle:@&quot;取消&quot; style:UIAlertActionStyleDefaulthandler:^(UIAlertAction * action) &#123; [alert dismissViewControllerAnimated:YES completion:nil];&#125;]; UIAlertAction* confirmAction = [UIAlertAction actionWithTitle:@&quot;确定&quot; style:UIAlertActionStyleDefaulthandler:^(UIAlertAction * action) &#123; [SVProgressHUD showWithStatus:@&quot;正在上传&quot;]; AFHTTPSessionManager * manager = [AFHTTPSessionManager manager]; manager.requestSerializer = [AFJSONRequestSerializer serializer]; manager.responseSerializer = [AFJSONResponseSerializer serializer]; NSMutableDictionary *parameter = [NSMutableDictionary dictionary]; parameter[@&quot;file&quot;] = [[NSFileManager defaultManager] contentsAtPath:string]; parameter[@&quot;file_name&quot;] = fileName; NSString *importUrl = [H5_SERVER stringByAppendingString:@&quot;/interface/files/upload_file&quot;]; [manager POST:importUrl parameters:parameter constructingBodyWithBlock:nil progress:nil success:^(NSURLSessionDataTask * _Nonnull task, id _Nullable responseObject) &#123; importFileViewController *importFile = [[importFileViewController alloc] init]; importFile.fileName = fileName; importFile.currentRoute = [[responseObject objectForKey:@&quot;file&quot;] stringByAddingPercentEncodingWithAllowedCharacters:[NSCharacterSet URLQueryAllowedCharacterSet]]; UINavigationController * navC = [[UINavigationController alloc]initWithRootViewController:importFile]; [self.window.rootViewController presentViewController:navC animated:YES completion:nil]; &#125; failure:^(NSURLSessionDataTask * _Nullable task, NSError * _Nonnull error) &#123; [SVProgressHUD showErrorWithStatus:@&quot;网络繁忙, 请稍后再试&quot;]; &#125;]; &#125;]; [alert addAction:defaultAction]; [alert addAction:confirmAction]; UIWindow *alertWindow = [[UIWindow alloc] initWithFrame:[UIScreen mainScreen].bounds]; alertWindow.rootViewController = [[UIViewController alloc] init]; alertWindow.windowLevel = UIWindowLevelAlert + 1; [alertWindow makeKeyAndVisible]; [alertWindow.rootViewController presentViewController:alert animated:YES completion:nil];&#125;else if ([info isEqualToString:@&quot;no_user&quot;])&#123; [Login showLoginInController:self.window.rootViewController WhenComplete:^&#123; AppDelegate * delegate = (AppDelegate*)[UIApplication sharedApplication].delegate; [delegate toSelectRoot:0]; [DXSave Save:@&quot;showAd&quot; with:@&quot;yes&quot;]; [SVProgressHUD showSuccessWithStatus:@&quot;登录成功 请重新上传文件&quot;]; dispatch_after(dispatch_time(DISPATCH_TIME_NOW, (int64_t)(2.0 * NSEC_PER_SEC)), dispatch_get_main_queue(), ^&#123; if(![[DXSave Get:@&quot;hideLoading&quot;] isEqualToString:@&quot;yes&quot;])&#123; [SVProgressHUD showWithStatus:@&quot;加载中&quot;]; &#125; &#125;);&#125;];&#125;else&#123; [SVProgressHUD showErrorWithStatus:info]; [SVProgressHUD dismissWithDelay:2.0]; NSDictionary *dictionary = @&#123;@&quot;fileName&quot;:fileName, @&quot;filePath&quot;:string&#125;; [[NSNotificationCenter defaultCenter]postNotificationName:@&quot;toMember&quot; object:self userInfo:dictionary];&#125;&#125; failure:^(NSURLSessionDataTask * _Nullable task, NSError * _Nonnull error) &#123; [SVProgressHUD showErrorWithStatus:@&quot;网络繁忙, 请稍后再试&quot;];&#125;]; &#125;&#125;else&#123;[Login showLoginInController:self.window.rootViewController WhenComplete:^&#123; AppDelegate * delegate = (AppDelegate*)[UIApplication sharedApplication].delegate; [delegate toSelectRoot:0]; [DXSave Save:@&quot;showAd&quot; with:@&quot;yes&quot;]; [SVProgressHUD showSuccessWithStatus:@&quot;登录成功 请重新上传文件&quot;]; dispatch_after(dispatch_time(DISPATCH_TIME_NOW, (int64_t)(2.0 * NSEC_PER_SEC)), dispatch_get_main_queue(), ^&#123; if(![[DXSave Get:@&quot;hideLoading&quot;] isEqualToString:@&quot;yes&quot;])&#123; [SVProgressHUD showWithStatus:@&quot;加载中&quot;]; &#125; &#125;);&#125;];&#125;return YES;&#125;&#125;]]></content>
      <tags>
        <tag>oc</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[服务器上操作]]></title>
    <url>%2Fposts%2F2018-11-15-operation-on-the-server.html</url>
    <content type="text"><![CDATA[重启servicestaging: sudo service nginx restartproduction:先找到nginx 主进程ps -ef | grep nginxkill -HUP (root 对应的进程号) 修改application.ymlcd ResumeHack/shared直接修改application.yml ps：重启rails server 就是重启service就行]]></content>
      <tags>
        <tag>server</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[微信小程序-wx.request get cookie]]></title>
    <url>%2Fposts%2F2018-11-13-wechat-program-wxrequest-get-cookies.html</url>
    <content type="text"><![CDATA[123456789wx.request(&#123; url: &apos;/api/login&apos;, success: (data) =&gt; &#123; if(data.statusCode === 200) &#123; console.log(data); // data 中应该会有 Set-Cookie 或 set-cookie 的字样，嗯，那就是服务器种下的 cookie &#125; &#125;&#125;)]]></content>
      <tags>
        <tag>wechat</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[oc-wvjb remove Handler]]></title>
    <url>%2Fposts%2F2018-11-10-oc-wvjb-remove-handler.html</url>
    <content type="text"><![CDATA[参考]]></content>
      <tags>
        <tag>oc</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ios12-页面会上移]]></title>
    <url>%2Fposts%2F2018-11-09-ios12-page-will-move-up.html</url>
    <content type="text"><![CDATA[12345if(iPhoneXSeries)&#123; _webview.scrollView.contentInset = UIEdgeInsetsMake(88, 0, 0, 0);&#125;else&#123; _webview.scrollView.contentInset = UIEdgeInsetsMake(64, 0, 0, 0);&#125; ios 12之前 用这个方法将webview下移来正常显示页面，但是ios12之后这个页面有一个问题就是进行了某些操作之后页面会上移回UIEdgeInsetsMake(0, 0, 0, 0)所以找到了另一个方法固定页面位置 1self.edgesForExtendedLayout=UIRectEdgeNone;]]></content>
      <tags>
        <tag>oc</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ruby-版本判断]]></title>
    <url>%2Fposts%2F2018-11-06-ruby-version-judgment.html</url>
    <content type="text"><![CDATA[1234567891011121314151617181920def compare_app_version(current, old) return if current.blank? || old.blank? la = current.split('.') lb = old.split('.') i = 0 if la.length &gt; lb.length len = la.length else len = lb.length end while i &lt;= len do if (la[i] &amp;&amp; !lb[i] &amp;&amp; la[i].to_i &gt; 0) || (la[i].to_i &gt; lb[i].to_i) return 1 elsif (lb[i] &amp;&amp; !la[i] &amp;&amp; lb[i].to_i &gt; 0) || (la[i].to_i &lt; lb[i].to_i) return -1 end i +=1 end return 0 end]]></content>
      <tags>
        <tag>ruby</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ios-webview登录]]></title>
    <url>%2Fposts%2F2018-11-06-ios-webview-login.html</url>
    <content type="text"><![CDATA[ios webview登录最重要的就是将登陆之后的cookie存起来在ios12之前我们登录都能正常从- (void)webView:(WKWebView *)webView decidePolicyForNavigationResponse:(WKNavigationResponse *)navigationResponse decisionHandler:(void (^)(WKNavigationResponsePolicy))decisionHandler方法中取到response之后，直接处理成cookie存起来但是ios12开始 此方法登录就取不到response里最重要的set-cookie的值 我们就只能在h5那边登录之后的页面取到cookie经过字符串处理 将他们存起来 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647-(void)loginSuccess:(NSHTTPURLResponse*)response orWithCookie:(NSString*)cookie&#123; //清除之前的coockie NSHTTPCookieStorage *cookieJar = [NSHTTPCookieStorage sharedHTTPCookieStorage]; NSArray *_tmpArray = [NSArray arrayWithArray:[cookieJar cookies]]; for (id obj in _tmpArray) &#123; [cookieJar deleteCookie:obj]; &#125; // 删除NSUserDefault里面的值 NSUserDefaults *defatluts = [NSUserDefaults standardUserDefaults]; NSDictionary *dictionary = [defatluts dictionaryRepresentation]; for(NSString *key in [dictionary allKeys])&#123; if([key isEqualToString:@&quot;cookie&quot;])&#123; [defatluts removeObjectForKey:key]; &#125; [defatluts synchronize]; &#125; //读取wkwebview中的cookie 方法 NSArray *cookies =[NSHTTPCookie cookiesWithResponseHeaderFields:[response allHeaderFields] forURL: response.URL]; if (cookies.count &lt;= 0)&#123; NSString *b =[[self achieveStringWithRootString:cookie key:@&quot;_ResumeHack_session&quot;] stringByAppendingString:@&quot; path=/; HttpOnly, &quot;]; NSMutableArray* mcookies = [cookies mutableCopy]; [mcookies addObject:[b cookie]]; cookies = [NSArray arrayWithArray:mcookies]; &#125; for (NSHTTPCookie *cookie in cookies) &#123; //将 cookie 存进NSHTTPCookieStorage [[NSHTTPCookieStorage sharedHTTPCookieStorage] setCookie:cookie]; &#125; //把cookie存到NUserDefault里面 NSData *cookiesData = [NSKeyedArchiver archivedDataWithRootObject: [[NSHTTPCookieStorage sharedHTTPCookieStorage] cookies]]; NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults]; [defaults setObject: cookiesData forKey: @&quot;cookie&quot;]; [defaults synchronize]; NSLog(@&quot;userdefault中的cookie%@&quot;,[defaults objectForKey:@&quot;cookie&quot;]); //看看存入到了NSHTTPCookieStorage了没有 NSHTTPCookieStorage *cookieJar2 = [NSHTTPCookieStorage sharedHTTPCookieStorage]; for (NSHTTPCookie *cookie in cookieJar2.cookies) &#123; NSLog(@&quot;NSHTTPCookieStorage中的cookie%@&quot;, cookie); &#125; [self dismissViewControllerAnimated:YES completion:^&#123; _loginComplete(); &#125;]; [Loading hide];&#125; 字符串处理cookie 12345678- (NSString *)achieveStringWithRootString:(NSString *)rootString key:(NSString *)key&#123; NSRange aRange = [rootString rangeOfString:[NSString stringWithFormat:@&quot;%@=&quot;,key]]; NSString *c = [rootString substringFromIndex:aRange.location]; NSLog(@&quot;c===============%@&quot;, c); NSRange bRange = [c rangeOfString:@&quot;;&quot;];//匹配得到的下标 NSString *d = [c substringToIndex:bRange.location + bRange.length]; return d;&#125; ps:在登录、登出中清除cookie跟userdefault中的值的时候要避免清除其他有用的值 否则会导致userdefault值的丢失 造成很奇怪的bug]]></content>
      <tags>
        <tag>oc</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ios-开屏广告图]]></title>
    <url>%2Fposts%2F2018-11-05-ios-open-screen-advertising-map.html</url>
    <content type="text"><![CDATA[1.广告页加载思路。广告页的内容要实时显示，在无网络状态或者网速缓慢的情况下不能延迟加载，或者等到首页出现了再加载广告页。所以这里我不采用网络请求广告接口获取图片地址，然后加载图片的方式，而是先将图片异步下载到本地，并保存图片名，每次打开app时先根据本地存储的图片名查找沙盒中是否存在该图片，如果存在，则显示广告页。 2.判断广告页面是否更新。无论本地是否存在广告图片，每次启动都需要重新调用广告接口，根据图片名称或者图片id等方法判断广告是否更新，如果获取的图片名称或者图片id跟本地存储的不一致，则需要重新下载新图片，并删除旧图片。 3.广告页点击。如果点击广告需要跳转广告详情页面，那么广告链接地址也需要用NSUserDefaults存储。注意：广告详情页面是从首页push进去的。 4.广告页的显示代码可以放在AppDeleate中，也可以放在首页的控制器中。如果代码是在AppDelegate中，可以通过发送通知的方式，让首页push到广告详情页。 1234567891011121314151617181920212223242526272829303132333435AppDeleate.m //开机广告 NSString *filePath = [self getFilePathWithImageName:[DXSave Get:adImageName]]; BOOL isExist = [self isFileExistWithFilePath:filePath]; if (isExist) &#123;// 图片存在 AFHTTPSessionManager * manager = [AFHTTPSessionManager manager]; manager.requestSerializer = [AFJSONRequestSerializer serializer]; manager.responseSerializer = [AFJSONResponseSerializer serializer]; NSString *getImageUrl = [H5_SERVER stringByAppendingString:@&quot;admin/ios_open_ads/ios_get_ad&quot;]; [manager GET:getImageUrl parameters:nil progress:nil success:^(NSURLSessionDataTask * _Nonnull task, id _Nullable responseObject) &#123; if ([self isFileExistWithFilePath: [self getFilePathWithImageName:responseObject[@&quot;name&quot;]]])&#123; NSDateFormatter* df = [[NSDateFormatter alloc] init]; [df setDateFormat:@&quot;yyyy-MM-dd&quot;]; NSLocale* locale = [NSLocale autoupdatingCurrentLocale]; [df setLocale: locale]; [DXSave Save:@&quot;showTime&quot; with:responseObject[@&quot;show_time&quot;]]; NSDate* startTime = [df dateFromString: responseObject[@&quot;start_time&quot;]]; NSDate* endTime = [df dateFromString: responseObject[@&quot;end_time&quot;]]; NSDate *today = [NSDate date]; if (([startTime compare:today] == NSOrderedSame || [startTime compare:today] ==NSOrderedAscending)&amp;&amp; ([endTime compare:today] == NSOrderedSame || [endTime compare:today] ==NSOrderedDescending) )&#123; [DXSave Save:@&quot;showAd&quot; with:@&quot;yes&quot;]; startAd *advertiseView = [[startAd alloc] initWithFrame:self.window.bounds]; advertiseView.filePath =[self getFilePathWithImageName:[DXSave Get:adImageName]]; [advertiseView show]; &#125; &#125; &#125; failure:^(NSURLSessionDataTask * _Nullable task, NSError * _Nonnull error) &#123; [SVProgressHUD showErrorWithStatus:@&quot;网络繁忙, 请稍后再试&quot;]; &#125;]; &#125; // 2.无论沙盒中是否存在广告图片，都需要重新调用广告接口，判断广告是否更新 [self getAdvertisingImage]; 调用方法 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081/** * 判断文件是否存在 */- (BOOL)isFileExistWithFilePath:(NSString *)filePath&#123; NSFileManager *fileManager = [NSFileManager defaultManager]; BOOL isDirectory = FALSE; return [fileManager fileExistsAtPath:filePath isDirectory:&amp;isDirectory];&#125;/** * 初始化广告页面 */- (void)getAdvertisingImage&#123; // TODO 请求广告接口 AFHTTPSessionManager * manager = [AFHTTPSessionManager manager]; manager.requestSerializer = [AFJSONRequestSerializer serializer]; manager.responseSerializer = [AFJSONResponseSerializer serializer]; NSString *getImageUrl = [H5_SERVER stringByAppendingString:@&quot;admin/ios_open_ads/ios_get_ad&quot;]; [manager GET:getImageUrl parameters:nil progress:nil success:^(NSURLSessionDataTask * _Nonnull task, id _Nullable responseObject) &#123; NSString *imageUrl = responseObject[@&quot;img&quot;]; NSString *imageName = responseObject[@&quot;name&quot;]; [DXSave Save:@&quot;showTime&quot; with:responseObject[@&quot;show_time&quot;]]; NSString *filePath = [self getFilePathWithImageName:imageName]; BOOL isExist = [self isFileExistWithFilePath:filePath]; if (!isExist)&#123;// 如果该图片不存在，则下载新图片，删除老图片 [self downloadAdImageWithUrl:imageUrl imageName:imageName url:responseObject[@&quot;url&quot;]]; &#125; &#125; failure:^(NSURLSessionDataTask * _Nullable task, NSError * _Nonnull error) &#123;// [SVProgressHUD showErrorWithStatus:@&quot;网络繁忙, 请稍后再试&quot;]; &#125;]; &#125;/** * 下载新图片 */- (void)downloadAdImageWithUrl:(NSString *)imageUrl imageName:(NSString *)imageName url:(NSString*)url&#123; dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^&#123; NSData *data = [NSData dataWithContentsOfURL:[NSURL URLWithString:imageUrl]]; UIImage *image = [UIImage imageWithData:data]; NSString *filePath = [self getFilePathWithImageName:imageName]; // 保存文件的名称 [DXSave Save:@&quot;adPath&quot; with:filePath]; if ([UIImagePNGRepresentation(image) writeToFile:filePath atomically:YES]) &#123;// 保存成功 NSLog(@&quot;保存成功&quot;); [self deleteOldImage]; [DXSave Save:adImageName with:imageName]; [DXSave Save:adImageUrl with:url]; &#125;else&#123; NSLog(@&quot;保存失败&quot;); &#125; &#125;);&#125;/** * 删除旧图片 */- (void)deleteOldImage&#123; NSString *imageName = [DXSave Get:adImageName]; if (imageName) &#123; NSString *filePath = [self getFilePathWithImageName:imageName]; NSFileManager *fileManager = [NSFileManager defaultManager]; [fileManager removeItemAtPath:filePath error:nil]; &#125;&#125;/** * 根据图片名拼接文件路径 */- (NSString *)getFilePathWithImageName:(NSString *)imageName&#123; if (imageName) &#123; NSArray *paths = NSSearchPathForDirectoriesInDomains(NSCachesDirectory,NSUserDomainMask, YES); NSString *filePath = [[paths objectAtIndex:0] stringByAppendingPathComponent:imageName]; return filePath; &#125; return nil;&#125; 广告页面（uiView） 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133startAd.m#import &quot;startAd.h&quot;@interface startAd()@property (nonatomic, strong) UIImageView *adView;@property (nonatomic, strong) UIButton *countBtn;@property (nonatomic, strong) NSTimer *countTimer;@property (nonatomic, assign) int count;@end@implementation startAd- (NSTimer *)countTimer&#123; if (!_countTimer) &#123; _countTimer = [NSTimer scheduledTimerWithTimeInterval:1.0 target:self selector:@selector(countDown) userInfo:nil repeats:YES]; &#125; return _countTimer;&#125;- (instancetype)initWithFrame:(CGRect)frame&#123; if (self = [super initWithFrame:frame]) &#123; // 1.广告图片 _adView = [[UIImageView alloc] initWithFrame:frame]; _adView.userInteractionEnabled = YES; _adView.image = [UIImage imageWithContentsOfFile:_filePath]; _adView.contentMode = UIViewContentModeScaleAspectFill; _adView.clipsToBounds = YES; if(![[DXSave Get:@&quot;adImageUrl&quot;] isEqualToString:@&quot;&quot;])&#123; UITapGestureRecognizer *tap = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(pushToAd)]; [_adView addGestureRecognizer:tap]; &#125; // 2.跳过按钮 CGFloat btnW = 60; CGFloat btnH = 30; _countBtn = [[UIButton alloc] initWithFrame:CGRectMake(SCREEN_WIDTH - btnW - 24, btnH, btnW, btnH)]; [_countBtn addTarget:self action:@selector(dismiss) forControlEvents:UIControlEventTouchUpInside]; [_countBtn setTitle:[NSString stringWithFormat:@&quot;跳过%d&quot;, [[DXSave Get:@&quot;showTime&quot;] intValue]] forState:UIControlStateNormal]; _countBtn.titleLabel.font = [UIFont systemFontOfSize:15]; [_countBtn setTitleColor:[UIColor whiteColor] forState:UIControlStateNormal]; _countBtn.backgroundColor = [UIColor colorWithRed:38 /255.0 green:38 /255.0 blue:38 /255.0 alpha:0.6]; _countBtn.layer.cornerRadius = 4; [self addSubview:_adView]; [self addSubview:_countBtn]; &#125; return self;&#125;- (void)setFilePath:(NSString *)filePath&#123; _filePath = filePath; _adView.image = [UIImage imageWithContentsOfFile:filePath];&#125;- (void)pushToAd&#123; [self dismiss]; [[NSNotificationCenter defaultCenter] postNotificationName:@&quot;pushtoad&quot; object:nil userInfo:nil];&#125;- (void)countDown&#123; _count --; [_countBtn setTitle:[NSString stringWithFormat:@&quot;跳过%d&quot;,_count] forState:UIControlStateNormal]; if (_count == 0) &#123; [self dismiss]; &#125;&#125;- (void)show&#123; // 倒计时方法：定时器 [self startTimer]; UIWindow *window = [UIApplication sharedApplication].keyWindow; [window addSubview:self];&#125;// 定时器倒计时- (void)startTimer&#123; _count = [[DXSave Get:@&quot;showTime&quot;] intValue]; [[NSRunLoop mainRunLoop] addTimer:self.countTimer forMode:NSRunLoopCommonModes];&#125;// GCD倒计时- (void)startCoundown&#123; __block int timeout = [[DXSave Get:@&quot;showTime&quot;] intValue] + 1; //倒计时时间 + 1 dispatch_queue_t queue = dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0); dispatch_source_t _timer = dispatch_source_create(DISPATCH_SOURCE_TYPE_TIMER, 0, 0,queue); dispatch_source_set_timer(_timer,dispatch_walltime(NULL, 0),1.0 * NSEC_PER_SEC, 0); //每秒执行 dispatch_source_set_event_handler(_timer, ^&#123; if(timeout &lt;= 0)&#123; //倒计时结束，关闭 dispatch_source_cancel(_timer); dispatch_async(dispatch_get_main_queue(), ^&#123; [self dismiss]; &#125;); &#125;else&#123; dispatch_async(dispatch_get_main_queue(), ^&#123; [_countBtn setTitle:[NSString stringWithFormat:@&quot;跳过%d&quot;,timeout] forState:UIControlStateNormal]; &#125;); timeout--; &#125; &#125;); dispatch_resume(_timer);&#125;// 移除广告页面- (void)dismiss&#123; [self.countTimer invalidate]; self.countTimer = nil; [UIView animateWithDuration:0.3f animations:^&#123; self.alpha = 0.f; &#125; completion:^(BOOL finished) &#123; [self removeFromSuperview]; &#125;]; &#125;@end 12345678910111213141516startAd.h#import &lt;UIKit/UIKit.h&gt;#define kUserDefaults [NSUserDefaults standardUserDefaults]static NSString *const adImageName = @&quot;adImageName&quot;;static NSString *const adImageUrl = @&quot;adImageUrl&quot;;static NSString *const adUrl = @&quot;adUrl&quot;;@interface startAd : UIView/** 显示广告页面方法*/- (void)show;/** 图片路径*/@property (nonatomic, copy) NSString *filePath;@end 最后首页加跳转链接 123456789- (void)viewDidLoad &#123; [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(pushToAd) name:@&quot;pushtoad&quot; object:nil];&#125;- (void)pushToAd &#123; loadUrlViewController *adVc = [[loadUrlViewController alloc] init]; adVc.currentRoute = [DXSave Get:@&quot;adImageUrl&quot;]; [self.navigationController pushViewController:adVc animated:YES];&#125;]]></content>
      <tags>
        <tag>oc</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[js-版本判断]]></title>
    <url>%2Fposts%2F2018-10-27-js-version-judgment.html</url>
    <content type="text"><![CDATA[123456789101112131415161718versionCompare = function(left, right) &#123; if (typeof left + typeof right != 'stringstring') return false; var a = left.split('.') , b = right.split('.') , i = 0, len = Math.max(a.length, b.length); for (; i &lt; len; i++) &#123; if ((a[i] &amp;&amp; !b[i] &amp;&amp; parseInt(a[i]) &gt; 0) || (parseInt(a[i]) &gt; parseInt(b[i]))) &#123; return 1; &#125; else if ((b[i] &amp;&amp; !a[i] &amp;&amp; parseInt(b[i]) &gt; 0) || (parseInt(a[i]) &lt; parseInt(b[i]))) &#123; return -1; &#125; &#125; return 0;&#125;]]></content>
      <tags>
        <tag>js</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[js-监听弹窗弹出]]></title>
    <url>%2Fposts%2F2018-10-23-js-monitoring-pop-up-window.html</url>
    <content type="text"><![CDATA[12345678$('#code').on('shown.bs.modal', function (e) &#123; // do something...&#125;)$(window).on('hidden.bs.modal', function() &#123; $('#code').modal('hide'); alert('hidden');&#125;); ps: 想监听全部 将selector 变成$(‘.modal’)就可以了]]></content>
      <tags>
        <tag>js</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[js-阻止input 按enter键提交表单]]></title>
    <url>%2Fposts%2F2018-10-17-js-prevent-input-from-pressing-the-enter-key-to-submit-the-form.html</url>
    <content type="text"><![CDATA[1&lt;input onkeydown=&quot;if(event.keyCode==13)&#123;return false;&#125;&quot; type=&quot;text&quot; name=&quot;email[to]&quot; id=&quot;email_to&quot;&gt;]]></content>
      <tags>
        <tag>js</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[regex-email address]]></title>
    <url>%2Fposts%2F2018-10-15-regex-email-address.html</url>
    <content type="text"><![CDATA[基于RFC5322 的email合法判断 /(?:[a-z0-9!#$%&amp;’+/=?^_`{|}~-]+(?:.[a-z0-9!#$%&amp;’+/=?^_`{|}~-]+)|”(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21\x23-\x5b\x5d-\x7f]|\[\x01-\x09\x0b\x0c\x0e-\x7f])“)@(?:(?:a-z0-9?.)+a-z0-9?|[(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?).){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?|[a-z0-9-]*[a-z0-9]:(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21-\x5a\x53-\x7f]|\[\x01-\x09\x0b\x0c\x0e-\x7f])+)])/ 参考1]]></content>
      <tags>
        <tag>regex</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ios-获取wkwebview里的cookie]]></title>
    <url>%2Fposts%2F2018-10-15-regex-email-address.html</url>
    <content type="text"><![CDATA[12345678910if (@available(iOS 11.0, *)) &#123; //available on iOS 11+ WKHTTPCookieStore *cookieStore = webView.configuration.websiteDataStore.httpCookieStore; [cookieStore getAllCookies:^(NSArray* cookies) &#123; if (cookies.count &gt; 0) &#123; for (NSHTTPCookie *cookie in cookies) &#123; //TODO... &#125; &#125; &#125;];&#125;]]></content>
      <tags>
        <tag>oc</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ios-字符串进阶]]></title>
    <url>%2Fposts%2F2018-09-20-ios-string-advanced.html</url>
    <content type="text"><![CDATA[NSString *a = @”8e0c2412021270fb_gr_session_id=3bb8f9ed-0203-42e4-b25c-98e49206ec0e; 8e0c2412021270fb_gr_session_id_3bb8f9ed-0203-42e4-b25c-98e49206ec0e=true; _ResumeHack_session=am4rQW5SdldaQlQ5eHVpZ1dvWWx3ZE9Yc201WFlTLzBOVUdNMitsYU42UjJIUFU1djR4WDJUT0tvN0dUaVhtdFk1b1dkSE9DNEtXdlFHL2tNM3pLeFFPZ1JZMGlXUGwyUDhkUUVEUythcWoweThGTzBRWVNucDZVVUR4RXNyQVhxY0t2QXRBaEhHWDl6SEdyaGNwMHZJRjlJeVVGcWIwZlRCMWRvMStwNDJMeDIxaDl5bTJKN0NYMWQ0ejdlSlFSTHVUMU4zeEEzbmRXQUNyZGE0V2xyMVlKNzdWeXVqM0VIUmF1TmlybXRoUnNkVFhWNGxiVDNlOWVDYTRQeVFLdC0tVXlETG1xTjcvd25RVmlveFV0RHQxdz09–50662a5248ec2615aaf0098440ba6b9f02492971; __profilin=p%3Dt; gr_user_id=aa9e2d55-23c1-485a-bd88-c51f314824e2; grwng_uid=5d7e8aba-8f56-4950-975c-b8c44d85d7fb”; NSString *b = @”_ResumeHack_session”; NSString *c = @&quot;__profilin&quot;; NSString *d = [NSString stringWithFormat:@&quot;%@%@&quot;,[self achieveStringWithRootString:a key:b],[self achieveStringWithRootString:a key:c]]; NSLog(@&quot;-----&gt;%@&quot;,d);} (NSString *)achieveStringWithRootString:(NSString *)rootStringkey:(NSString *)key{ NSRange aRange = [rootString rangeOfString:[NSString stringWithFormat:@”%@=”,key]]; NSString *c = [rootString substringFromIndex:aRange.location]; NSRange bRange = [c rangeOfString:@”;”];//匹配得到的下标 NSString *d = [c substringToIndex:bRange.location + bRange.length]; return d;}]]></content>
      <tags>
        <tag>oc</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[js-字符串不包含]]></title>
    <url>%2Fposts%2F2018-09-15-js-string.html</url>
    <content type="text"><![CDATA[1不包含：Str.indexOf('str') == -1]]></content>
      <tags>
        <tag>js</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[微信小程序-发送消息通知]]></title>
    <url>%2Fposts%2F2018-09-07-wechat-applet-send-message-notification.html</url>
    <content type="text"><![CDATA[1.get access token 123res = RestClient.get &apos;https://api.weixin.qq.com/cgi-bin/token?grant_type=client_credential&amp;appid=&apos;+app_id + &apos;&amp;secret=&apos; + app_secretjson = JSON.parse res.bodyaccess_token = json[&apos;access_token&apos;] > 2.template 123456789101112131415161718192021&#123; &quot;touser&quot;: &quot;OPENID&quot;, &quot;template_id&quot;: &quot;TEMPLATE_ID&quot;, &quot;page&quot;: &quot;index&quot;, &quot;form_id&quot;: &quot;FORMID&quot;, &quot;data&quot;: &#123; &quot;keyword1&quot;: &#123; &quot;value&quot;: &quot;339208499&quot; &#125;, &quot;keyword2&quot;: &#123; &quot;value&quot;: &quot;2015年01月05日 12:30&quot; &#125;, &quot;keyword3&quot;: &#123; &quot;value&quot;: &quot;粤海喜来登酒店&quot; &#125; , &quot;keyword4&quot;: &#123; &quot;value&quot;: &quot;广州市天河区天河路208号&quot; &#125; &#125;, &quot;emphasis_keyword&quot;: &quot;keyword1.DATA&quot;&#125; 3.send 1res= RestClient.post &apos;https://api.weixin.qq.com/cgi-bin/message/wxopen/template/send?access_token=&apos; + access_token, temp.to_json, &#123;content_type: :json, accept: :json&#125;]]></content>
      <tags>
        <tag>wechat</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[rails-性能测试]]></title>
    <url>%2Fposts%2F2018-09-07-rails-performance-test.html</url>
    <content type="text"><![CDATA[https://ruby-doc.org/stdlib-1.9.3/libdoc/benchmark/rdoc/Benchmark.html 在数据量较大的时候我们可能需要测试跑一个程序所需要的时间 这个时候就可以用benchmark Benchmark.realtime{ xxxxx}]]></content>
      <tags>
        <tag>ruby</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ios-wkwebview 加载进度条]]></title>
    <url>%2Fposts%2F2018-08-24-ios-wkwebview-load-progress-bar.html</url>
    <content type="text"><![CDATA[interface里 12@property (weak, nonatomic) CALayer *progresslayer;@property WKWebView* webview; 在viewDidLoad里面 12345678910[_webview addObserver:self forKeyPath:@&quot;estimatedProgress&quot; options:NSKeyValueObservingOptionNew context:nil]; UIView *progress = [[UIView alloc]initWithFrame:CGRectMake(0, 64, CGRectGetWidth(self.view.frame), 3)]; progress.backgroundColor = [UIColor clearColor]; [self.view addSubview:progress]; CALayer *layer = [CALayer layer]; layer.frame = CGRectMake(0, 0, 0, 3); layer.backgroundColor = [UIColor blueColor].CGColor; [progress.layer addSublayer:layer]; self.progresslayer = layer; 1234567891011121314151617181920- (void)observeValueForKeyPath:(NSString *)keyPath ofObject:(id)object change:(NSDictionary&lt;NSString *,id&gt; *)change context:(void *)context&#123; if ([keyPath isEqualToString:@&quot;estimatedProgress&quot;]) &#123; self.progresslayer.opacity = 1; //不要让进度条倒着走...有时候goback会出现这种情况 if ([change[@&quot;new&quot;] floatValue] &lt; [change[@&quot;old&quot;] floatValue]) &#123; return; &#125; self.progresslayer.frame = CGRectMake(0, 0, self.view.bounds.size.width * [change[@&quot;new&quot;] floatValue], 3); if ([change[@&quot;new&quot;] floatValue] == 1) &#123; dispatch_after(dispatch_time(DISPATCH_TIME_NOW, (int64_t)(.4 * NSEC_PER_SEC)), dispatch_get_main_queue(), ^&#123; self.progresslayer.opacity = 0; &#125;); dispatch_after(dispatch_time(DISPATCH_TIME_NOW, (int64_t)(.5 * NSEC_PER_SEC)), dispatch_get_main_queue(), ^&#123; self.progresslayer.frame = CGRectMake(0, 0, 0, 3); &#125;); &#125; &#125;else&#123; [super observeValueForKeyPath:keyPath ofObject:object change:change context:context]; &#125;&#125; 最后取消监听 123- (void)dealloc&#123; [self.webview removeObserver:self forKeyPath:@&quot;estimatedProgress&quot;];&#125;]]></content>
      <tags>
        <tag>oc</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ios-获取url connection error]]></title>
    <url>%2Fposts%2F2018-08-24-ios-get-url-connection-error.html</url>
    <content type="text"><![CDATA[12345678- (void)webView:(WKWebView *)webView didFailProvisionalNavigation:(WKNavigation *)navigation withError:(NSError *)error&#123; NSLog(@&quot;connection didFailWithError&quot;); if(error.code==-1009)&#123; do something... &#125;&#125;]]></content>
      <tags>
        <tag>oc</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ios-微信分享的坑]]></title>
    <url>%2Fposts%2F2018-08-24-ios-the-pit-of-the-micro-letter-sharing.html</url>
    <content type="text"><![CDATA[1.微信小程序分享图片不能超过32k 否则分享不出去2.微信小程序分享图片必须是nsdata格式 12NSString *filePath = [[NSBundle mainBundle] pathForResource:@&quot;shareMiniprogram&quot; ofType:@&quot;png&quot;];NSData *image = [NSData dataWithContentsOfFile:filePath]; 所以一定要这么取 ps：有时候图片拖进项目里会找不到图片这个时候需要选中图片之后选择菜单中的Source Control —&gt; add selected files 就加进去了]]></content>
      <tags>
        <tag>wecaht</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[rails - 单表继承（STI）]]></title>
    <url>%2Fposts%2F2018-08-21-rails-tanku-integration-sti.html</url>
    <content type="text"><![CDATA[单表继承一般用于大部分字段相同只有少部分字段不同的情况用type字段可以将他们区分开 会自动存储modle: 12345class WorkNameCard &lt; NameCard endclass StudentNameCard &lt; NameCard end 优点：可以直接调用不同子类下的方法 如果子类不需要单独的方法可以不使用 STI]]></content>
      <tags>
        <tag>ruby</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[rails- float取整]]></title>
    <url>%2Fposts%2F2018-08-16-rails-float-rounding.html</url>
    <content type="text"><![CDATA[ceil()方法表示向上取整，Math.ceil(4.3)的结果是5，Math.ceil(-9.8)的结果-9； floor()方法表示向下取整，Math.floor(4.3)的结果是4，Math.floor(-9.8)的结果-10； round()方法表示“四舍五入”，Math.round(4.3)的结果是4，Math.round(-9.8)的结果-10； ps: 除法想取整需要是float去除 整数除完只会返回整数]]></content>
      <tags>
        <tag>ruby</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[bootstrap-取消dropdown 点击消失]]></title>
    <url>%2Fposts%2F2018-08-14-bootstrap-cancel-dropdown-click-hour.html</url>
    <content type="text"><![CDATA[解决办法第一步在dropdown-menu中的需要处理的元素添加 data-stopPropagation=”true”，data-stopPropagation属性是用来对点击时停止传播事件，这样我们的点击事件就不会传播给Bootstrap.js中去了。 第二步调用Bootstrap的stopPropagation()函数，可以阻止元素点击时停止传播事件。我在我的代码中写的比较粗暴，对整个treeview声明一个click事件，并且全部绑定上stopPropagation()方法。 $(“.treeview”).on(“click”,function (e) { e.stopPropagation();})]]></content>
      <tags>
        <tag>bootstrap</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[rails - hash 取值变成 a.b]]></title>
    <url>%2Fposts%2F2018-08-13-rails-hash-the-value-into.html</url>
    <content type="text"><![CDATA[auth = ActiveSupport::InheritableOptions.new(provider: ‘open’, info:ActiveSupport::InheritableOptions.new(nickname:’lslls’))]]></content>
      <tags>
        <tag>ruby</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[js-拖拽出现按钮]]></title>
    <url>%2Fposts%2Fundefined.html</url>
    <content type="text"><![CDATA[window.addEventListener(‘load’, function() { var initX; //触摸位置 var moveX; //滑动时的位置 var X = 0; //移动距离 var objX = 0; //目标对象位置 window.addEventListener(‘touchstart’, function(event) { var obj = event.target.closest(‘.list-li’); if (obj != undefined) { initX = event.targetTouches[0].pageX; objX = (obj.style.WebkitTransform.replace(/translateX(/g, “”).replace(/px)/g, “”)) * 1; $(‘.list-li’).css(‘transform’, ‘translateX(0px)’) } if (objX == 0) { window.addEventListener(‘touchmove’, function(event) { var obj = event.target.closest(‘.list-li’); if (obj != undefined) { moveX = event.targetTouches[0].pageX; X = moveX - initX; if (X &gt;= 0) { obj.style.WebkitTransform = “translateX(“ + 0 + “px)”; } else if (X &lt; 0) { var l = Math.abs(X); obj.style.WebkitTransform = “translateX(“ + -l + “px)”; if (l &gt; 80) { l = 80; obj.style.WebkitTransform = “translateX(“ + -l + “px)”; } } } }); } else if (objX &lt; 0) { window.addEventListener(‘touchmove’, function(event) { var obj = event.target.closest(‘.list-li’); if (obj != undefined) { moveX = event.targetTouches[0].pageX; X = moveX - initX; if (X &gt;= 0) { var r = -80 + Math.abs(X); obj.style.WebkitTransform = “translateX(“ + r + “px)”; if (r &gt; 0) { r = 0; obj.style.WebkitTransform = “translateX(“ + r + “px)”; } } else { //向左滑动 obj.style.WebkitTransform = “translateX(“ + -80 + “px)”; } } }); } }) window.addEventListener(‘touchend’, function(event) { var obj = event.target.closest(‘.list-li’); if (obj != undefined) { objX = (obj.style.WebkitTransform.replace(/translateX(/g, “”).replace(/px)/g, “”)) * 1; if (objX &gt; -40) { obj.style.WebkitTransform = “translateX(“ + 0 + “px)”; objX = 0; } else { obj.style.WebkitTransform = “translateX(“ + -80 + “px)”; objX = -80; } } })}) css: .list-ul { overflow: hidden*text 一定要有 } .list-li { line-height: 60px; border-bottom: 1px solid #fcfcfc; position: relative; padding: 0 12px; color: #666; background: #f2f2f2; -webkit-transform: translateX(0px); } .btn { position: absolute; top: 0; right: -80px; text-align: center; background: #ffcb20; color: #fff; width: 80px }]]></content>
  </entry>
  <entry>
    <title><![CDATA[js-toggle animate]]></title>
    <url>%2Fposts%2Fundefined.html</url>
    <content type="text"><![CDATA[1、show()显示效果 语法：show(speed,callback) Number/String,Function speend为动画执行时间，单位为毫秒。也可以为slow”,”normal”,”fast” callback可选,为当动画完成时执行的函数。 show(speed,[easing],callback) Number/String easing默认是swing,可选linear; $(“#div1”).show(3000,function(){ alert(“动画显示完成!”); }); 2、hide()隐藏效果 语法:hide(speed,callback) Number/String,Function hide(speed,easing,callback) Number/String $(“#div1”).hide(3000,function(){ alert(“动画隐藏完成”) });3、toggle()隐藏显示自动切换，当目前为显示则隐藏，当目前为隐藏则显示 语法：toggle(speed,callback) Number/String,Function toggle(speed,callback) Number/String,String,Function $(“#div1”).toggle(3000,function(){ alert(“动画效果切换完成”) }); 4、slideDown()向下显示，slow()是水平与垂直方向同时展开，而slideDown是仅仅在垂直方向向下展开 语法:slideDown(speed,callback) Number/String,Function slideDown(speed,[easing],callback) Number/String,Function $(“#div1”).slideDown(3000,function(){ alert(“向下展开显示成功!”); });5、slideUp()向上隐藏, hide()是水平与垂直两个方向的，而slideUp()仅仅是垂直方向向上收起隐藏 语法:slideUp(speed,callback) Number/String,Function slideUp(speed,[easing],callback) Number/String,String,Function $(“#div1”).slideUp(3000,function(){ alert(“向上收起隐藏成功!”); })6、slideToggle垂直方向上切换,toggle是水平与垂直两个方向上的，而slideToggle是仅仅垂直方向的。 语法:slideToggle(speed,callback) Number/String,Function slideToggle(speed,[easing],callback) Number/String,String,Function $(“#div1”).slideToggle(3000,function(){ alert(“水平方向上切换成功”); }); 7、fadeIn() 以改变透明度来显示 语法：fadeIn(speed,callback) Number/String,Function fadeIn(speed,[easing],callback) Number/String,Function $(“#div1”).FadeIn(3000,function(){ alert(“淡入显示成功!”); });8、fadeOut() 以改变透明度来隐藏 语法：fadeOut(speed,callback) Number/String,Function fadeOut(speed,[easing],callcack) Number/String,String,Function $(“#div1”).fadeOut(3000,function(){ alert(“淡出隐藏成功!”); });9、fadeToggle() 以改变透明度来切换显示隐藏状态 语法: fadeToggle(speed,callback) Number/String,Function fadeToggle(speed,[easing],callback) Number/String,Function $(“#div1”).fadeToggle(3000,function(){ alert(“淡入淡出切换成功!”); });10、fadeTo() 由指定的时间将透明度改变到指定的透明度 语法：fadeTo(speed,callback) Number/String,Function fadeTo([speed],opacity,[easing],[fn]) Number/String,Float,String,Function $(“#div1”).fadeTo(3000,0.22,function(){ alert(“透明度改变成功!”); });11、animate() 自定义动画，一般来说数字变动都可以用于动画。 语法：animate(params,speed,easing,callback); 样式参数，时间，可选择，函数 $(“#div1”).animate({ width:300px,height,300px },3000); 其中params要用中括号括起来，可以使用的css样式参数。注意要采用骆驼法则，如font-size要写成fontSize。颜色渐变不支持。 backgroundPositionborderWidthborderBottomWidthborderLeftWidthborderRightWidthborderTopWidthborderSpacingmarginmarginBottommarginLeftmarginRightmarginTopoutlineWidthpaddingpaddingBottompaddingLeftpaddingRightpaddingTopheightwidthmaxHeightmaxWidthminHeightmaxWidthfontfontSizebottomleftrighttopletterSpacingwordSpacinglineHeighttextIndent12、stop() 停止正在执行动画 stop([clearQueue],[gotoEnd]); 两个参数均为布尔值，第一个表示，是否停止动画执行、第二个表示，如果停止，是否立即变为执行完成的状态，如果设置为否，则停留在执行一半的状态。 $(“#div1”).hide(5000) //此动画正在执行 $(“#div1”).stop(); //上一行代码指定的动画停止在一半状态 $(“#div1”).stop(true,true); //停止当前动画，同时动画切换到完成执行状态。13、delay() 延迟执行动画 当一个动画stop()了之后还能够用delay()来延迟执行。从停止位置继续执行。当然用原来的方法继续执行也不可，不过没有延时效果。 delay(duration,[queueName]) 设置一个延迟值来执行动画 Integer,String $(“#div1”).delay(3000).hide(3000); //表示在3000毫秒后执行hide(3000);14、jQuery.fx.off //该属性只是是否关闭当前页面上的动画,关闭动画之后，没有动画效果，所有设置了执行时间的动画会瞬间完成。注意此属性出现的位置。出现的位置不同影响的范围也不同。 $(function(){ jQuery.fx.off = true; //属性在事件外面，对页面加载后执行的所有动画有效 $(“#div1”).click(function(){ //属性如果写在这里，仅仅对当前点击事件无效，不影响其他事件的动画 $(“#div1”).hide(3000); //注意由于jQuery.fx.off设置为了true,因此3000毫秒失效，相当于hide(); }); })15、jQuery.fx.interval //该属性设置动画的帧速，单位是毫秒，如果设置的时间越小，就越平滑。，属性出现的位置同样有影响范围 $(function(){ jQuery.fx.interval = 1000; $(“#div1”).click(function(){ $(“#div1”).hide(3000); //jQuery.fx.interval设置为1000，也就是1秒钟，改变一次效果。 }); })]]></content>
  </entry>
  <entry>
    <title><![CDATA[css-bootstrap dropdown menu 多层级]]></title>
    <url>%2Fposts%2Fundefined.html</url>
    <content type="text"><![CDATA[Bootstrap 实例 - 工具提示（Tooltip）插件 .dropdown-submenu { position:relative; } .dropdown-submenu>.dropdown-menu { top:0; left:100%; margin-top:-6px; margin-left:-1px; -webkit-border-radius:0 6px 6px 6px; -moz-border-radius:0 6px 6px 6px; border-radius:0 6px 6px 6px; } .dropdown-submenu:hover>.dropdown-menu { display:block; } .dropdown-submenu>a:after { display:block; content:" "; float:right; width:0; height:0; border-color:transparent; border-style:solid; border-width:5px 0 5px 5px; border-left-color:#cccccc; margin-top:5px; margin-right:-10px; } .dropdown-submenu:hover>a:after { border-left-color:#ffffff; } .dropdown-submenu.pull-left { float:none; } .dropdown-submenu.pull-left>.dropdown-menu { left:-100%; margin-left:10px; -webkit-border-radius:6px 0 6px 6px; -moz-border-radius:6px 0 6px 6px; border-radius:6px 0 6px 6px; } Toggle navigation Drop Down Level 1 Link 1 Level 2 Link 3]]></content>
  </entry>
  <entry>
    <title><![CDATA[git-stash]]></title>
    <url>%2Fposts%2Fundefined.html</url>
    <content type="text"><![CDATA[git stash save git stash show git stash drop git stash pop git stash apply git stash list –date=short]]></content>
  </entry>
  <entry>
    <title><![CDATA[css-loading]]></title>
    <url>%2Fposts%2Fundefined.html</url>
    <content type="text"><![CDATA[.loading{ width: 150px; height: 15px; margin: 0 auto; margin-top:100px; } .loading span{ display: inline-block; width: 15px; height: 100%; margin-right: 5px; border-radius: 50%; background: lightgreen; -webkit-animation: load 1.04s ease infinite; } .loading span:last-child{ margin-right: 0px; } @-webkit-keyframes load{ 0%{ opacity: 1; } 100%{ opacity: 0; } } .loading span:nth-child(1){ -webkit-animation-delay:0.13s; } .loading span:nth-child(2){ -webkit-animation-delay:0.26s; } .loading span:nth-child(3){ -webkit-animation-delay:0.39s; } .loading span:nth-child(4){ -webkit-animation-delay:0.52s; } .loading span:nth-child(5){ -webkit-animation-delay:0.65s; } 效果：。。。。。轮着动]]></content>
  </entry>
  <entry>
    <title><![CDATA[ios-页面上添加图片]]></title>
    <url>%2Fposts%2Fundefined.html</url>
    <content type="text"><![CDATA[UIImage *image = [UIImage imageNamed:@”introduce”]; UIImageView *imageView = [[UIImageView alloc]initWithFrame:CGRectMake(0, 0, 320, image.size.height)]; imageView.contentMode = UIViewContentModeScaleAspectFit; imageView.backgroundColor = [UIColor greenColor]; imageView.image = image; imageView.center = self.view.center; // 让图片在中间位置显示 这个会导致上面的frame位置失效 [self.view addSubview:imageView]; 添加fuction: UITapGestureRecognizer *singleTap = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(refreshRootController)]; singleTap.numberOfTapsRequired = 1; [imageView1 setUserInteractionEnabled:YES]; [imageView1 addGestureRecognizer:singleTap];]]></content>
  </entry>
  <entry>
    <title><![CDATA[ios-引入第三方framework file not found]]></title>
    <url>%2Fposts%2Fundefined.html</url>
    <content type="text"><![CDATA[今天在xcode接入领英登录的功能时，发现了无法找到头文件的问题，明明已经将framework导入到项目中了。这里写图片描述在网上查询相关资料后对xcode 引用frameword的认识有了更近一步的认识。 引用而来的第三方framework其路径仍然是属于项目外部的，而Building Setting 中Framework Search Paths默认是如下配置——只有内部framework能被找到这里写图片描述 于是接下来的目的便明确了，让项目能够找到外部的framework。 解决办法将第三方framework复制放入项目中 在xcode 中 右键文件夹使用 add file to xxx 将 Frameworks文件夹导入到项目中。 xcode会自动在Framework Search Paths 中生成你所存放 framework的路径。 这样，framework里的头文件便能够被找到了。]]></content>
  </entry>
  <entry>
    <title><![CDATA[css-圆角三角形]]></title>
    <url>%2Fposts%2Fundefined.html</url>
    <content type="text"><![CDATA[div{ width: 0; height: 0; transform: rotate(45deg); border-width: 20px; border-color: #000 transparent transparent #000; border-style: solid; border-top-left-radius: 10px;}]]></content>
  </entry>
  <entry>
    <title><![CDATA[css- input placeholder 居中]]></title>
    <url>%2Fposts%2Fundefined.html</url>
    <content type="text"><![CDATA[input::input-placeholder {text-align: center; }input::-ms-input-placeholder{text-align: center;}input::-webkit-input-placeholder{text-align: center;}]]></content>
  </entry>
  <entry>
    <title><![CDATA[js-获取element 准确高度 不四舍五入]]></title>
    <url>%2Fposts%2Fundefined.html</url>
    <content type="text"><![CDATA[document.getElementById(‘divMMHeight’).getBoundingClientRect().height]]></content>
  </entry>
  <entry>
    <title><![CDATA[android -判断小程序环境失效]]></title>
    <url>%2Fposts%2Fundefined.html</url>
    <content type="text"><![CDATA[在wx.ready(function () {})里面的判断才有效]]></content>
  </entry>
  <entry>
    <title><![CDATA[ruby- csv utf-8 转 gbk有问题]]></title>
    <url>%2Fposts%2Fundefined.html</url>
    <content type="text"><![CDATA[require ‘csv’file_path = “/Users/zhangshuo/Downloads/#{Time.now}-user-email.csv” CSV.open(file_path, ‘w’) do |writer| writer &lt;&lt; [“\xEF\xBB\xBF”] User.find_each do |u| writer &lt;&lt; [u.email] unless u.fake_email? endend]]></content>
  </entry>
  <entry>
    <title><![CDATA[ios-mobile li click not work]]></title>
    <url>%2Fposts%2Fundefined.html</url>
    <content type="text"><![CDATA[.liClass { cursor : pointer; }]]></content>
  </entry>
  <entry>
    <title><![CDATA[js-i18n js]]></title>
    <url>%2Fposts%2Fundefined.html</url>
    <content type="text"><![CDATA[官网简单使用说明 1.gem “i18n-js”, “&gt;= 3.0.0.rc11”2.rails generate i18n:js:config会生成config/i18n-js.yml文件 12translations: - file: &quot;public/javascripts/%&#123;locale&#125;.js&quot; 3.rake i18n:js:export 添加新的文字之后都要跑rake i18n:js:export才会生效]]></content>
  </entry>
  <entry>
    <title><![CDATA[移动端-overflow hidden 失效]]></title>
    <url>%2Fposts%2Fundefined.html</url>
    <content type="text"><![CDATA[在body里面多加一层控制$(‘.container’).css(‘overflow’, ‘hidden’)$(‘.container’).css(‘position’, ‘fixed’) ps:1. position 得是fixed overflow-x/overflow-y 不行]]></content>
  </entry>
  <entry>
    <title><![CDATA[ios-延迟执行方法]]></title>
    <url>%2Fposts%2Fundefined.html</url>
    <content type="text"><![CDATA[[NSTimer scheduledTimerWithTimeInterval:2.0 target:self selector:@selector(initData) userInfo:nil repeats:NO]; ps:如果想传参数给init data的话参数要从userInfo里面传 eg: 12345678910 NSTimer* timer = [NSTimer scheduledTimerWithTimeInterval:2.0 target:self selector:@selector(handleTimer:) userInfo:@&quot;someString&quot; repeats:NO];- (void)handleTimer:(NSTimer*)theTimer &#123; NSLog (@&quot;Got the string: %@&quot;, (NSString*)[theTimer userInfo]);&#125;]]></content>
  </entry>
  <entry>
    <title><![CDATA[安卓- android studio 配置真机调试]]></title>
    <url>%2Fposts%2Fundefined.html</url>
    <content type="text"><![CDATA[对于Android studio而言，默认的adb路径为：~/Library/Android/sdk/platform-tools vim /.bash_profileexport PATH=/Library/Android/sdk/platform-tools/:$PATH 在终端输入source .bash_profile然后输入adb不提示“command not found”，而是出现一长串帮助说明，那就证明adb已经配置好了。 1、确保连接线没问题，连接好后。查看usb设备信息，终端输入命令 system_profiler SPUSBDataType Vendor ID需要记下来一会用 2、终端输入以下命令，打开 adb_usb.ini 文件 vim ~/.android/adb_usb.ini将vendor id 写进去 4、保存修改并退出。 5、重启adb，输入以下命令 adb kill-serveradb start-server]]></content>
  </entry>
  <entry>
    <title><![CDATA[ios-修改userAgent]]></title>
    <url>%2Fposts%2Fundefined.html</url>
    <content type="text"><![CDATA[方案一，修改全局UserAgent值（这里是在原有基础上拼接自定义的字符串） 1234567- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions &#123; UIWebView *webView = [[UIWebView alloc] initWithFrame:CGRectZero]; NSString *userAgent = [webView stringByEvaluatingJavaScriptFromString:@&quot;navigator.userAgent&quot;]; NSString *newUserAgent = [userAgent stringByAppendingString:@&quot; native_iOS&quot;];//自定义需要拼接的字符串 NSDictionary *dictionary = [NSDictionary dictionaryWithObjectsAndKeys:newUserAgent, @&quot;UserAgent&quot;, nil]; [[NSUserDefaults standardUserDefaults] registerDefaults:dictionary];&#125; 方案二，自定义UserAgent值 123456789WKWebView *wkWebView = [[WKWebView alloc] initWithFrame:self.view.bounds];[self.view addSubview: wkWebView];NSString *customUserAgent = @&quot;native_iOS&quot;;[[NSUserDefaults standardUserDefaults] registerDefaults:@&#123;@&quot;UserAgent&quot;:customUserAgent&#125;];NSURL *url = [NSURL URLWithString:self.strUrl];NSURLRequest *request = [NSURLRequest requestWithURL:url cachePolicy:NSURLRequestUseProtocolCachePolicy timeoutInterval:10.f];[self.wkWebView loadRequest:request]; 方案三 123456789101112self.wkWebView = [[WKWebView alloc] initWithFrame:self.view.bounds];__weak typeof(self) weakSelf = self;[self.wkWebView evaluateJavaScript:@&quot;navigator.userAgent&quot; completionHandler:^(id result, NSError *error) &#123; __strong typeof(weakSelf) strongSelf = weakSelf; NSString *userAgent = result; NSString *newUserAgent = [userAgent stringByAppendingString:@&quot; native_iOS&quot;]; NSDictionary *dictionary = [NSDictionary dictionaryWithObjectsAndKeys:newUserAgent, @&quot;UserAgent&quot;, nil]; [[NSUserDefaults standardUserDefaults] registerDefaults:dictionary]; // needs retain because `evaluateJavaScript:` is asynchronous strongSelf.wkWebView = [[WKWebView alloc] initWithFrame:strongSelf.view.bounds]; &#125;]; [self.wkWebView loadRequest:request];]]></content>
  </entry>
  <entry>
    <title><![CDATA[mac-安装安卓环境]]></title>
    <url>%2Fposts%2Fundefined.html</url>
    <content type="text"><![CDATA[下载的文件包括Java、Android Studio。Java下载地址：http://www.oracle.com/technetwork/java/javase/downloads/jdk8-downloads-2133151.html，Android studio的下载可以到google官网下载，也可以到中文社区下载（http://www.android-studio.org/） 要先连vpn]]></content>
  </entry>
  <entry>
    <title><![CDATA[小程序-this.setData undefined]]></title>
    <url>%2Fposts%2Fundefined.html</url>
    <content type="text"><![CDATA[这个是由于this的作用域问题 一般来说 确认存在的方法什么的掉不起来都是因为这个var that=this;用that来调就可以了但是一定要记住！！！这个变量声明一定要写在方法开始，写在任何一个回调里面都不生效]]></content>
  </entry>
  <entry>
    <title><![CDATA[小程序-webview 支付]]></title>
    <url>%2Fposts%2Fundefined.html</url>
    <content type="text"><![CDATA[小程序在webview里面只能调起网页支付 但是小程序又不允许这种支付方式 所以就坑爹了我们只能用点击webview里面按钮跳转到原生小程序页面调起支付小程序js 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273Page(&#123; data: &#123; openid: &apos;&apos;, order_id: &apos;&apos; &#125;, onLoad: function (options) &#123; console.log(&apos;pay&apos;) this.setData(&#123; order_id: options.order_id &#125;) this.getOpenId() &#125;, getOpenId: function () &#123; var that = this; wx.login(&#123; success: function (res) &#123; if (res.code) &#123; //发起网络请求 wx.request(&#123; url: &apos;https://www.wondercv.com/zh-CN/interface/pages/get_wx_mini_open_id&apos;, // url: &apos;http://localhost:3000/zh-CN/interface/pages/get_wx_mini_open_id&apos;, method: &apos;GET&apos;, data: &#123; code: res.code &#125;, success: function (response) &#123; console.log(&apos;get open id =====================&apos; + response.data.open_id) that.setData(&#123; openid: response.data.open_id &#125;); that.getPaymentParams(); &#125;, &#125;) &#125; else &#123; console.log(&apos;获取用户登录态失败！&apos; + res.errMsg) &#125; &#125; &#125;); &#125;, getPaymentParams: function(openId)&#123; wx.request(&#123; url: &apos;https://www.wondercv.com/zh-CN/interface/pages/wechat_mini_information&apos;, // url: &apos;http://localhost:3000/zh-CN/interface/pages/wechat_mini_information&apos;, method: &apos;GET&apos;, data: &#123; open_id: this.data.openid, order_id: this.data.order_id &#125;, success: function (response) &#123; console.log(&apos;get payment params=========================&apos;) console.log(response) wx.requestPayment(&#123; //相关支付参数 &apos;timeStamp&apos;: response.data.timeStamp, &apos;nonceStr&apos;: response.data.nonceStr, &apos;package&apos;: response.data.pre_package, &apos;signType&apos;: response.data.signType, &apos;paySign&apos;: response.data.sign, //小程序微信支付成功的回调通知 &apos;success&apos;: function (res) &#123; console.log(&quot;支付成功&quot;); &#125;, //小程序支付失败的回调通知 &apos;fail&apos;: function (res) &#123; console.log(&quot;支付失败&quot;); console.log(res); &#125; &#125;) &#125;, &#125;) &#125;,&#125;) 获取小程序openid 123456789res = RestClient.get &apos;https://api.weixin.qq.com/sns/jscode2session?appid=&apos; + ENV[&apos;WECHAT_MINIPROGRAM_APP_ID&apos;] + &apos;&amp;secret=&apos; + ENV[&apos;WECHAT_MINIPROGRAM_APP_SECRECT&apos;] + &apos;&amp;js_code=&apos; + params[:code] + &apos;&amp;grant_type=authorization_code&apos; Rails.logger.info(&quot;code=======================#&#123;params[:code]&#125;&quot;) open_id = JSON.parse(res.body)[&apos;openid&apos;] Rails.logger.info(&quot;=======================#&#123;JSON.parse(res.body)&#125;&quot;) render json: &#123; open_id: open_id &#125; 获取小程序需要的支付参数 用wx_pay 就可以，使用方式JSAPIsignType: MD5注意：第二次签名的方法选择的方式不一样 方法也就不一样 r = WxPay::Service.generate_js_pay_req params_for_program]]></content>
  </entry>
  <entry>
    <title><![CDATA[js-touchmove之后不触发touchend]]></title>
    <url>%2Fposts%2Fundefined.html</url>
    <content type="text"><![CDATA[var UL = document.getElementById(‘Ul’);var moves = true;function Alert(ev){ if(moves) alert(ev.target.innerHTML)}UL.addEventListener(‘touchmove’,function(){ moves = false; UL.addEventListener(‘touchend’,function(){ moves = true; })})UL.addEventListener(‘touchend’, Alert) 原理： 设置一个变量moved来标识是否有移动过，初始值为false； 绑定touchend事件，将moved置为true； 绑定touchmove事件，将moved置为false； 在touchmove事件函数中继续绑定touchend事件，再将moved置为true]]></content>
  </entry>
  <entry>
    <title><![CDATA[html-关闭弹窗]]></title>
    <url>%2Fposts%2Fundefined.html</url>
    <content type="text"><![CDATA[data-dismiss= ‘-modal’]]></content>
  </entry>
  <entry>
    <title><![CDATA[小程序-安卓机不显示图片]]></title>
    <url>%2Fposts%2Fundefined.html</url>
    <content type="text"><![CDATA[从img文件夹中引用的图片必须没有空格 不可以用中文 否则安卓机不会显示]]></content>
  </entry>
  <entry>
    <title><![CDATA[file not found: /usr/lib/system/libsystem_darwin.dylib for architecture x86_64]]></title>
    <url>%2Fposts%2Fundefined.html</url>
    <content type="text"><![CDATA[sudo xcode-select -s /Library/Developer/CommandLineTools]]></content>
  </entry>
  <entry>
    <title><![CDATA[css-bootstrap table-stripe reverse]]></title>
    <url>%2Fposts%2F2018-05-27-7774375.html</url>
    <content type="text"><![CDATA[.table-striped &gt; tbody &gt; tr:nth-of-type(odd) {background: #fff !important;}.table-striped &gt; tbody &gt; tr:nth-of-type(even) {background: #f9f9f9 !important;}]]></content>
      <tags>
        <tag>css</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ruby-position 排序]]></title>
    <url>%2Fposts%2F2018-05-27-7774375.html</url>
    <content type="text"><![CDATA[1.gem ‘acts_as_list’ 2.model 1acts_as_list 3.controller 1234567891011up@recruit_info.move_higherdown@recruit_info.move_lower top@recruit_info.move_to_topbottom@recruit_info.move_to_bottom 4.view一般置顶 最末会刷新页面上移 下移用js 12345678910&lt;%= link_to content_tag(:i, &quot;&quot;, class: &quot;fa fa-arrow-up&quot;), &quot;javascript:;&quot;, method: :post, class: &quot;info-up&quot;, data: &#123; id: recruit_info.id, url: up_comp_recruit_info_path(recruit_info), toggle: &quot;popover&quot;, placement: &quot;top&quot;, content: &quot;上移&quot; &#125; %&gt; &lt;%= link_to content_tag(:i, &quot;&quot;, class: &quot;fa fa-arrow-down&quot;), &quot;javascript:;&quot;, method: :post, class: &quot;info-down&quot;, data: &#123; id: recruit_info.id, url: down_comp_recruit_info_path(recruit_info), toggle: &quot;popover&quot;, placement: &quot;top&quot;, content: &quot;下移&quot; &#125; %&gt; &lt;%= link_to content_tag(:i, &quot;&quot;, class: &quot;fa fa-arrow-circle-up&quot;), top_comp_recruit_info_path(recruit_info), method: :post, class: &quot;info-top&quot;, data: &#123; toggle: &quot;popover&quot;, placement: &quot;top&quot;, content: &quot;置顶&quot; &#125; %&gt; &lt;%= link_to content_tag(:i, &quot;&quot;, class: &quot;fa fa-arrow-circle-down&quot;), bottom_comp_recruit_info_path(recruit_info), method: :post, class: &quot;info-bottom&quot;, data: &#123; toggle: &quot;popover&quot;, placement: &quot;top&quot;, content: &quot;最末&quot; &#125; %&gt; | 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051&lt;script type=&quot;text/javascript&quot;&gt; $prevLink = $(&apos;.pagination&apos;).find(&apos;.active&apos;).prev().find(&apos;a&apos;).attr(&apos;href&apos;); $nextLink = $(&apos;.pagination&apos;).find(&apos;.active&apos;).next().find(&apos;a&apos;).attr(&apos;href&apos;); $(&apos;.info-up&apos;).on(&apos;click&apos;, function()&#123; const pageFirst = $(&apos;.recruit-info-item&apos;).first(); $page = $(this).closest(&apos;.recruit-info-item&apos;); $.ajax(&#123; url: $(this).data(&apos;url&apos;), type: &apos;POST&apos;, data: &#123; id: $(this).data(&apos;id&apos;) &#125;, success: function() &#123; if ($page.is(pageFirst)) &#123; if (&lt;%= @recruit_infos.current_page %&gt; === 1) &#123; $.notify(&apos;不可上移！！&apos;,&apos;error&apos;) &#125; else &#123; window.location.href = $prevLink &#125; &#125; else &#123; $page.prev().before($page); &#125; &#125; &#125;); &#125;); $(&apos;.info-down&apos;).on(&apos;click&apos;, function()&#123; const pageLast = $(&apos;.recruit-info-item&apos;).last(); $page = $(this).closest(&apos;.recruit-info-item&apos;); $.ajax(&#123; url: $(this).data(&apos;url&apos;), type: &apos;POST&apos;, data: &#123; id: $(this).data(&apos;id&apos;) &#125;, success: function() &#123; if ($page.is(pageLast)) &#123; if (&lt;%= @recruit_infos.total_pages == @recruit_infos.current_page %&gt;) &#123; $.notify(&apos;不可下移！！&apos;,&apos;error&apos;) &#125; else &#123; window.location.href = $nextLink &#125; &#125; else &#123; $page.next().after($page); &#125; &#125; &#125;); &#125;);&lt;/script&gt; ps: 必须有position字段如果是后加的 在migration文件中需要 123ExampleCv.order(updated_at: :desc).each.with_index(1) do |todo_item, index| todo_item.update_column :position, indexend]]></content>
      <tags>
        <tag>ruby</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[微信小程序-获取小程序二维码]]></title>
    <url>%2Fposts%2Fundefined.html</url>
    <content type="text"><![CDATA[def miniProgramQR res = RestClient.get &apos;https://api.weixin.qq.com/cgi-bin/token?grant_type=client_credential&amp;appid=&apos;+ ENV[&apos;WECHAT_MINIPROGRAM_APP_ID&apos;] + &apos;&amp;secret=&apos; + ENV[&apos;WECHAT_MINIPROGRAM_APP_SECRECT&apos;] json = JSON.parse res.body access_token = json[&apos;access_token&apos;] miniProgram_image = RestClient.post &apos;https://api.weixin.qq.com/wxa/getwxacodeunlimit?access_token=&apos; + access_token, {&apos;page&apos;: &apos;pages/cvShare/cvShare&apos;, &apos;scene&apos;: @cv.token}.to_json, {content_type: :json, accept: :json} image = Base64.encode64 miniProgram_image render json: { image: image } end ps: scene 最大32位 可以用’type:’ + params[:file_type] +’,id:’ + params[:token]这种字符串 然后在小程序中用js分割，不可以用json格式、也不可以用to_s 显示用$(‘.qr-code’).attr(‘src’, “data:image/jpeg;base64,” + data[‘image’])]]></content>
  </entry>
  <entry>
    <title><![CDATA[ruby-ascii-8bit 转image]]></title>
    <url>%2Fposts%2Fundefined.html</url>
    <content type="text"><![CDATA[1.将data转成base64编码 用Base64.encode64 data 2.用data_uri的方法 将base64编码展示出来 “data:image/jpeg;base64,data” data uri scheme]]></content>
  </entry>
  <entry>
    <title><![CDATA[js-data传参键名是变量不能识别]]></title>
    <url>%2Fposts%2F2018-05-23-js-data-pass-value.html</url>
    <content type="text"><![CDATA[const fileData= {};fileData[fileType] = data; ps: 一定要注意 在里面写的时候data: fileData 这么传值！]]></content>
      <tags>
        <tag>js</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[js-判断页面是否加载完成]]></title>
    <url>%2Fposts%2F2018-05-22-7737697.html</url>
    <content type="text"><![CDATA[对于页面来说，dom结构，样式,脚本也属于内容，页面内的图片文字视频音频也是内容。 那么我们常用的 window.onload和 jquery 中的 ready 函数就能判断内容是否全部加载完成吗？答案是否定的。以上两个只能判定页面骨架加载完成了，但是不能判定页面资源是否加载完成，比如页面的超大图片，视频等。还有如果是有异步请求的资源等都无法检测到的，尤其是在 onload 之后发生的请求。 onreadystatechange回调不行，原因：每当有请求发生时 readyState 都会改变并触发 onreadystatechange 如果需要动态处理 dom 那么在 onload|ready 中就可以了，因为此时页面 dom 已经加载完成了。如果你需要对某些异步的请求做监控，则只需要在对应的异步中添加上回调即可。 1234567if(document.readyState == “complete”) //当页面加载状态 window.onload页面(包括资源)准备就绪document.onloadDOM加载完毕]]></content>
      <tags>
        <tag>js</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[微信小程序-iphonx适配]]></title>
    <url>%2Fposts%2F2018-05-22-7731783.html</url>
    <content type="text"><![CDATA[在app.js文件中 创建全局变量，然后获取设备型号 123456789101112131415161718globalData: &#123; isIphoneX: false, userInfo: null &#125;, onShow:function()&#123; let that = this; wx.getSystemInfo(&#123; success: res=&gt;&#123; // console.log(&apos;手机信息res&apos;+res.model) let modelmes = res.model; if (modelmes.search(&apos;iPhone X&apos;) != -1) &#123; that.globalData.isIphoneX = true &#125; &#125; &#125;) &#125;, 在需要引用的页面js文件中onload方法里获取全局变量 1234let isIphoneX = app.globalData.isIphoneX; this.setData(&#123; isIphoneX: isIphoneX &#125;) ps:button 的边框用button::after{ border: none; }来去除]]></content>
      <tags>
        <tag>wechat</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[redis-数据缓存]]></title>
    <url>%2Fposts%2F2018-05-17-7693318.html</url>
    <content type="text"><![CDATA[gem ‘redis-namespace’bundle新建文件 config/initializers/redis.rb 1$redis = Redis::Namespace.new(&quot;site_point&quot;, :redis =&gt; Redis.new) 存 $redis.set(“test_key”, “Hello World!”)取 $redis.get(“test_key”)删 $redis.del “categories” 参考]]></content>
      <tags>
        <tag>redis</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[js-声明全局变量]]></title>
    <url>%2Fposts%2F2018-05-15-7678489.html</url>
    <content type="text"><![CDATA[1234var editor;$(function()&#123; editor = ace.edit('editor');&#125;); 这种参数必须在$(document) 里面调用不能直接调]]></content>
      <tags>
        <tag>js</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[微信小程序-获取授权 后台获取其他用户信息不行！]]></title>
    <url>%2Fposts%2F2018-05-14-7669337.html</url>
    <content type="text"><![CDATA[普通授权 用wx.authorize 就可以了有相关文档 可以直接用https://developers.weixin.qq.com/miniprogram/dev/api/authorize.html但是用户信息授权被坑爹的小程序改成了只能用button调起 1&lt;button open-type=&quot;getUserInfo&quot; bindgetuserinfo=&quot;userInfoHandler&quot;&gt; Click me &lt;/button&gt; 用以下代码去判断用户是否授权了 123userInfoHandler: function (e) &#123; e.detail.userInfo; //要判断这个，有值表示用户点击允许，没有则表示用户点击的是拒绝。&#125; 后台只能获取到当前用户信息 并获取不到其他用户信息！！！！坑爹！！！ 只能暂存]]></content>
      <tags>
        <tag>wechat</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[微信小程序-图片显示]]></title>
    <url>%2Fposts%2F2018-05-13-micro-letter-applet-picture-display.html</url>
    <content type="text"><![CDATA[https://developers.weixin.qq.com/miniprogram/dev/component/image.html]]></content>
      <tags>
        <tag>wechat</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[微信小程序-获取全局变量]]></title>
    <url>%2Fposts%2Fundefined.html</url>
    <content type="text"><![CDATA[getApp().globalData.xxx]]></content>
  </entry>
  <entry>
    <title><![CDATA[html-普通标签模拟textarea]]></title>
    <url>%2Fposts%2Fundefined.html</url>
    <content type="text"><![CDATA[html5里面的contenteditable属性]]></content>
  </entry>
  <entry>
    <title><![CDATA[css-美化checkbox 样式]]></title>
    <url>%2Fposts%2Fundefined.html</url>
    <content type="text"><![CDATA[1.css方法： 兼容性一般 不兼容safari 12345678910111213141516171819202122232425input[type=checkbox] -webkit-appearance: checkbox !important -moz-appearance: checkbox !important -ms-appearance: checkbox !important -o-appearance: checkbox !important appearance: checkbox !important display: none input[type=checkbox]+label height: 18px !important width: 18px !important background-color: #fff border: 1px solid #dedfe1 padding: 9px border-radius: 3px display: inline-block position: relative margin-left: 7px input[type=checkbox]:checked+label:after content: &apos;\2714&apos; font-size: 16px position: absolute top: 0px left: 3px color: #ff4f4c line-height: 18px html 123&lt;%= check_box_tag &apos;email[bcc_to_self]&apos;, true, email.reply_to.present? &amp;&amp; email.reply_to == email.bcc&amp;.first, id: &quot;bcc-to-self-checkbox&quot;%&gt;&lt;label for=&quot;bcc-to-self-checkbox&quot;&gt;&lt;/label&gt;]]></content>
  </entry>
  <entry>
    <title><![CDATA[ios-tooltip需要点两次]]></title>
    <url>%2Fposts%2Fundefined.html</url>
    <content type="text"><![CDATA[//listen for the show event on any triggered elements$(‘[data-toggle=”tooltip”]’).on(‘show.bs.tooltip’, function() { $(this).click();}); button 可以a tag 不行a tag 带data-confirm 可以]]></content>
  </entry>
  <entry>
    <title><![CDATA[ios-版本更新提示]]></title>
    <url>%2Fposts%2Fundefined.html</url>
    <content type="text"><![CDATA[//判断是否需要提示更新App (void)shareAppVersionAlert { if(![self judgeNeedVersionUpdate]) return ; //App内info.plist文件里面版本号 NSDictionary *infoDict = [[NSBundle mainBundle] infoDictionary]; NSString *appVersion = infoDict[@”CFBundleShortVersionString”];// NSString *bundleId = infoDict[@”CFBundleIdentifier”]; NSString *urlString =[NSString stringWithFormat:@”https://itunes.apple.com/cn/lookup?id=%@&quot;, appId];; //两种请求appStore最新版本app信息 通过bundleId与appleId判断 //[NSString stringWithFormat:@”https://itunes.apple.com/cn/lookup?bundleid=%@&quot;, bundleId] NSURL *urlStr = [NSURL URLWithString:urlString]; //创建请求体 NSURLRequest *urlRequest = [NSURLRequest requestWithURL:urlStr]; [NSURLConnection sendAsynchronousRequest:urlRequest queue:[NSOperationQueue mainQueue] completionHandler:^(NSURLResponse * _Nullable response, NSData * _Nullable data, NSError * _Nullable connectionError) {if (connectionError) { // NSLog(@&quot;connectionError-&gt;%@&quot;, connectionError.localizedDescription); return ; } NSError *error; NSDictionary *resultsDict = [NSJSONSerialization JSONObjectWithData:data options:NSJSONReadingAllowFragments error:&amp;error]; if (error) { // NSLog(@&quot;error-&gt;%@&quot;, error.localizedDescription); return; } NSArray *sourceArray = resultsDict[@&quot;results&quot;]; if (sourceArray.count &gt;= 1) { //AppStore内最新App的版本号 NSDictionary *sourceDict = sourceArray[0]; NSString *newVersion = sourceDict[@&quot;version&quot;]; if ([self judgeNewVersion:newVersion withOldVersion:appVersion]) { UIAlertController *alertVc = [UIAlertController alertControllerWithTitle:@&quot;提示:\n您的App不是最新版本，请问是否更新&quot; message:@&quot;&quot; preferredStyle:UIAlertControllerStyleAlert]; UIAlertAction *action1 = [UIAlertAction actionWithTitle:@&quot;暂不更新&quot; style:UIAlertActionStyleDefault handler:^(UIAlertAction * _Nonnull action) { // [alertVc dismissViewControllerAnimated:YES completion:nil]; }]; [alertVc addAction:action1]; UIAlertAction *action2 = [UIAlertAction actionWithTitle:@&quot;去更新&quot; style:UIAlertActionStyleDestructive handler:^(UIAlertAction * _Nonnull action) { //跳转到AppStore，该App下载界面 [[UIApplication sharedApplication] openURL:[NSURL URLWithString:sourceDict[@&quot;trackViewUrl&quot;]]]; }]; [alertVc addAction:action2]; [[UIApplication sharedApplication].delegate.window.rootViewController presentViewController:alertVc animated:YES completion:nil]; } } }];}//每天进行一次版本判断 (BOOL)judgeNeedVersionUpdate { NSDateFormatter *formatter = [[NSDateFormatter alloc] init]; [formatter setDateFormat:@”yyyy-MM-dd”];// 获取年-月-日 NSString *dateString = [formatter stringFromDate:[NSDate date]]; NSString *currentDate = [[NSUserDefaults standardUserDefaults] objectForKey:@”currentDate”]; if ([currentDate isEqualToString:dateString]) {return NO; } [[NSUserDefaults standardUserDefaults] setObject:dateString forKey:@”currentDate”]; return YES;}//判断当前app版本和AppStore最新app版本大小 (BOOL)judgeNewVersion:(NSString *)newVersion withOldVersion:(NSString *)oldVersion { NSArray *newArray = [newVersion componentsSeparatedByCharactersInSet:[NSCharacterSet characterSetWithCharactersInString:@”.”]]; NSArray *oldArray = [oldVersion componentsSeparatedByCharactersInSet:[NSCharacterSet characterSetWithCharactersInString:@”.”]]; for (NSInteger i = 0; i &lt; newArray.count; i ++) {if ([newArray[i] integerValue] &gt; [oldArray[i] integerValue]) { return YES; } else if ([newArray[i] integerValue] &lt; [oldArray[i] integerValue]) { return NO; } else { } } return NO;} 在 didFinishLaunchingWithOptions方法中调用就可以了]]></content>
  </entry>
  <entry>
    <title><![CDATA[js-ios alert confirm 不显示网址]]></title>
    <url>%2Fposts%2Fundefined.html</url>
    <content type="text"><![CDATA[window.alert = function(name){ var iframe = document.createElement(“IFRAME”); iframe.style.display=”none”; iframe.setAttribute(“src”, ‘data:text/plain,’); document.documentElement.appendChild(iframe); window.frames[0].window.alert(name); iframe.parentNode.removeChild(iframe); }; window.confirm = (message) -&gt; iframe = document.createElement(‘IFRAME’) iframe.style.display = ‘none’ iframe.setAttribute ‘src’, ‘data:text/plain,’ document.documentElement.appendChild iframe alertFrame = window.frames[0] result = alertFrame.window.confirm(message) iframe.parentNode.removeChild iframe result]]></content>
  </entry>
  <entry>
    <title><![CDATA[js-notify dismiss]]></title>
    <url>%2Fposts%2Fundefined.html</url>
    <content type="text"><![CDATA[$(‘.notifyjs-wrapper’).remove();]]></content>
  </entry>
  <entry>
    <title><![CDATA[ios- nav title]]></title>
    <url>%2Fposts%2Fundefined.html</url>
    <content type="text"><![CDATA[1.直接修改默认[self.navigationController.navigationBar setTitleTextAttributes:@{NSFontAttributeName:[UIFont systemFontOfSize:19],NSForegroundColorAttributeName:[UIColor redColor]}]; 2.就是在导航向上添加一个titleView，可以使用一个label，再设置label的背景颜色透明，字体什么的设置就很简单了。//自定义标题视图UILabel *titleLabel = [[UILabelalloc] initWithFrame:CGRectMake(0,0, 200, 44)];titleLabel.backgroundColor = [UIColor grayColor];titleLabel.font = [UIFont boldSystemFontOfSize:20];titleLabel.textColor = [UIColor greenColor];titleLabel.textAlignment = NSTextAlignmentCenter;titleLabel.text =@”新闻”;self.navigationItem.titleView = titleLabel; ps:定义普通字符串大小颜色：UIFont *font = [UIFont fontWithName:@”Palatino-Roman” size:14.0];NSDictionary *attrsDictionary = [NSDictionary dictionaryWithObject:font forKey:NSFontAttributeName];NSAttributedString *attrString = [[NSAttributedString alloc] initWithString:@”strigil” attributes:attrsDictionary];]]></content>
  </entry>
  <entry>
    <title><![CDATA[ios-navigationbar 按钮偏移]]></title>
    <url>%2Fposts%2Fundefined.html</url>
    <content type="text"><![CDATA[在ios11之前 我们用 12UIBarButtonItem *space = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemFixedSpace target:nil action:nil];space.width = -13; 但是他在ios11里失效了我们可以选择 leftBtn.contentEdgeInsets =UIEdgeInsetsMake(0, -20,0, 0); 来调整位置 barbtn 我还没有找到一个合适的方法 toolbar 拼接要写两种 ps:UIEdgeInsetsMake 上 左 下 右]]></content>
  </entry>
  <entry>
    <title><![CDATA[ios-wkwebview 加载完成方法]]></title>
    <url>%2Fposts%2Fundefined.html</url>
    <content type="text"><![CDATA[(void)webView:(WKWebView *)webView didFinishNavigation:(WKNavigation *)navigation {}]]></content>
  </entry>
  <entry>
    <title><![CDATA[css-box-shadow]]></title>
    <url>%2Fposts%2Fundefined.html</url>
    <content type="text"><![CDATA[box-shadow语法：x轴偏移值 y轴偏移值 模糊半径 阴影半径 || 颜色 insect，其中阴影半径可以为负值，意思是增加或减少指定数值的阴影半径 正常阴影 box-shadow: 5px 5px 5px black; 阴影半径为负值 box-shadow: 5px 5px 5px -5px black; 阴影半径为正值 box-shadow: 5px 5px 5px 5px black; 双边阴影 box-shadow: 5px 0px 5px -5px black, -5px 0px 5px -5px black; 单边阴影 box-shadow: 5px 0px 5px -5px black;]]></content>
  </entry>
  <entry>
    <title><![CDATA[ios-UIActionSheet]]></title>
    <url>%2Fposts%2Fundefined.html</url>
    <content type="text"><![CDATA[ios8.3之前用UIActionSheet 12345678UIActionSheet *actionSheet = [[UIActionSheet alloc] initWithTitle:@&quot;这是UIActionSheet&quot; delegate:self cancelButtonTitle:@&quot;取消&quot; destructiveButtonTitle:@&quot;确定&quot; otherButtonTitles:@&quot;按钮1&quot;, @&quot;按钮2&quot;,nil]; actionSheet.actionSheetStyle = UIBarStyleDefault; [actionSheet showInView:self.view]; 之后ios更新了UIAlertController 添加了一种样式：UIAlertControllerStyleActionSheet 来替代UIActionSheet 1234567891011121314151617181920UIAlertController *actionSheet=[UIAlertController alertControllerWithTitle:@&quot;title&quot; message:@&quot;message&quot; preferredStyle:UIAlertControllerStyleActionSheet];UIAlertController *actionSheet=[UIAlertController alertControllerWithTitle:nil message:nil preferredStyle:UIAlertControllerStyleActionSheet];//取消上面的title//红色按钮 UIAlertAction *cancelAction = [UIAlertAction actionWithTitle:@&quot;否&quot; style:UIAlertActionStyleDestructive handler:^(UIAlertAction * _Nonnull action) &#123; NSLog(@&quot;否按钮被点击了&quot;); &#125;]; //蓝色按钮 UIAlertAction *sureAction = [UIAlertAction actionWithTitle:@&quot;是&quot; style:UIAlertActionStyleDefault handler:^(UIAlertAction * _Nonnull action) &#123; NSLog(@&quot;是按钮被点击了&quot;); &#125;]; //取消按钮 UIAlertAction *destructiveAction = [UIAlertAction actionWithTitle:@&quot;取消&quot; style:UIAlertActionStyleCancel handler:^(UIAlertAction * _Nonnull action) &#123; NSLog(@&quot;关闭按钮被点击了&quot;); &#125;]; [actionSheet addAction:cancelAction]; [actionSheet addAction:sureAction]; [actionSheet addAction:destructiveAction]; [self presentViewController:actionSheet animated:YES completion:nil];]]></content>
  </entry>
  <entry>
    <title><![CDATA[ios-左滑返回]]></title>
    <url>%2Fposts%2Fundefined.html</url>
    <content type="text"><![CDATA[self.navigationController.interactivePopGestureRecognizer.delegate = (id)self; self.navigationController.interactivePopGestureRecognizer.enabled = NO;]]></content>
  </entry>
  <entry>
    <title><![CDATA[ios-wkwebview页面双击会上移]]></title>
    <url>%2Fposts%2Fundefined.html</url>
    <content type="text"><![CDATA[(function(){ var agent = navigator.userAgent.toLowerCase(); //检测是否是ios var iLastTouch = null; //缓存上一次tap的时间 if (agent.indexOf(‘iphone’) &gt;= 0 || agent.indexOf(‘ipad’) &gt;= 0) { document.body.addEventListener(‘touchend’, function(event) { var iNow = new Date() .getTime(); iLastTouch = iLastTouch || iNow + 1 /** 第一次时将iLastTouch设为当前时间+1 */ ; var delta = iNow - iLastTouch; if (delta &lt; 500 &amp;&amp; delta &gt; 0) { event.preventDefault(); return false; } iLastTouch = iNow; }, false); } })();]]></content>
  </entry>
  <entry>
    <title><![CDATA[ios-给navbar tabbar 加分割线]]></title>
    <url>%2Fposts%2Fundefined.html</url>
    <content type="text"><![CDATA[1.创建UIimage的类方法 imageWithUicolor 123456789101112@implementation UIImage (color)+ (UIImage *)imageWithColor:(UIColor *)color size:(CGSize)size &#123; CGRect rect = CGRectMake(0, 0, size.width, size.height); UIGraphicsBeginImageContext(rect.size); CGContextRef context = UIGraphicsGetCurrentContext(); CGContextSetFillColorWithColor(context,color.CGColor); CGContextFillRect(context, rect); UIImage *img = UIGraphicsGetImageFromCurrentImageContext(); UIGraphicsEndImageContext(); return img;&#125; 2-navbar.页面上调用setShadowImage方法 1[self.navigationController.navigationBar setShadowImage:[UIImage imageWithColor:BORDERGRAY size:CGSizeMake(SCREEN_WIDTH, 0.5)]]; ps：不要分割线 [self.navigationController.navigationBar setShadowImage:[[UIImage alloc] init]];2-tabbar.页面上调用setShadowImage方法 1[self.tabBarsetShadowImage:[UIImage imageWithColor:BORDERGRAY size:CGSizeMake(SCREEN_WIDTH, 0.5)]]; ps: 创建类方法要选用object-c file —&gt; category —-&gt; uiimage 写完方法后要记得引用！ ps:如果不是用navigation controller这样来做的 就给uiview 添加了一个subview就可以了横线： 123UIView *horizontalLine = [[UIView alloc]initWithFrame:CGRectMake(x, y, SCREEN_WIDTH, 1)];horizontalLine.backgroundColor = BORDERGRAY;[self.tabBar addSubview:horizontalLine]; 竖线： 123UIView *verticalLine = [[UIView alloc]initWithFrame:CGRectMake(x cordinate, y cordinate, 1, viewWidth())];verticalLine.backgroundColor = [UIColor grayColor];[self.view addSubview:verticalLine];]]></content>
  </entry>
  <entry>
    <title><![CDATA[css-select text align]]></title>
    <url>%2Fposts%2Fundefined.html</url>
    <content type="text"><![CDATA[text-align-last: right;]]></content>
  </entry>
  <entry>
    <title><![CDATA[h5-ipnonex适配]]></title>
    <url>%2Fposts%2Fundefined.html</url>
    <content type="text"><![CDATA[一般适配问题不大 但是如果遇到底部按钮的那种就会很奇怪 尤其是集成到ios 的wkwebview 之后 设置meta标签ios11为了适配iphoneX对现有的viewport meta标签新增一个特性：viewport-fit，如果客户端没有做全屏适配，那么页面想要全屏覆盖，则可使用该特性： 可以通过加内边距 padding 扩展高度：不好使 { padding-bottom: constant(safe-area-inset-bottom); padding-bottom: env(safe-area-inset-bottom);}或者通过计算函数 calc 覆盖原来高度：会跳 { height: calc(60px(假设值) + constant(safe-area-inset-bottom)); height: calc(60px(假设值) + env(safe-area-inset-bottom));}注意，这个方案需要吸底条必须是有背景色的，因为扩展的部分背景是跟随外容器的，否则出现镂空情况。 还有一种方案就是，可以通过新增一个新的元素（空的颜色块，主要用于小黑条高度的占位），然后吸底元素可以不改变高度只需要调整位置，像这样：会跳 { margin-bottom: constant(safe-area-inset-bottom); margin-bottom: env(safe-area-inset-bottom);}空的颜色块： { position: fixed; bottom: 0; width: 100%; height: constant(safe-area-inset-bottom); height: env(safe-area-inset-bottom); background-color: #fff;} 类型二：fixed 非完全吸底元素（bottom ≠ 0），比如 “返回顶部”、“侧边广告” 等像这种只是位置需要对应向上调整，可以仅通过外边距 margin 来处理：{ margin-bottom: constant(safe-area-inset-bottom); margin-bottom: env(safe-area-inset-bottom);}或者，你也可以通过计算函数 calc 覆盖原来 bottom 值：{ bottom: calc(50px(假设值) + constant(safe-area-inset-bottom)); bottom: calc(50px(假设值) + env(safe-area-inset-bottom));} ps：在实现的过程中发现，html是否充满页面会影响底部按钮的适配，如果页面高度不变 则不充满屏幕的页面可以用 加内边距 padding 扩展高度 充满屏幕的用 计算函数 calc 覆盖原来高度(会闪 这个时候可以用下面的将iPhone X的写成单独的css) 但是有的页面高度是通过js可能会变化的 这个时候还没找到很好的解决办法 padding方法适配的iphonex css height在iPhonex的浏览器里不行 padding 的微信上不行 height env 在 app里会跳 判断是否是iphoneX可以将iPhonex的单独写css 1、利用constant函数 只有设置了viewport-fit=cover才能使用constant函数 @supports(bottom:constant(safe-area-inset-bottom)) { selector{ padding-bottom:constant(safe-area-inset-bottom); padding-bottom:calc(30px(假设值) + constant(safe-area-inset-bottom)); //根据实际情况选择适配方法 }}2、利用iphoneX独特的型号参数 @media only screen and (device-width: 375px) and (device-height:812px) and (-webkit-device-pixel-ratio:3) { #buy { padding-bottom:34px; } } //iphoneX、iphoneXs@media only screen and (device-width: 375px) and (device-height: 812px) and (-webkit-device-pixel-ratio: 3) {}即: 设备屏幕可见宽度为375px， 可见高度为812px及设备像素比为3 //iphone Xs Max@media only screen and (device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio:3) {} //iphone XR@media only screen and (device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio:2) {} （3）js判断（以下采用Jquery） if($(window).width() === 375 &amp;&amp; $(window).height() === 724 &amp;&amp; window.devicePixelRatio === 3){ #buy { padding-bottom:34px; } } ps: 6/7/8 width: 375 height: 553 devicePixelRatio: 2 6p/7p/8p width: 442 height: 622 devicePixelRatio: 3 x width: 375 height: 674 devicePixelRatio: 3]]></content>
  </entry>
  <entry>
    <title><![CDATA[ios-隐藏navbar 上默认按钮]]></title>
    <url>%2Fposts%2Fundefined.html</url>
    <content type="text"><![CDATA[[self.navigationItem setHidesBackButton:YES] 或者 [self.navigationItem setHidesBackButton:TRUE animated:NO];]]></content>
  </entry>
  <entry>
    <title><![CDATA[ios-webview input光标太大]]></title>
    <url>%2Fposts%2Fundefined.html</url>
    <content type="text"><![CDATA[ios端兼容input光标高度处理在最近的项目中遇到一个问题，input输入框光标，在安卓手机上显示没有问题，但是在苹果手机上当点击输入的时候，光标的高度和父盒子的高度一样。造成的原因就是给父盒子添加了height和line-height当点击输入的时候，光标的高度就自动和父盒子的高度一样了。（谷歌浏览器的设计原则，还有一种可能就是当没有内容的时候光标的高度等于input的line-height的值，当有内容时，光标从input的顶端到文字的底部）。解决办法：去掉父盒子的高度height和行高line-height内容用padding撑开。 作者：落魂灬链接：https://www.jianshu.com/p/b222aade3f43來源：简书著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。]]></content>
  </entry>
  <entry>
    <title><![CDATA[ios-pop 回来的页面视图刷新]]></title>
    <url>%2Fposts%2Fundefined.html</url>
    <content type="text"><![CDATA[1.从视图A中navigation controller push到视图B，当视图B navigationcontroller pop回到视图A时，并不会调用A的viewDidLoad，但是会调用viewWillAppear，所以如果视图A有需要变更的内容应该在viewWillAppear中实现。 2.当一个视图生成时是先调用viewDidLoad，再调用viewWillAppear的。 3.如果视图刷新时，其中的内容没有改变，要考虑内容的数据源是否被变更了。]]></content>
  </entry>
  <entry>
    <title><![CDATA[微信小程序-webview 原生跳转 传递参数]]></title>
    <url>%2Fposts%2Fundefined.html</url>
    <content type="text"><![CDATA[js:在html微信的js中 wx.miniProgram.navigateTo({ url:’/pages/cvShare/cvShare?url=&lt;%= share_cv_url(@cv.token)%&gt;&amp;title=&lt;%= @cv.display_name%&gt;’ }); 小程序：在onload里面接受参数 onLoad: function (options) { this.setData({ url: options.url, title: options.title }) }, 其他方法要用的时候用this.data.url这种 ps: 小程序在onShareAppMessage方法中可以取到当前页面的url res.webViewUrl]]></content>
  </entry>
  <entry>
    <title><![CDATA[ios-字符串操作]]></title>
    <url>%2Fposts%2Fundefined.html</url>
    <content type="text"><![CDATA[1.截取字符串 NSString*string =@”sdfsfsfsAdfsdf”;string = [string substringToIndex:7];//截取掉下标7之后的字符串NSLog(@”截取的值为：%@”,string);[string substringFromIndex:2];//截取掉下标2之前的字符串NSLog(@”截取的值为：%@”,string); 2.匹配字符串NSString*string =@”sdfsfsfsAdfsdf”;NSRange range = [stringrangeOfString:@”f”];//匹配得到的下标NSLog(@”rang:%@”,NSStringFromRange(range));string = [string substringWithRange:range];//截取范围类的字符串NSLog(@”截取的值为：%@”,string); 1）截取range之后的字符串NSStringstring =@”sdfsfsfsAdfsdf”;NSRange range = [string rangeOfString:@”orders/“];//匹配得到的下标NSString str = [string substringFromIndex:range.location + range.length];2）截取range之前的字符串NSStringstring =@”sdfsfsfsAdfsdf”;NSRange range = [string rangeOfString:@”orders/“];//匹配得到的下标NSString str = [string substringToIndex:range.location + range.length];3)截取固定字符串NSRange r1 = [str1rangeOfString:@”Android”];//查找字符串（返回一个结构体（起始位置及长度））NSString *s12 = [str1substringToIndex:r1.location];//截取子字符串方式 3.分隔字符串NSString*string =@”sdfsfsfsAdfsdf”; NSArray *array = [string componentsSeparatedByString:@”A”]; //从字符A中分隔成2个元素的数组NSLog(@”array:%@”,array); //结果是adfsfsfs和dfsdf]]></content>
  </entry>
  <entry>
    <title><![CDATA[ios-判断字符串为空]]></title>
    <url>%2Fposts%2Fundefined.html</url>
    <content type="text"><![CDATA[在ios中，接口经常返回null，有时候又返回空字符串，有时候又返回(null)，甚至，利用isEqualToString:@””，NULL,@”(null)”,nil,Nil比较后均得不到正确结果，甚至连string.length == 0来判断依然不行，但是实际上这个str确实是空的。那这个时候该如何判断才能正确呢？ 用NSStringFromClass打印出字符串返回的格式是(null)时，需要这样判断 if (result == nil){ NSLog(@”空类型!”);}而如果返回的格式是时，则需要这样判断 if ([result isEqual:[NSNull class]]){ NSLog(@”空类型!”);} 所以，总的来说，你可以用一句代码来总结出判断字符串类型的方式，可以这样写： (BOOL)StringIsNullOrEmpty:(NSString *)str{ return (str == nil || [str isKindOfClass:[NSNull class]] || str.length == 0);}这样就基本上能解决字符串为空类型时的判断了。]]></content>
  </entry>
  <entry>
    <title><![CDATA[ios- CGRectMake]]></title>
    <url>%2Fposts%2Fundefined.html</url>
    <content type="text"><![CDATA[·CGRectMake(origin.x，origin.y，size.width. Size.height)在代码中定义矩形。]]></content>
  </entry>
  <entry>
    <title><![CDATA[ios-navbar上定义多个按钮]]></title>
    <url>%2Fposts%2Fundefined.html</url>
    <content type="text"><![CDATA[第一种方法UIToolbartools=[[UIToolbar alloc]initWithFrame:CGRectMake(5, 0, 80, 39)]; //解决出现的那条线 tools.clipsToBounds = YES;//解决tools背景颜色的问题 [tools setBackgroundImage:[UIImage new]forToolbarPosition:UIBarPositionAny barMetrics:UIBarMetricsDefault]; [tools setShadowImage:[UIImage new] forToolbarPosition:UIToolbarPositionAny];//添加两个buttonNSMutableArraybuttons=[[NSMutableArray alloc]initWithCapacity:2];UIBarButtonItembutton3=[[UIBarButtonItem alloc]initWithImage:[UIImage imageNamed:@”你的图片”] style: UIBarButtonItemStyleDone target:self action:@selector(press2)]; UIBarButtonItembutton2=[[UIBarButtonItem alloc]initWithImage:[UIImage imageNamed:@”你的图片”] style: UIBarButtonItemStyleDone target:self action:@selector(press)]; button3.tintColor=[UIColor whiteColor]; button2.tintColor=[UIColor whiteColor];[buttons addObject:button3]; [buttons addObject:button2]; [tools setItems:buttons animated:NO]; UIBarButtonItem*btn=[[UIBarButtonItem alloc]initWithCustomView:tools]; self.navigationItem.rightBarButtonItem=btn; 有一个更简单的方法self.navigationItem.rightBarButtonItems=@[button2, button3];]]></content>
  </entry>
  <entry>
    <title><![CDATA[ios-tabbar]]></title>
    <url>%2Fposts%2Fundefined.html</url>
    <content type="text"><![CDATA[//tabbar UITabBarController * tabbar = [[UITabBarController alloc] init]; myFileViewController * myfile = [[myFileViewController alloc] init]; myfile.tabBarItem.title = @”简历”; myfile.tabBarItem.image = [[UIImage imageNamed:@”tabbar_home_icon_normal”] imageWithRenderingMode:UIImageRenderingModeAlwaysOriginal]; myfile.tabBarItem.selectedImage = [[UIImage imageNamed:@”tabbar_home_icon_selected”] imageWithRenderingMode:UIImageRenderingModeAlwaysOriginal]; UINavigationController *fileNav = [[UINavigationController alloc] init]; [fileNav addChildViewController:myfile]; blogIndexViewController * blogIndex = [[blogIndexViewController alloc]init]; blogIndex.tabBarItem.title = @&quot;攻略&quot;; blogIndex.tabBarItem.image = [[UIImage imageNamed:@&quot;tabbar_case_icon_normal&quot;] imageWithRenderingMode:UIImageRenderingModeAlwaysOriginal]; blogIndex.tabBarItem.selectedImage = [[UIImage imageNamed:@&quot;tabbar_case_icon_seleted&quot;] imageWithRenderingMode:UIImageRenderingModeAlwaysOriginal]; UINavigationController *blogNav = [[UINavigationController alloc] init]; [blogNav addChildViewController:blogIndex]; [tabbar addChildViewController: fileNav]; [tabbar addChildViewController:blogNav]; 这个是最简单的写法 最好推荐用YPTabBarController 基本可以满足需要而且不用自己写tababar的显示隐藏等很多基本功能]]></content>
  </entry>
  <entry>
    <title><![CDATA[css-缩放]]></title>
    <url>%2Fposts%2Fundefined.html</url>
    <content type="text"><![CDATA[chrome等浏览器会有一个问题：当font-size小于12px的时候 会无法正常显示 这个时候我们只能用transform:scale()这个css属性transform scale1.默认基于中心点缩放 但是我们可以用 transform-origin 这个属性来控制他的基点2.不会影响其他模块布局 虽然会缩放但是底的大小是不变的3.可以进行整体缩放包括对字体大小的控制缩放还有一个属性是zoom1.不是css的标准属性2.他不能让字体大小小于12px 当缩小到font-size 小于12px的时候默认显示12px3.缩放的时候 会影响布局 底的大小会跟着变4.默认基于左上角缩放 一般建议使用transform scale 来进行缩放 性能更加但是我现在的问题是有一块布局需要根据缩放大小来控制位置只能用js去计算高度之后显示]]></content>
  </entry>
  <entry>
    <title><![CDATA[rails- 数组去除空字符串]]></title>
    <url>%2Fposts%2Fundefined.html</url>
    <content type="text"><![CDATA[noEmptyCities = cities.reject { |c| c.empty? } reject 后面跟着要去除的条件]]></content>
  </entry>
  <entry>
    <title><![CDATA[rails-手机跟网页版页面分开]]></title>
    <url>%2Fposts%2Fundefined.html</url>
    <content type="text"><![CDATA[controller 1before_action :detect_browser, only: :index 在对应的action里面 12345respond_to do |format| format.html do |variant| variant.mobile end end 方法 123def detect_browser request.variant = :mobile if browser.device.mobile?end 页面名称 例如：index.html+mobile.erb这样在手机上就会自动走手机版的页面了 ps: 不用添加路由]]></content>
  </entry>
  <entry>
    <title><![CDATA[html-tag 嵌套]]></title>
    <url>%2Fposts%2Fundefined.html</url>
    <content type="text"><![CDATA[如果想在a标签之中嵌套a标签 比较简单的方法是在内层的a标签外嵌套一层 object 标签但是这种方法 IE8及以下是不支持的，chrome firefox IE9及以上均支持 IE8及以下建议：将两层a 标签都做成绝对定位将位置分开]]></content>
  </entry>
  <entry>
    <title><![CDATA[css- 实现框内斜线]]></title>
    <url>%2Fposts%2Fundefined.html</url>
    <content type="text"><![CDATA[右上左下background: linear-gradient(135deg, transparent 49.5%, deeppink 49.5%, deeppink 50.5%, transparent 50.5%);左上右下background: linear-gradient(45deg, transparent 49.5%, deeppink 49.5%, deeppink 50.5%, transparent 50.5%);]]></content>
  </entry>
  <entry>
    <title><![CDATA[css-有字的分割线]]></title>
    <url>%2Fposts%2Fundefined.html</url>
    <content type="text"><![CDATA[html 12345&lt;div class=&quot;other-example-divider&quot;&gt; &lt;span class=&quot;line&quot;&gt;&lt;/span&gt; &lt;span class=&quot;text&quot;&gt;文字&lt;/span&gt; &lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;/div&gt; css 12345678910111213141516.other-example-divider padding-left: 30px padding-right: 42px height: 20px width: 100% display: flex justify-content: space-between align-items: center .text color: #9c9c9c padding-left: 20px padding-right: 20px .line height: 2px flex-grow: 1 background-color: #dedfe1]]></content>
  </entry>
  <entry>
    <title><![CDATA[rails 去掉空白符]]></title>
    <url>%2Fposts%2Fundefined.html</url>
    <content type="text"><![CDATA[lstrip : 去掉首空格 rstrip : 去掉尾空格 gsub : 去掉全部空格,不过要用到pattern匹配 eg: s1 = “ Test whitespace”s2 = “ hello Ruby Rails “s3 = “trailing “puts s1.lstrip+s3 # show lstrip remove leading whitespaceputs s2.rstrip+s3 # show rstrip remove trail whitespaceputs s1.strip + s2.strip + s3 # show strip remove leading and trail whitespaceputs s2.gsub(/\s+/,’’)puts s2.gsub(‘ ‘,’’)puts s2.gsub!(‘ ‘,’’)puts s2.gsub(//,’’) # four methods show remove all whitespace str.gsub(/^ | $/,””)去掉首尾空格]]></content>
  </entry>
  <entry>
    <title><![CDATA[css-字过长不显示]]></title>
    <url>%2Fposts%2Fundefined.html</url>
    <content type="text"><![CDATA[overflow: hidden;white-space: nowrap;text-overflow: ellipsis; ps：对于table来说要给 table 加一个 123table &#123; table-layout: fixed;&#125;]]></content>
  </entry>
  <entry>
    <title><![CDATA[css-cursor]]></title>
    <url>%2Fposts%2Fundefined.html</url>
    <content type="text"><![CDATA[禁止：cursor: not-allowed;]]></content>
  </entry>
  <entry>
    <title><![CDATA[css-控制tooltip的width]]></title>
    <url>%2Fposts%2Fundefined.html</url>
    <content type="text"><![CDATA[找到会出现tooltip的外层用这个class .tooltip-inner { width: xxx;}]]></content>
  </entry>
  <entry>
    <title><![CDATA[ios- 弹出jquery的confirm]]></title>
    <url>%2Fposts%2Fundefined.html</url>
    <content type="text"><![CDATA[12345678910 - (void)webView:(WKWebView *)webView runJavaScriptConfirmPanelWithMessage:(NSString *)message initiatedByFrame:(WKFrameInfo *)frame completionHandler:(void (^)(BOOL))completionHandler&#123; UIAlertController *alertController = [UIAlertController alertControllerWithTitle:@&quot;提示&quot; message:message?:@&quot;&quot; preferredStyle:UIAlertControllerStyleAlert]; [alertController addAction:([UIAlertAction actionWithTitle:@&quot;取消&quot; style:UIAlertActionStyleCancel handler:^(UIAlertAction * _Nonnull action) &#123; completionHandler(NO); &#125;])]; [alertController addAction:([UIAlertAction actionWithTitle:@&quot;确认&quot; style:UIAlertActionStyleDefault handler:^(UIAlertAction * _Nonnull action) &#123; completionHandler(YES); &#125;])]; [self presentViewController:alertController animated:YES completion:nil];&#125; ps: 一定要加 _webView.UIDelegate = self;]]></content>
  </entry>
  <entry>
    <title><![CDATA[css-自己写的moal background]]></title>
    <url>%2Fposts%2Fundefined.html</url>
    <content type="text"><![CDATA[.modal-background{ width: 100%; height: 100%; background-color: rgba(0,0,0,0.5); overflow: hidden; position: fixed; top: 0; right: 0; bottom: 0; left: 0; //outline: 0; z-index: 9; } 如果不想让蒙版后面滑动 加上js $(“body,html”).css({“overflow”:”hidden”}); 取消不可滑动$(“body,html”).css({“overflow”:”auto”});]]></content>
  </entry>
  <entry>
    <title><![CDATA[h5-intercom 样式调整问题]]></title>
    <url>%2Fposts%2Fundefined.html</url>
    <content type="text"><![CDATA[&lt;script&gt; function addNewStyle(newStyle) { var styleElement = document.getElementById(&apos;styles_js&apos;); if (!styleElement) { styleElement = document.createElement(&apos;style&apos;); styleElement.type = &apos;text/css&apos;; styleElement.id = &apos;styles_js&apos;; document.getElementsByTagName(&apos;head&apos;)[0].appendChild(styleElement); } styleElement.appendChild(document.createTextNode(newStyle)); } addNewStyle(&apos;#intercom-container .intercom-messenger-frame&gt;iframe{top:10% !important;}&apos;) addNewStyle(&apos;#intercom-container .intercom-messenger-frame&gt;iframe{position:absolute !important;}&apos;) addNewStyle(&apos;#intercom-container .intercom-app div.intercom-messenger-frame iframe{height:90% !important;}&apos;) &lt;/script&gt;找到合适的class 给他赋予样式注意：一定要写在layout里面]]></content>
  </entry>
  <entry>
    <title><![CDATA[js- 手机上键盘弹出挡住输入框]]></title>
    <url>%2Fposts%2Fundefined.html</url>
    <content type="text"><![CDATA[var viewTop = document.body.scrollTop, viewBottom = viewTop + window.innerHeight; $(“#intercom-container .intercom-composer textarea”).on(“focus”, function(){ window.setTimeout(function() { window.scrollTo(0, viewBottom); // 调整value },200); }) $(“#intercom-container .intercom-composer textarea”).on(“blur”, function(){ window.setTimeout(function() { window.scrollTo(0, viewTOP); // 调整value },200); })]]></content>
  </entry>
  <entry>
    <title><![CDATA[ios-文件下载与分享]]></title>
    <url>%2Fposts%2Fundefined.html</url>
    <content type="text"><![CDATA[-(void)download { [SVProgressHUD showWithStatus:@”正在下载文件”]; NSURL *url = [NSURL URLWithString:self.currentRoute]; NSURLSession *session = [NSURLSession sharedSession]; NSURLSessionTask *task = [session dataTaskWithURL:url completionHandler:^(NSData * _Nullable data, NSURLResponse * _Nullable response, NSError * _Nullable error) { //将下载后的数据存入文件(lastObject 无数据返回nil，不会导致程序崩溃) _filePath = [NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES) lastObject]; NSString* name = [_fileName stringByAppendingString:@&quot;.pdf&quot;]; _filePath = [_filePath stringByAppendingPathComponent:name]; NSLog(@&quot;%@&quot;,_filePath); //将下载的二进制文件转成入文件 NSFileManager *manager = [NSFileManager defaultManager]; BOOL isDownLoad = [manager createFileAtPath:_filePath contents:data attributes:nil]; [Loading hide]; if (isDownLoad) { [SVProgressHUD showSuccessWithStatus:@&quot;下载完成&quot;]; }else{ [SVProgressHUD showErrorWithStatus:@&quot;下载失败，请重试&quot;]; } [SVProgressHUD dismissWithDelay:1]; }]; //开始下载 否则不会开始 [task resume];} -(void)sharePDF{ //创建实例(写成成员变量，不然可能导致分享出去被释放崩溃问题) _documentController = [UIDocumentInteractionController interactionControllerWithURL:[NSURL fileURLWithPath:_filePath]]; //设置代理 _documentController.delegate = self; BOOL canOpen = [_documentController presentOpenInMenuFromRect:CGRectZero inView:self.view animated:YES]; if (!canOpen) { NSLog(@”沒有程序可以打開要分享的文件”); [Loading showLoginFail:_webview for:@”沒有程序可以打開要分享的文件”]; [SVProgressHUD dismissWithDelay:1]; }} ps:如果只想分享url这样的 用这个就可以 12345678910//ios系统分享-(void)SystemShareWithTitle:(NSString*)title withText:(NSString*)text withImageUrl:(NSString*)url withSiteUrl:(NSString*)siteurl withVC:(UIViewController*)VC&#123; NSString *titleText = title; NSString *shareText = text; NSURL *URL = [NSURL URLWithString:siteurl]; UIImage *image =[UIImage imageWithData:[NSData dataWithContentsOfURL:[NSURL URLWithString:url]]]; UIActivityViewController *a = [[UIActivityViewController alloc] initWithActivityItems:[NSArray arrayWithObjects:titleText,shareText,URL,image, nil] applicationActivities:nil]; [VC presentViewController:a animated:true completion:nil];&#125;]]></content>
  </entry>
  <entry>
    <title><![CDATA[ios-支付集成的巨坑]]></title>
    <url>%2Fposts%2Fundefined.html</url>
    <content type="text"><![CDATA[1、支付宝 url type 中的url scheme自定义 在alipaymanager 中调用自定义的url scheme 即可实现跳转 2.微信统一下单接口返回签名错误 如确定参数无误 重新设置商户key(一样的也可以) 3.app跟网站上的微信支付的账户不是一个 都要设置好才能用]]></content>
  </entry>
  <entry>
    <title><![CDATA[ios11- wkweview获取的内容向下偏离]]></title>
    <url>%2Fposts%2Fundefined.html</url>
    <content type="text"><![CDATA[if (@available(iOS 11.0, *)) { _webview.scrollView.contentInsetAdjustmentBehavior = UIScrollViewContentInsetAdjustmentNever; _webview.scrollView.contentInset = UIEdgeInsetsMake(0, 0, 0, 0); _webview.scrollView.scrollIndicatorInsets = _webview.scrollView.contentInset; } 也可以解决ipone x底部留白问题]]></content>
  </entry>
  <entry>
    <title><![CDATA[ios-wkwebview cookie]]></title>
    <url>%2Fposts%2Fundefined.html</url>
    <content type="text"><![CDATA[1.存储 1）使用- (void)webView:(WKWebView *)webView decidePolicyForNavigationResponse:(WKNavigationResponse *)navigationResponse decisionHandler:(void (^)(WKNavigationResponsePolicy))decisionHandler{方法 2） 1234567891011NSHTTPURLResponse *response = (NSHTTPURLResponse *)navigationResponse.response; //读取wkwebview中的cookie 方法 NSArray *cookies =[NSHTTPCookie cookiesWithResponseHeaderFields:[response allHeaderFields] forURL:response.URL]; for (NSHTTPCookie *cookie in cookies) &#123; [[NSHTTPCookieStorage sharedHTTPCookieStorage] setCookie:cookie]; &#125; //看看存入到了NSHTTPCookieStorage了没有 NSHTTPCookieStorage *cookieJar2 = [NSHTTPCookieStorage sharedHTTPCookieStorage]; for (NSHTTPCookie *cookie in cookieJar2.cookies) &#123; NSLog(@&quot;NSHTTPCookieStorage中的cookie%@&quot;, cookie); &#125; 2.读取 12345678910111213141516// 在此处获取返回的cookie NSMutableDictionary *cookieDic = [NSMutableDictionary dictionary]; NSMutableString *cookieValue = [NSMutableString stringWithFormat:@&quot;&quot;]; NSHTTPCookieStorage *cookieJar = [NSHTTPCookieStorage sharedHTTPCookieStorage]; for (NSHTTPCookie *cookie in [cookieJar cookies]) &#123; [cookieDic setObject:cookie.value forKey:cookie.name]; NSLog(@&quot;传递的cookie%@&quot;, cookieDic); &#125; // cookie重复，先放到字典进行去重，再进行拼接 for (NSString *key in cookieDic) &#123; NSString *appendString = [NSString stringWithFormat:@&quot;%@=%@;&quot;, key, [cookieDic valueForKey:key]]; [cookieValue appendString:appendString]; &#125; NSMutableURLRequest *requestCookie = [NSMutableURLRequest requestWithURL:url]; [requestCookie addValue:cookieValue forHTTPHeaderField:@&quot;Cookie&quot;]; NSLog(@&quot;传递的最终cookie%@&quot;, requestCookie); 3.清除 12345NSHTTPCookieStorage *cookieJar = [NSHTTPCookieStorage sharedHTTPCookieStorage]; NSArray *_tmpArray = [NSArray arrayWithArray:[cookieJar cookies]]; for (id obj in _tmpArray) &#123; [cookieJar deleteCookie:obj]; &#125; ps:如果想再次进入免登陆 需要在app端存储一下app端手动存储Cookie 如果没设置Cookie失效时间expiresDate:(null)，sessionOnly:true,kill掉后系统不会自动保存Cookie，如果想持久化Cookie 模仿浏览器存住Cookie，使用NSUserDefaults存下即可 12345678910111213141516//合适的时机保存Cookie- (void)saveCookies&#123; NSData *cookiesData = [NSKeyedArchiver archivedDataWithRootObject: [[NSHTTPCookieStorage sharedHTTPCookieStorage] cookies]]; NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults]; [defaults setObject: cookiesData forKey: @&quot;org.skyfox.cookie&quot;]; [defaults synchronize];&#125;//合适的时机加载Cookie 一般都是app刚刚启动的时候- (void)loadCookies&#123; NSArray *cookies = [NSKeyedUnarchiver unarchiveObjectWithData: [[NSUserDefaults standardUserDefaults] objectForKey: @&quot;org.skyfox.cookie&quot;]]; NSHTTPCookieStorage *cookieStorage = [NSHTTPCookieStorage sharedHTTPCookieStorage]; for (NSHTTPCookie *cookie in cookies)&#123; [cookieStorage setCookie: cookie]; &#125;&#125;]]></content>
  </entry>
  <entry>
    <title><![CDATA[ios-oc和js的交互（数据传值）]]></title>
    <url>%2Fposts%2Fundefined.html</url>
    <content type="text"><![CDATA[https://github.com/marcuswestin/WebViewJavascriptBridge]]></content>
  </entry>
  <entry>
    <title><![CDATA[ios-url中有中文]]></title>
    <url>%2Fposts%2Fundefined.html</url>
    <content type="text"><![CDATA[ios9之后才支持NSURL *url = [NSURL URLWithString:[urlString stringByAddingPercentEncodingWithAllowedCharacters:[NSCharacterSet URLQueryAllowedCharacterSet]]];]]></content>
  </entry>
  <entry>
    <title><![CDATA[ios-字符串插入]]></title>
    <url>%2Fposts%2Fundefined.html</url>
    <content type="text"><![CDATA[NSString 声明的字符串不可变所以想要改变这个字符串要用NSMutableString来声明]]></content>
  </entry>
  <entry>
    <title><![CDATA[rails ajax获取的数据 分页]]></title>
    <url>%2Fposts%2Fundefined.html</url>
    <content type="text"><![CDATA[将will_paginate 写成一个partial 在ajax调用的时候 替换parcial注意：1.页面上render的外面要套一层div 2.不需要传递参数 will_paginate 会自动去相对应的controller里面找 3.分页直接点击会显示html用一下方法可解决（让will_paginate 可调用ajax方法） application_helper.rb12345module ApplicationHelper def paginate(collection, params= &#123;&#125;) will_paginate collection, params.merge(:renderer =&gt; RemoteLinkPaginationHelper::LinkRenderer) endend index.html.erb123&lt;div id="page_links"&gt; &lt;%= paginate @results %&gt;&lt;/div&gt; remote_link_pagination_helper.rb12345678module RemoteLinkPaginationHelper class LinkRenderer &lt; WillPaginate::ActionView::LinkRenderer def link(text, target, attributes = &#123;&#125;) attributes['data-remote'] = true super end endend Make will_paginate generate ajax links原文]]></content>
  </entry>
  <entry>
    <title><![CDATA[解决手机端input不能滚动focus]]></title>
    <url>%2Fposts%2Fundefined.html</url>
    <content type="text"><![CDATA[12345678910111213141516171819202122232425262728293031var mobileOtherInput= function()&#123; var interval; $(document).on(&apos;touchstart&apos;, &apos;#cvs-other .main .other-info-content-item .item-content .item-content-form .fields input.description&apos;, function()&#123; this.focus(); var el=this,ratio=el.scrollWidth/el.value.length; var inputwidthinchar=$(el).width()/ratio; clearInterval(interval); interval=setInterval(function()&#123; var x=el.selectionStart,x2=el.selectionEnd,width=$(el).width(); if ( (width + 1) &gt; el.scrollWidth) return; var curposS=x-el.scrollLeft/ratio, curposE=x2-el.scrollLeft/ratio, tenper=inputwidthinchar*.1; if (curposS &gt; tenper &amp;&amp; curposE &lt; (inputwidthinchar-tenper) ) return; // only if at edges; if (curposS &lt; tenper &amp;&amp; curposE &gt; (inputwidthinchar-tenper) ) return; // if at both edges, don&apos;t do anything; //center text - good for tapping on spot to be centered //$(el).scrollLeft(x*ratio-(width/2)); //scroll two char at a time - good for touch and hold at edge and more like expected function if (curposS &lt; tenper) $(el).scrollLeft(el.scrollLeft-ratio*2); else $(el).scrollLeft(el.scrollLeft+ratio*2); el.setSelectionRange(x, x2); //not working so well. &#125;,100); &#125;).blur(function()&#123; clearInterval(interval); &#125;);&#125;]]></content>
  </entry>
  <entry>
    <title><![CDATA[input type=date 不显示placeholder]]></title>
    <url>%2Fposts%2Fundefined.html</url>
    <content type="text"><![CDATA[1.在html中写 input type=area2.在js中将type变成dateps:1.手机端会显示键盘不会弹出日期选择框 所以js点击不能用focus方法 要用touchstart方法 并且this.focus() 要添加setTimeout 2.date 选中的字符串格式（“yyyy-mm-dd”）rails不能进行识别存成datetime类型 要将他变成“yyyy/mm/dd”格式之后存储 但是input type=date 不支持“yyyy/mm/dd”类型的显示 所以在显示之前还要变回 type=&quot;text&quot;eg: 123456789101112131415161718192021var mobileDatePicker = function()&#123; var sUserAgent = navigator.userAgent; if (sUserAgent.indexOf(&apos;Android&apos;) &gt; -1 || sUserAgent.indexOf(&apos;iPhone&apos;) &gt; -1)&#123; $(document).on(&apos;touchstart&apos;, &apos;input.start_at, input.end_at&apos;, function()&#123; this.type = &apos;month&apos;; setTimeout(function(e) &#123; this.focus(); &#125;,1000) $(this).change(function() &#123; this.type = &apos;text&apos;; myDate = $(this).val().replace(&quot;-&quot;, &quot;/&quot;) $(this).val(myDate) &#125;); &#125;) $(&quot;input.start_at, input.end_at&quot;).focusout(function() &#123; this.type = &apos;text&apos;; // this.focusout(); &#125;) &#125; &#125;;]]></content>
  </entry>
  <entry>
    <title><![CDATA[rails- redis]]></title>
    <url>%2Fposts%2Fundefined.html</url>
    <content type="text"><![CDATA[http://blog.csdn.net/pingpangbing0902/article/details/47104545 先运行redis-server /usr/local/etc/redis.conf 安装完之后新开一个窗口运行bundle exec sidekiq]]></content>
  </entry>
  <entry>
    <title><![CDATA[rails- 上传图片剪裁]]></title>
    <url>%2Fposts%2Fundefined.html</url>
    <content type="text"><![CDATA[https://github.com/kirtithorat/carrierwave-cropapi说明 http://www.cnblogs.com/MirageFox/p/4941967.html]]></content>
  </entry>
  <entry>
    <title><![CDATA[vue js - 封装component]]></title>
    <url>%2Fposts%2Fundefined.html</url>
    <content type="text"><![CDATA[1.slot 可以直接引用代码放进component中 有名字的要在父层代码中的标签上加上 slot =“” 没有名字的直接引了2.要想从父层代码向component中传不改变的值，在component中声明一个props 然后在父层中绑定（:name=“”）就传进去了3.如果要双向绑定的话，参考http://duxiao.sweetysoft.com/blog/posts/vuejs-v-model如果是object的话一定要传value 接口中的值定义也要给一个”value”作为名称4.在组件中要是想调用父层代码中方法的话先定义@click=”onClickItem()”然后 组件中的methods中加上onClickItem () { this.$emit(‘on-click-item’) }最后在父层需要调用方法的地方@on_click_item=“xxx”Xxx是在父层代码中定义的方法gg]]></content>
  </entry>
  <entry>
    <title><![CDATA[error-There was a problem with the editor vi]]></title>
    <url>%2Fposts%2F2017-10-18-error-there-was-a-problem-with-the-editor-vi.html</url>
    <content type="text"><![CDATA[1git config --global core.editor /usr/bin/vim]]></content>
      <tags>
        <tag>vim</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[解决js跨域问题]]></title>
    <url>%2Fposts%2Fundefined.html</url>
    <content type="text"><![CDATA[1.在代码端, 处理方式不变, 访问 /api + 原接口url: this.$http.get(‘/api/interface/blogs/all’)…2.在开发的时候, 继续保持vuejs 的代理存在. 配置代码如下: proxyTable: { ‘/api’: { target: ‘http://siwei.me&#39;, changeOrigin: true, pathRewrite: { ‘^/api’: ‘’ } }},3.在nginx的配置文件中,加入代理:(详细说明见代码中的注释) server { listen 80; server_name vue_demo.siwei.me; client_max_body_size 500m; charset utf-8; root /opt/app/vue_demo; # 第一步,把所有的 mysite.com/api/interface 转换成: mysite.com/interface location /api { rewrite ^(.*)\/api(.*)$ $1$2; } # 第二步， 把所有的 mysite.com/interface 的请求，转发到 siwei.me/interface location /interface { proxy_pass http://siwei.me; } }就可以了． 也就是说， 上面的配置，把 http://vue_demo.siwei.me/api/interface/blogs/all在服务器端做了个变换，相当于访问了： http://siwei.me/interface/blogs/all重启nginx , 就会发现生效了．]]></content>
  </entry>
  <entry>
    <title><![CDATA[rails - 省市县三级联动数据脚本]]></title>
    <url>%2Fposts%2Fundefined.html</url>
    <content type="text"><![CDATA[1234567891011121314151617181920212223242526272829303132require &apos;httparty&apos;require File.expand_path(File.dirname(__FILE__) + &quot;/../config/environment&quot;)require &apos;rails&apos;# 定义URLurl = &quot;http://www.helloweba.com/demo/cityselect/js/city.js&quot;response = HTTParty.get url # 获取 到结果Province.transaction do items = JSON.parse(response.body) rescue [] return if items.blank? items[&apos;citylist&apos;].each do |province| province_name = province[&apos;p&apos;] @province = Province.create :name =&gt; province_name Rails.logger.info &quot;province ==!!!!!==!!!!!== #&#123;province_name&#125;&quot; next if province[&apos;c&apos;].blank? province[&apos;c&apos;].each do |city| city_name = city[&apos;n&apos;] @city = City.create :name =&gt; city_name, :province_id =&gt; @province.id Rails.logger.info &quot;city ======== #&#123;city_name&#125;&quot; next if city[&apos;a&apos;].blank? city[&apos;a&apos;].each do |town| town_name = town[&apos;s&apos;] @town = Town.create :name =&gt; town_name, :city_id =&gt; @city.id Rails.logger.info &quot;town ======== #&#123;town_name&#125;&quot; end end end end 将直辖市放到城市表中 1234567891011121314151617181920212223# -*- encoding : utf-8 -*- require File.expand_path(File.dirname(__FILE__) + &quot;/../config/environment&quot;)require &apos;rails&apos;Rails.logger.info &quot;=== before &quot;zhi_xia_shi_ids = [1, 2, 9, 22]max_city_id = 488 zhi_xia_shi_ids.each do |province_id| zhi_xia_shi_province = Province.find province_id # 1. 把直辖市的名字，写入到 cities city = City.create :name =&gt; zhi_xia_shi_province.name, :province_id =&gt; province_id # 2. 在cities中的直辖市的各个区，写入到 town 中。 towns = City.where(&apos;province_id = ? and id &lt; ?&apos;, province_id, max_city_id) towns.each do |town| Town.create :name =&gt; town.name, :city_id =&gt; city.id # 3. 把 cities 中的直辖市的各个区，都删掉。 town.delete endend Rails.logger.info &quot;=== done&quot; puts &quot;done&quot;~]]></content>
  </entry>
  <entry>
    <title><![CDATA[BOM图]]></title>
    <url>%2Fposts%2Fundefined.html</url>
    <content type="text"><![CDATA[ztreedemo先将ztree的js文件和css文件放到项目中并引用 图片也加到assets/image中 12//= require jquery.ztree.all.min (放的哪个文件就引用哪个)*= require ztree controller 1234567891011121314151617181920def save_or_update bom_item = BomItem.find_by_id(params[:id]) if bom_item.present? bom_item.update_attributes( name: params[:name], count: params[:count], producer: params[:producer] ) redirect_to :back and return end bom_item = BomItem.new( name: params[:name], parent_id: params[:parent_id], bom_file_id: params[:bom_file_id], count: params[:count], producer: params[:producer] ) bom_item.save redirect_to :back, notice: &apos;操作成功&apos;end view–html 123&lt;div&gt; &lt;ul id=&quot;bom_tree&quot; class=&quot;ztree&quot;&gt;&lt;/ul&gt;&lt;/div&gt; view–js 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141&lt;script&gt; var ztree , nodes var setting=&#123; view: &#123; addHoverDom: addHoverDom, removeHoverDom: removeHoverDom, &#125;, edit: &#123; drag: &#123; autoExpandTrigger: true, prev: dropPrev, inner: dropInner, next: dropNext &#125;, enable: true, showRemoveBtn : true, showRenameBtn : false, removeTitle : &quot;删除&quot;, renameTitle : &quot;编辑&quot; &#125;, data: &#123; simpleData: &#123; enable: true &#125; &#125;, callback:&#123; onRemove: onRemove, onDrag: onDrag, onDrop: onDrop, &#125; &#125; nodes = &lt;%= raw @bom_item_json %&gt; function onRemove(e, treeId, treeNode) &#123; if (confirm(&quot;确定要删除么?&quot;)) &#123; url = &apos;/bom_items/&apos; + treeNode.id $.ajax(&#123; url: url, type: &apos;DELETE&apos;, success: function(result) &#123; console.info(&quot;== 树的内容已经删除&quot;) &#125; &#125;); &#125;else&#123; location.reload() &#125; &#125; var newCount = 1; function addHoverDom(treeId, treeNode) &#123; var sObj = $(&quot;#&quot; + treeNode.tId + &quot;_span&quot;); if (treeNode.editNameFlag || $(&quot;#addBtn_&quot;+treeNode.tId).length&gt;0) return; // 编辑按钮 var editStr = &quot;&lt;span class=&apos;button edit&apos; id=&apos;editBtn_&quot; + treeNode.tId + &quot;&apos; title=&apos;edit node&apos; onfocus=&apos;this.blur();&apos;&gt;&lt;/span&gt;&quot;; sObj.after(editStr); var btn = $(&quot;#editBtn_&quot;+treeNode.tId); if (btn) btn.bind(&quot;click&quot;, function()&#123; open_dialog(&quot;/bom_items/ajax_new_form?id=&quot;+ treeNode.id ) &#125;); // 新增按钮 var addStr = &quot;&lt;span class=&apos;button add&apos; id=&apos;addBtn_&quot; + treeNode.tId + &quot;&apos; title=&apos;add node&apos; onfocus=&apos;this.blur();&apos;&gt;&lt;/span&gt;&quot;; sObj.after(addStr); var btn = $(&quot;#addBtn_&quot;+treeNode.tId); if (btn) btn.bind(&quot;click&quot;, function()&#123; open_dialog(&quot;/bom_items/ajax_new_form?bom_file_id=&lt;%= params[:bom_file_id]%&gt;&amp;&amp;parent_id=&quot;+ treeNode.id ) &#125;); &#125;; function removeHoverDom(treeId, treeNode) &#123; $(&quot;#addBtn_&quot;+treeNode.tId).unbind().remove(); $(&quot;#editBtn_&quot;+treeNode.tId).unbind().remove(); &#125;; $(function()&#123; ztree = $.fn.zTree.init($(&apos;#bom_tree&apos;), setting, nodes) &#125;) $(&quot;#new_root&quot;).click(function()&#123; console.info(&quot;点了&quot;) url = &apos;/bom_items/?&amp;bom_file_id=&apos; + &lt;%= params[:bom_file_id]%&gt; $.post(url, function()&#123; console.info(&quot;== 根节点已经创建&quot;) location.reload(); &#125;) &#125;); function dropPrev(treeId, nodes, targetNode) &#123; var pNode = targetNode.getParentNode(); if (pNode &amp;&amp; pNode.dropInner === false) &#123; return false; &#125; else &#123; for (var i=0,l=nodes.length; i&lt;l; i++) &#123; var curPNode = nodes[i].getParentNode(); if (curPNode &amp;&amp; curPNode !== targetNode.getParentNode() &amp;&amp; curPNode.childOuter === false) &#123; return false; &#125; &#125; &#125; return true; &#125; function dropInner(treeId, nodes, targetNode) &#123; if (targetNode &amp;&amp; targetNode.dropInner === false) &#123; return false; &#125; else &#123; for (var i=0,l=nodes.length; i&lt;l; i++) &#123; if (!targetNode &amp;&amp; nodes[i].dropRoot === false) &#123; return false; &#125; else if (nodes[i].parentTId &amp;&amp; nodes[i].getParentNode() !== targetNode &amp;&amp; nodes[i].getParentNode().childOuter === false) &#123; return false; &#125; &#125; &#125; return true; &#125; function dropNext(treeId, nodes, targetNode) &#123; var pNode = targetNode.getParentNode(); if (pNode &amp;&amp; pNode.dropInner === false) &#123; return false; &#125; else &#123; for (var i=0,l=nodes.length; i&lt;l; i++) &#123; var curPNode = nodes[i].getParentNode(); if (curPNode &amp;&amp; curPNode !== targetNode.getParentNode() &amp;&amp; curPNode.childOuter === false) &#123; return false; &#125; &#125; &#125; return true; &#125; function onDrag(event, treeId, treeNodes) &#123; &#125; function onDrop(event, treeId, treeNodes, targetNode, moveType, isCopy) &#123; if(confirm(&apos;确定放在这里么？&apos;))&#123; url = &apos;/bom_items/&apos; + treeNodes[0].id + &apos;?parent_id=&apos; + treeNodes[0].pId $.ajax(&#123; url: url, type: &apos;PATCH&apos;, success: function(result) &#123; console.info(&quot;== 拖拽成功&quot;) &#125; &#125;); &#125; else &#123; location.reload() &#125; &#125;&lt;/script&gt; 注意：在这里没有用封装好的编辑方法 因为需要弹窗 否则可以直接用onRename方法 详情可见ztreeAPI文档]]></content>
  </entry>
  <entry>
    <title><![CDATA[vue.js--表格搜索功能]]></title>
    <url>%2Fposts%2Fundefined.html</url>
    <content type="text"><![CDATA[1.添加一个component search/index.vue 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155&lt;template&gt; &lt;table style=&quot;color: #3b3b3b;&quot;&gt; &lt;thead&gt; &lt;tr&gt; &lt;th v-for=&quot;key in columns&quot; @click=&quot;sortBy(key)&quot; :class=&quot;&#123; active: sortKey == key &#125;&quot;&gt; &#123;&#123; key == &apos;name&apos; ? &apos;物品名称&apos; : &apos;是否购买&apos;&#125;&#125; &lt;span class=&quot;arrow&quot; :class=&quot;sortOrders[key] &gt; 0 ? &apos;asc&apos; : &apos;dsc&apos;&quot;&gt; &lt;/span&gt; &lt;/th&gt; &lt;/tr&gt; &lt;/thead&gt; &lt;tbody&gt; &lt;tr v-for=&quot;entry in filteredData&quot;&gt; &lt;td v-for=&quot;key in columns&quot; @click=&quot;get_good(entry)&quot;&gt; &lt;div v-if=&quot;key == &apos;is_chosen&apos;&quot;&gt; &#123;&#123; entry[key] == false ? &apos;没有购买&apos; : &apos;已经购买&apos;&#125;&#125; &lt;/div&gt; &lt;div v-else&gt; &#123;&#123; entry[key] &#125;&#125; &lt;/div&gt; &lt;/td&gt; &lt;/tr&gt; &lt;/tbody&gt; &lt;/table&gt;&lt;/template&gt;&lt;script&gt;export default &#123; data () &#123; var sortOrders = &#123;&#125; this.columns.forEach(function (key) &#123; sortOrders[key] = 1 &#125;) return &#123; currentValue: [], sortKey: &apos;&apos;, sortOrders: sortOrders &#125; &#125;, props: &#123; value: Array, columns: Array, filterKey: String &#125;, created () &#123; this.currentValue = this.value &#125;, watch: &#123; value (val) &#123; this.currentValue = val &#125;, currentValue (newVal) &#123; this.$emit(&apos;input&apos;, newVal) &#125; &#125;, computed: &#123; filteredData: function () &#123; var sortKey = this.sortKey var filterKey = this.filterKey &amp;&amp; this.filterKey.toLowerCase() var order = this.sortOrders[sortKey] || 1 var data = this.currentValue if (filterKey) &#123; data = data.filter(function (row) &#123; return Object.keys(row).some(function (key) &#123; return String(row[key]).toLowerCase().indexOf(filterKey) &gt; -1 &#125;) &#125;) if (sortKey) &#123; data = data.slice().sort(function (a, b) &#123; a = a[sortKey] b = b[sortKey] return (a === b ? 0 : a &gt; b ? 1 : -1) * order &#125;) &#125; return data &#125; &#125;, filters: &#123; capitalize: function (str) &#123; return str.charAt(0).toUpperCase() + str.slice(1) &#125; &#125;, methods: &#123; sortBy: function (key) &#123; this.sortKey = key this.sortOrders[key] = this.sortOrders[key] * -1 &#125;, get_good(entry)&#123; console.info(entry) this.$emit(&quot;get-good&quot;, entry) &#125; &#125;&#125;&lt;/script&gt;&lt;style lang=&quot;scss&quot; scoped&gt;@import &quot;../../styles/px2rem.scss&quot;;@import &quot;../../styles/variable.scss&quot;;body &#123; font-family: Helvetica Neue, Arial, sans-serif; font-size: 14px; color: #444;&#125;table &#123; background-color: #fff; @include px2rem(width, 200px); text-align: left;&#125;th &#123; color: #3b3b3b; cursor: pointer; user-select: none;&#125;td &#123; background-color: #f9f9f9;&#125;th, td &#123; @include px2rem(min-width, 90px); padding: 10px 20px;&#125;th.active &#123; color: #fff;&#125;th.active .arrow &#123; opacity: 1;&#125;.arrow &#123; display: inline-block; vertical-align: middle; width: 0; height: 0; margin-left: 5px; opacity: 0.66;&#125;.arrow.asc &#123; border-left: 4px solid transparent; border-right: 4px solid transparent; border-bottom: 4px solid #fff;&#125;.arrow.dsc &#123; border-left: 4px solid transparent; border-right: 4px solid transparent; border-top: 4px solid #fff;&#125;&lt;/style&gt; 2.在使用的页面上 123456789101112&lt;div class=&quot;search&quot;&gt; 搜索:&lt;input v-model=&quot;search&quot; name=&quot;search&quot;/&gt; &lt;div class=&apos;close&apos; @click=&quot;show_search_page = false&quot;&gt; x &lt;/div&gt; &lt;/div&gt; &lt;div style=&quot;overflow: auto; background-color: #FFFFFF; &quot;&gt; &lt;search v-model=&quot;all_goods&quot; :columns=&quot;gridColumns&quot; :filter-key=&quot;search&quot; class=&quot;search_table&quot; @get-good=&apos;get_good&apos;&gt; &lt;/search&gt; &lt;/div&gt; 演示官方文档github]]></content>
  </entry>
  <entry>
    <title><![CDATA[rails - 查询自动刷新]]></title>
    <url>%2Fposts%2Fundefined.html</url>
    <content type="text"><![CDATA[1.在application.js页面添加上 1234567891011121314151617181920function merge_parameter_and_refresh(key, value) &#123; key = escape(key); value = escape(value); var kvp = document.location.search.substr(1).split(&apos;&amp;&apos;); if (kvp == &apos;&apos;) &#123; document.location.search = &apos;?&apos; + key + &apos;=&apos; + value; &#125; else &#123; var i = kvp.length; var x; while (i--) &#123; x = kvp[i].split(&apos;=&apos;); if (x[0] == key) &#123; x[1] = value; kvp[i] = x.join(&apos;=&apos;); break; &#125; &#125; if (i &lt; 0) &#123; kvp[kvp.length] = [key, value].join(&apos;=&apos;); &#125; //this will reload the page, it&apos;s likely better to store this until finished document.location.search = kvp.join(&apos;&amp;&apos;); &#125;&#125; 2.在view页面： 12345&lt;script&gt; $(&apos;#good_goods_first_category_id&apos;).change(function()&#123; merge_parameter_and_refresh(&apos;category_id&apos;, $(this).val()) &#125;)&lt;/script&gt; category_id 是下拉框的name]]></content>
  </entry>
  <entry>
    <title><![CDATA[js- date 格式化]]></title>
    <url>%2Fposts%2Fundefined.html</url>
    <content type="text"><![CDATA[Date.toISOString()]]></content>
  </entry>
  <entry>
    <title><![CDATA[rails-拖拽排序]]></title>
    <url>%2Fposts%2Fundefined.html</url>
    <content type="text"><![CDATA[1.Gemfile 中添加 gem ‘sortable-rails’ $ bundle2.app/assets/javascripts/application.js 中添加 12//= require sortable-rails-jquery//= require_tree . 3.确认需要拖拽排序的表中有position字段4.view 1234567891011121314151617181920212223242526272829303132&lt;tbody id=&quot;steps_sortable_table&quot;&gt; &lt;% @steps.each do |step| %&gt; &lt;tr data-id = &apos;&lt;%= step.id%&gt;&apos;&gt; ....... &lt;/tr&gt; &lt;% end %&gt; &lt;/tbody&gt;&lt;script&gt; $(&apos; #steps_sortable_table&apos; ).sortable(&#123; opacity: 0.6, revert: true, cursor: &apos;move&apos;, onUpdate: function(evt) &#123; neworder = new Array(); $(&apos;#steps_sortable_table&apos;).children().each(function() &#123; id = $(this).attr(&quot;data-id&quot;); neworder.push(&#123; id: id &#125;); &#125;); $.ajax(&#123; url: &quot;/steps/sort&quot;, type: &quot;POST&quot;, data: &#123; steps: JSON.stringify(neworder) &#125; &#125;); console.log(neworder); &#125; &#125;);&lt;/script&gt; controller 1234567891011def sort if params[:steps].present? JSON.parse(params[:steps]).each_with_index do |x, index| idx = x[&quot;id&quot;] position = index+1 step = Step.find(idx) step.update_attribute(&quot;position&quot;, position) end end render nothing: trueend]]></content>
  </entry>
  <entry>
    <title><![CDATA[三元表达式]]></title>
    <url>%2Fposts%2Fundefined.html</url>
    <content type="text"><![CDATA[条件 ? 如果是true : 如果是false例子：if @good.present? name = @good.nameelse name= ‘没有物品’end可以写成@good.present? @good.name:’没有物品’]]></content>
  </entry>
  <entry>
    <title><![CDATA[devise--用户名登录]]></title>
    <url>%2Fposts%2Fundefined.html</url>
    <content type="text"><![CDATA[1.给user表添加user_name字段 $ rails g migration add_user_name_to_user2.config/initializers/devise.rb中 config.authetication_keys=[:email]改成config.authetication_keys=[:user_name]3.使devise的登录页面可见（具体参考）修改登录页面4.给config/routes.rb中添加 1resources :users 注意: devise_for :users 一定要在resources :users上面]]></content>
  </entry>
  <entry>
    <title><![CDATA[rbenv]]></title>
    <url>%2Fposts%2Fundefined.html</url>
    <content type="text"><![CDATA[https://gist.github.com/sandyxu/8aceec7e436a6ab9621f]]></content>
  </entry>
  <entry>
    <title><![CDATA[rails-windows下安装 gem mysql2的大坑]]></title>
    <url>%2Fposts%2Fundefined.html</url>
    <content type="text"><![CDATA[1.在本地安装好mysql之后 将mysql\lib\libmysql.dll复制到railsInstall中ruby\bin下面2.gem install mysql2 -v ‘0.3.17’ - - ‘- - with -mysql-dir:”MySQL文件路径 （要到最后一个文件夹 文件夹下直接就是bind这样的文件夹的才行）”‘]]></content>
  </entry>
  <entry>
    <title><![CDATA[rails 事件回滚]]></title>
    <url>%2Fposts%2Fundefined.html</url>
    <content type="text"><![CDATA[1.在有很多存储操作时，Model.transaction doend这样一报错在这个里面的所有存储事件就都会回滚。可以避免存储很多脏数据 2.如果你想判断什么时候回滚的话Model.transaction do if … else raise ActiveRecord::Rollback endendredirect_to …注意：返回路径一定要写在transaction外面 要不然会报missing template的错误]]></content>
  </entry>
  <entry>
    <title><![CDATA[rails create&update action 取某一个params值]]></title>
    <url>%2Fposts%2Fundefined.html</url>
    <content type="text"><![CDATA[xxx_params[:xxx]]]></content>
  </entry>
  <entry>
    <title><![CDATA[网络打印机安装]]></title>
    <url>%2Fposts%2Fundefined.html</url>
    <content type="text"><![CDATA[我用的是爱宝打印机 在win10的系统下1.安装网络打印机驱动2.要么修改打印机网段（打印机网段一般为1）ps：网段：192.168.x.xxx 第三位为网段 要么修改局域网网段（一般为0）ps：修改打印机网段需要客服提供工具 自己很难改 但是修改局域网网段会影响局域网连接外网，所以这里我们还是选择修改打印机网段3.将电脑的局域网网段先改成1 1）打开网络与共享中心。 2）点击以太网 点击属性 选择TCP/IPv4双击打开 选择使用下面的IP地址 3）输入192.168.1.xxx 确定关闭 （如果是修改局域网网段就这样就可以了）4.将电脑与打印机网口直连（电脑断网） 用客服提供的工具将打印机网段设置成05.将网线连回去 将局域网设置取消6.给打印机添加端口 1）端口类型选择StandardTCP/IP 2）输入打印机ip地址 3）会显示没有找到设备 但是没关系 点击下面的自定义 协议 –&gt; Raw 端口号 –&gt; 9100 之后确定 下一步 完成就OK了！7.集成到系统上 客服还没有给我SDK 等他给我集成上之后再更新]]></content>
  </entry>
  <entry>
    <title><![CDATA[iOS 发布证书配置]]></title>
    <url>%2Fposts%2Fundefined.html</url>
    <content type="text"><![CDATA[公司账号1.先登录公司账号 invite成管理员，点击邮件中链接点选同意 钥匙串访问：钥匙串访问 –&gt; 证书助理 –&gt; 从证书办法机构请求证书 –&gt;生成CSR文件 到Xcode –&gt; preference –&gt; account 添加apple ID，并选择对应的公司账号 apple developer中 certificates 添加production证书 将CSR文件传上去 下载生成的证书，双击点开配置到电脑上 Provisioning Profiles –&gt; distribution 再申请一个证书选择ADhoc下载生成的证书双击运行ps:现在Xcode中运行的设备必须是配置distribution证书是select的设备 个人账号1.钥匙串访问： 钥匙串访问 –&gt; 证书助理 –&gt; 从证书办法机构请求证书 –&gt;生成CSR文件2.申请production证书3.申请appid（bundle id要跟xcode里面一样）4.申请distribution证书]]></content>
  </entry>
  <entry>
    <title><![CDATA[web打印]]></title>
    <url>%2Fposts%2Fundefined.html</url>
    <content type="text"><![CDATA[1.按照说明书将打印机驱动安在电脑上测试，可用之后2.在需要打印的页面，用chrome 1window.print() IE浏览器 1mywindow.print() 打印 ps：页眉，页脚，距离边上的边距都在调起打印之后更多设置里面选择设置 页眉： 日期+网页title 页脚： 网址+页数33-1.如果只想打印一部分页面，就在js里面 1234567891011121314$(&quot;#print_btn&quot;).click( function ()&#123; var old_body = $(&quot;body&quot;).html(); var new_body = $(&quot;#print_id&quot;).html(); new_body = &quot;&lt;div id=&apos;print_id&apos; style=&apos;width: 230px&apos;&gt;&quot; + new_body + &quot;&lt;/div&gt;&quot; ; //还可以让取到的html代码加上新的标签 style等 //$(&quot;#xxx&quot;).html() 和$(&quot;#xxx&quot;).innerHTML 是一样的。都取不到最外层的div（&lt;div id=&quot;xxx&quot;&gt;&lt;/div&gt;） window.document.body.innerHTML= new_body; window.print(); $(&quot;body&quot;).html(old_body); &#125;) 3-2.如果想要新开一颗窗口去打印的话就用window.open() ps:1.括号里为空的时候会新开一个tab 新开一个window的话需要window.open(“url”, “name”,”some value”,replace) window.open官方文档 2.width，height不可以写成活的 注意：1.打印的某些参数可以写在 123&lt;style&gt;@media print&#123;&#125;&lt;/style&gt; 里面,但是要特别注意空格 多一个都不会识别 所以建议都不要空格 都顶头写在ruby中要写在application.html.erb的标签里面 2.media是style的一个属性 123&lt;style&gt;@media print&#123;&#125;&lt;/style&gt; 等同于 12&lt;style media=&quot;print&quot;&gt;&lt;/style&gt; 3.如果想引入一个css文件作为样式 1234567891011121314function Popup(data) &#123; var mywindow = window.open(&apos;&apos;); mywindow.document.write(&apos;&lt;html&gt;&lt;head&gt;&lt;title&gt;&lt;/title&gt;&apos;); mywindow.document.write(&quot;&lt;%= j stylesheet_link_tag &apos;v2_editor&apos;, media: &apos;all&apos;%&gt;&quot;); mywindow.document.write(&apos;&lt;/head&gt;&lt;body &gt;&apos;); mywindow.document.write(data); mywindow.document.write(&apos;&lt;/body&gt;&lt;/html&gt;&apos;); mywindow.focus(); setTimeout(function()&#123; mywindow.print(); mywindow.close(); //取消之后会自动关闭窗口 &#125;,200); return true;&#125;]]></content>
  </entry>
  <entry>
    <title><![CDATA[二代身份证识别仪]]></title>
    <url>%2Fposts%2Fundefined.html</url>
    <content type="text"><![CDATA[我用的是华旭金卡HX-FDX35，这个是基于WindowsIE浏览器开发的1.将驱动安上（光盘中的自动安装 双击就安上了）2.安装测试软件看能不能正常读取3.布置软件 本地：双击运行active_reg.bat 服务器：将CBA文件夹拷贝到与页面相同的文件夹下面4.点击JsDemo.html 文件打开测试页面 测试一下 如果好用的话，就将测试页面的代码集成到程序需要的页面上注意：1.不要写在form里面2..标签和标签不可更改]]></content>
  </entry>
  <entry>
    <title><![CDATA[mysql重置密码]]></title>
    <url>%2Fposts%2Fundefined.html</url>
    <content type="text"><![CDATA[1.停止 MySQL 服务 $ sudo /usr/local/mysql/support-files/mysql.server stop要是不行的话 就ps -ef | grep mysqld将进程杀掉就可以了 2.进入安全模式sudo mysqld_safe –skip-grant-tablessudo /usr/local/Cellar/mysql/5.7.18_1/bin/mysqld_safe –skip-grant-tables 这个地方，如果你 alias 了 mysqlld_safe 这个命令，那么可以直接复制粘贴；如果没有，则需要加上正确的路径。在 Linux/OS X 系统下，默认路径是 /usr/local/mysql/bin/mysqld/usafe。（/usr/local/Cellar/mysql/5.7.18_1/bin/mysqld_safe）–我的路径 3.启动MySQL服务$ mysql.server start 4.修改密码进入了之后先不要急着使用 update 命令修改密码，先看看表中的字段名。不同版本密码的字段名可能不一样。 MySQL 的用户信息是存在 mysql.user 这个表里面的。于是可以先选择 mysql 这个数据库，再看数据库中 user 表中的字段名称。use mysql; //切换数据库describe user; //查看user表的字段然后确定密码字段的名称，一般可能是 Password。然而在 OS X 的 MySQL 5.7 这个版本中，密码字段名称是 authentication_string 。记住这个字段名。 然后修改密码啊：UPDATE mysql.user SET authentication_string=PASSWORD(‘123456’) where User=’root’; //将root用户密码改成 123456 5.刷新权限，使配置生效 flush privileges;最后再启动 MySQL]]></content>
  </entry>
  <entry>
    <title><![CDATA[x-code ios一些基本配置]]></title>
    <url>%2Fposts%2Fundefined.html</url>
    <content type="text"><![CDATA[1.配置http请求（可以通过http请求页面）： 在info.plist里面加上 App Transport Security Settings Allow Arbitrary Loads Yes2.配置最低适配版本： General –&gt; Development Info –&gt; Development Target 在这个development info 里面可以配置app的基本信息3.配置app图表和开机画面： General –&gt; AA Icons and Launch images 只配上面两个source就可以 在Assets.xcassets 里面添加图片 ps:要migrate4.打包发到蒲公英： Prduct –&gt; Archive]]></content>
  </entry>
  <entry>
    <title><![CDATA[新建一个ios项目 用x-code]]></title>
    <url>%2Fposts%2Fundefined.html</url>
    <content type="text"><![CDATA[1.搭建ios项目 create a new project 选择 single view application 然后填写 将项目中的storyboard文件删掉（两个） 将General –&gt; Development Info –&gt; Main Interface中的值删掉 （如果删不掉就将info.plist 文件中的Main Story base name 删掉）2.在supporting files里面新建一个pch文件点击最上方那个蓝色的项目图标（xcodeproj）build settings 里面选择 Prefix Header 配置路径（参考）3.填写pch文件中应该有的颜色 适配等信息4.$ pod init —–新建Podfile $ pod install ———-安装插件5.新建.gitignore文件 将不要上传的文件写进去6.之后就用以xcworkspace为后缀的文件打开项目(白的！！！！)7.在Appdelegate.m里面写进入ipad的默认路径 想要嵌套webview要配置info.plist 详情见x-code的一些基本配置]]></content>
  </entry>
  <entry>
    <title><![CDATA[rails-将数据库中user的password跟h5输入的匹配]]></title>
    <url>%2Fposts%2Fundefined.html</url>
    <content type="text"><![CDATA[user.valid_password?(params[:password])]]></content>
  </entry>
  <entry>
    <title><![CDATA[rails -- modal]]></title>
    <url>%2Fposts%2Fundefined.html</url>
    <content type="text"><![CDATA[第一种方法：用gem ‘bootstrap-modal-rails’使用插件1.首先在index页面中添加按钮（冻结，解冻）： 123456789 &lt;% if user.is_enabled.blank? or user.is_enabled == &quot;ture&quot; %&gt; &lt;%= link_to_modal freeze_users_path(:id =&gt; user.id), id: &quot;freeze&quot;, class: &apos;btn btn-danger&apos;, title: &quot;冻结&quot; do %&gt; &lt;%= t(&apos;freeze&apos;) %&gt; &lt;% end %&gt;&lt;% else%&gt; &lt;%= link_to t(&apos;defreeze&apos;), defreeze_users_path(:id =&gt; user.id), method: :post, class: &apos;btn btn-primary&apos;, data: &#123; confirm: &quot;确定要解冻该用户么?&quot;&#125; %&gt;&lt;% end %&gt; 2.controller的对应的action3.设置对应的route路由中。4.1 重点来了 ，需要调用modal了.首先在gemfile 中添加gem : 1gem &apos;bootstrap-modal-rails&apos;, &apos;2.2.5&apos; 4.2 在application.js 中添加: 123456789101112131415//= require bootstrap-modal //= require bootstrap-modalmanager$(document).on(&apos;click&apos;, &apos;[data-toggle=modal-ajax]&apos;, function(e) &#123; e.preventDefault(); e.stopPropagation(); console.info(); $(&apos;#modal-ajax&apos;).empty().modal().modal(&apos;loading&apos;); $.rails.handleRemote($(this)); return false; &#125;);$(document).on(&apos;ajax:beforeSend&apos;, &apos;.modal form[data-remote]&apos;, function(e) &#123; return $(this).parents(&apos;.modal&apos;).modal(&apos;loading&apos;);&#125;); 4.3 application.css中添加： 12*= require bootstrap-modal *= require bootstrap-modal-bs3patch 4.4 helpers/application_helper.rb中添加： 1234567891011121314151617181920def link_to_modal(name, options = nil, html_options = nil, &amp;block) default_options = &#123; data: &#123; toggle: &apos;modal-ajax&apos;, target: &apos;#modal-ajax&apos; &#125; &#125; if block_given? link_to(name, default_options.update(options), html_options, &amp;block) else link_to(name, options, default_options.update(html_options)) endenddef modal_header(title) %(&lt;div class=&quot;modal-header&quot;&gt; &lt;button type=&quot;button&quot; class=&quot;close&quot; data-dismiss=&quot;modal&quot; aria-hidden=&quot;true&quot;&gt;&amp;times;&lt;/button&gt; &lt;h3&gt;#&#123;title&#125;&lt;/h3&gt; &lt;/div&gt;).html_safeend def modal_footer(&amp;block) %(&lt;div class=&quot;modal-footer&quot;&gt; #&#123;capture(&amp;block)&#125; &lt;button type=&quot;button&quot; data-dismiss=&quot;modal&quot; class=&quot;btn&quot;&gt;#&#123;t(&quot;cancel&quot;)&#125;&lt;/button&gt; &lt;/div&gt;).html_safe end 4.5 layouts/application.html.rb中添加： 12&lt;!-- 全局弹出层 --&gt;&lt;div id=&quot;modal-ajax&quot; class=&quot;modal hide fade&quot; tabindex=&quot;-1&quot;&gt;&lt;/div&gt; 4.6 在视图层添加 view/users/freeze.js.erb: 123$(&apos;#modal-ajax&apos;).html(&apos;&lt;%= j(render &apos;freeze&apos;) %&gt;&apos;);$(&apos;#modal-ajax&apos;).modal();$(&quot;#modal-ajax&quot;).removeClass(&quot;hide&quot;); 4.7 在视图层添加 view/users/_freeze.html.erb, 在freeze.js.erb中render会渲染这个视图 12345&lt;%= modal_header t(&quot;freeze_user&quot;) %&gt; &lt;%= form_for @user, url: freeze_reason_users_path, :html =&gt; &#123; method: &apos;post&apos;&#125; do |f| %&gt;&lt;%#= f.radio_button :is_enabled, &apos;false&apos;, :id =&gt; &apos;user_reason&apos;, :style =&gt; &apos;margin: 0; margin-top: -22px; margin-left: 20px;&apos;, :class=&gt;&quot;stat &lt;%#= f.label :reason, &apos;冻结&apos;, :style =&gt; &apos;margin-top: -25px; margin-left: 10px;&apos; %&gt;&lt;%= f.label t(&quot;freeze_reason&quot;) %&gt;&lt;%= f.text_area :reason_of_freeze, :name =&gt; &quot;reason&quot;, :placeholder =&gt; t(&apos;freeze_placeholder&apos;), style: &quot;width: 100%; height: 80px; margi&lt;%= modal_footer do %&gt; &lt;%= f.submit t(&apos;global.submit&apos;), class: &apos;btn btn-primary&apos;%&gt; &lt;% end %&gt; &lt;% end %&gt; 参考原文 第二种方法： gem：jquery-ui-rails 自己写modaljquery-ui参考原文1.安装上jquery-ui之后2.页面上js 1234567891011121314151617$(function() &#123; dialog = $( &quot;#dialog&quot; ).dialog(&#123; autoOpen:false, modal: true, &#125;);&#125;);//打开弹窗function open_dialog(url)&#123; dialog.dialog(&apos;open&apos;); $.get(url,function(data)&#123; $(&apos;#dialog&apos;).html(data) &#125;)&#125;//关闭弹窗function close_dialog()&#123; $(&apos;#dialog&apos;).dialog(&apos;close&apos;)&#125; html: 123 &lt;div id=&quot;dialog&quot; title=&quot;新建工序&quot; style=&quot;display:none&quot;&gt;&lt;/div&gt; &lt;%= link_to_function &apos;新增&apos;, &quot;open_dialog(&apos;/steps/ajax_new_form?craft_id=#&#123;params[:craft_id]&#125;&apos;)&quot;, id: &quot;opener&quot;, class: &apos;btn btn-primary&apos; %&gt; 关闭按钮： 1&lt;%= link_to_function &apos;返回&apos;, &apos;close_dialog()&apos;, class: &quot;btn btn-default btn-small&quot; %&gt; 注意： rails及以后是不可以直接使用link_to_function的要在application helper里面 加上 123456789def link_to_function(name, *args, &amp;block) html_options = args.extract_options!.symbolize_keys function = block_given?? update_page(&amp;block) : args[0] || &apos;&apos; onclick =&quot;#&#123;&quot;#&#123;html_options[:onclick]&#125;;&quot; if html_options[:onclick]&#125;#&#123;function&#125;; return false;&quot; href = html_options[:href] || &apos;#&apos; content_tag(:a, name, html_options.merge(:href =&gt; href, :onclick =&gt; onclick)) end]]></content>
  </entry>
  <entry>
    <title><![CDATA[highchart]]></title>
    <url>%2Fposts%2Fundefined.html</url>
    <content type="text"><![CDATA[想添加图表时使用highchart1.在Gemfile中 添加 1gem &quot;highcharts-rails&quot; $ bundle install2.在application.js中 12//= require highcharts//= require highcharts/highcharts-more 3.在页面上HTML： 1&lt;div id=&quot;container&quot; style=&quot;min-width:800px;height:400px&quot;&gt;&lt;/div&gt; js： 1234567891011121314151617181920212223var chart = new Highcharts.Chart(&apos;container&apos;, &#123;// 图表初始化函数，其中 container 为图表的容器 div chart: &#123; type: &apos;bar&apos; //指定图表的类型，默认是折线图（line） &#125;, title: &#123; text: &apos;我的第一个图表&apos; //指定图表标题 &#125;, xAxis: &#123; categories: [&apos;苹果&apos;, &apos;香蕉&apos;, &apos;橙子&apos;] //指定x轴分组 &#125;, yAxis: &#123; title: &#123; text: &apos;something&apos; //指定y轴的标题 &#125; &#125;, series: [&#123; //指定数据列 name: &apos;小明&apos;, //数据列名 data: [1, 0, 4] //数据 &#125;, &#123; name: &apos;小红&apos;, data: [5, 7, 3] &#125;]&#125;); ps：1.官方文档 2.坑： 1）series中的data必须是数组 如果是从controller中取值: 若取得值为数组则直接输出在rails中&lt;%= @xxx%&gt; 若只有一个值则写成[&lt;%= @xxx%&gt;] 2)xAxis中的categories必须是数组 若在controller中取值 必须用raw]]></content>
  </entry>
  <entry>
    <title><![CDATA[cancancan & 动态权限]]></title>
    <url>%2Fposts%2Fundefined.html</url>
    <content type="text"><![CDATA[参考参考的参考关于cancancan1关于cancancan2关于cancancan3官方文档rake permissions:permissions]]></content>
  </entry>
  <entry>
    <title><![CDATA[css 白线]]></title>
    <url>%2Fposts%2Fundefined.html</url>
    <content type="text"><![CDATA[]]></content>
  </entry>
  <entry>
    <title><![CDATA[rails sql 多表联查]]></title>
    <url>%2Fposts%2Fundefined.html</url>
    <content type="text"><![CDATA[俩表联查（A中有B的外键） 1A.joins(:B) 三表联查1）如果A中有B和C的外键 1A.joins(:B, :C) 2)如果A中有B的外键，B中有C的外键 1A.joins(B: :C)]]></content>
  </entry>
  <entry>
    <title><![CDATA[js--字符串包含]]></title>
    <url>%2Fposts%2Fundefined.html</url>
    <content type="text"><![CDATA[indexOf用法: if (route.indexOf(“repaire_staffs”) != -1){ document.title = “维修人员” } 用 -1这个值来判断 不包含就会返回-1]]></content>
  </entry>
  <entry>
    <title><![CDATA[微信小程序]]></title>
    <url>%2Fposts%2F2017-07-07-2024609.html</url>
    <content type="text"><![CDATA[官方文档wxml1.不用div标签 用代替 2.条件渲染： 在框架中，我们用 wx:if=”“ 来判断是否需要渲染该代码块： 1&lt;view wx:if=&quot;&#123;&#123;condition&#125;&#125;&quot;&gt; True &lt;/view&gt; 也可以用 wx:elif 和 wx:else 来添加一个 else 块： 123&lt;view wx:if=&quot;&#123;&#123;length &gt; 5&#125;&#125;&quot;&gt; 1 &lt;/view&gt;&lt;view wx:elif=&quot;&#123;&#123;length &gt; 2&#125;&#125;&quot;&gt; 2 &lt;/view&gt;&lt;view wx:else&gt; 3 &lt;/view&gt; 3.循环：wx:for 多级循环4.接口 需要在后台配置之后才能用 必须是https post接口往后台传数据的时候在wx:request中的data赋值 不用setdata5.页面跳转： 123wx.navigateTo(&#123; url: &apos;test?id=1&apos;&#125;)//保留当前页面 跳转到应用内的某个页面 123wx.redirectTo(&#123; url: &apos;test?id=1&apos;&#125;)//关闭当前页面 跳转到应用内的某个页面 1234567891011121314 &#123; &quot;tabBar&quot;: &#123; &quot;list&quot;: [&#123; &quot;pagePath&quot;: &quot;index&quot;, &quot;text&quot;: &quot;首页&quot; &#125;,&#123; &quot;pagePath&quot;: &quot;other&quot;, &quot;text&quot;: &quot;其他&quot; &#125;] &#125;&#125;wx.switchTab(&#123; url: &apos;/index&apos;&#125;)//跳转到tabbar页面 并关闭所有其他tabbar页面 6.赋值：setdata7.上传图片 wx:uploadfile url写后台创建接口 formdata是要传到后台数据 多张图片上传用for循环选择图片显示 用wx.chooseImage tip:1.wx.navigateTo 和 wx.redirectTo 不允许跳转到 tabbar 页面，只能用 wx.switchTab 跳转到 tabbar 页面2.console.log 不可以写在wx.xxx这种方法的里面]]></content>
      <tags>
        <tag>wechat</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[rails csv导出]]></title>
    <url>%2Fposts%2F2017-07-03-1996200.html</url>
    <content type="text"><![CDATA[1.在helper中定义一个导出方法 不能定义在model中 send_data方法不可以在model中用 1234567891011121314151617181920212223# -*- encoding : utf-8 -*-def generate_csv_by_bonus(cash_desks ,day_array)---传进来的参数 headers = ['品类', '收款台号']-----标题显示 day_array.each do |day| headers.push(day.strftime("%Y-%m-%d")) end file = CSV.generate do |csv| # 先放 header csv &lt;&lt; headers # 再放 csv 的内容 cash_desks.each do |cash_desk| result = [] result &lt;&lt; cash_desk.category.name result &lt;&lt; cash_desk.name day_array.each do |day| result &lt;&lt; cash_desk.sales_checks.where("created_at &gt;= '#&#123;day.beginning_of_day&#125;' and created_at &lt;= '#&#123;day.end_of_day&#125;'").sum(:award_amount).to_f/100 end csv &lt;&lt; result end end send_data file.encode("gbk", "utf-8"), :type =&gt; 'text/csv; charset=gbk; header=present', :disposition =&gt; "attachment;filename=欧亚卖场&gt;&gt;收银台统计表.csv" end 2.在controller中定义一个export方法 1234567# -*- encoding : utf-8 -*-include ApplicationHelper def export @cash_desks = CashDesk.where("name not like ?" , '%-removed') @day_array = SalesCheck.where("created_at &gt;= '#&#123;Settings.from&#125;' and created_at &lt;= '#&#123;Settings.to&#125;'").group('created_at').map&#123;|sales_check| sales_check.created_at.beginning_of_day &#125;.uniq.compact Tool.generate_csv_by_bonus(@cash_desks ,@day_array) end 3.在routes.rb中声明这个方法（get）4.view页面上 12345&lt;div class="search-field"&gt; &lt;%= link_to export_orders_path(format: "csv", params: params), class: 'btn btn-success sub_button' do%&gt; &lt;i class="icon icon-download-alt"&gt;&lt;/i&gt;导出 &lt;% end %&gt;&lt;/div&gt; ps: 123456CSV.generate(:colsep =&gt; '\t', :rowsep =&gt; '\r\n') do |csv| csv &lt;&lt; ["登录名称", "真实姓名", "组织机构"] users.each do |user| csv &lt;&lt; [user.loginname, user.realname, user.categoriesstr] endend.encode('gb2312', :invalid =&gt; :replace, :undef =&gt; :replace, :replace =&gt; "?")//解决了下载的csv乱码的bug]]></content>
      <tags>
        <tag>ruby</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[在vue 中 放大缩小图片]]></title>
    <url>%2Fposts%2F2017-06-28-1980974.html</url>
    <content type="text"><![CDATA[Vue-preview1.在package.json dependencies里面加上“vue-preview”: “^1.0.5”,2.在main.js里面引用：import VuePreview from ‘vue-preview’Vue.use(VuePreview)3.html:&lt;img class=”preview-img” v-for=”(item, index) in list” :src=”item.src” height=”100” @click=”$preview.open(index, list)”&gt; 注意 ： 图片形式必须为 { src: ‘https://placekitten.com/600/400&#39;, w: 600, h: 400}]]></content>
      <tags>
        <tag>vue</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[搭建环境 --mysql安装的坑]]></title>
    <url>%2Fposts%2F2017-06-24-1971551.html</url>
    <content type="text"><![CDATA[代码拉下来以后，bundle install 的时候 mysql2死活安装不上要先$ brew install mysql之后才能安装上gemfile中的mysql]]></content>
      <tags>
        <tag>bug</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[rspec---单元测试]]></title>
    <url>%2Fposts%2F2017-06-20-1963767.html</url>
    <content type="text"><![CDATA[配置环境 add to Gemfile:12345678# Gemfile: gem 'rspec-rails', '~&gt; 3.5.2'然后运行：$ bundle exec rails generate rspec:install记得要把生成的.rspec 文件做个修改，删掉# .rspec file:--color # NO --warning, --require spec_helper 下面是测试lib文件的一个例子： make sure your have this: config/application.rbconfig.autoload_paths += %W(#{config.root}/lib)test a file in lib folder: 123456789require 'rails_helper' # 这句话极度重要. require 'html_parser' # it's not require 'lib/html_parser'describe HtmlParser do it 'should parse html_content' do puts 'hihihi' end end 测试文件示例 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253require 'rails_helper'describe OrderDishesLabelsController do render_views before do admin_login request.env["HTTP_REFERER"] = root_path @order_dishes_label = OrderDishesLabel.create :name =&gt; "多辣" end it 'should get index' do get :index response.should be_success response.code.should == '200' end it 'should get show' do get :show, :id =&gt; @order_dishes_label.id response.should be_success assigns(:order_dishes_label).name.should == "多辣" end it 'should get new' do get :new response.should be_success end it 'should post create' do name = "少盐" post :create, &#123; :order_dishes_label =&gt; &#123; :name =&gt; name &#125; &#125; OrderDishesLabel.last.name.should == name end it 'should get edit' do get :edit, :id =&gt; @order_dishes_label.id response.should be_success end it 'should put update' do new_name = "少糖" put :update, &#123; :id =&gt; @order_dishes_label.id , :order_dishes_label =&gt; &#123; :name =&gt; new_name &#125; &#125; OrderDishesLabel.find(@order_dishes_label.id).name.should == new_name end it 'should delete destroy' do size_before_delete = Order_dishes_label.all.size delete :destroy, :id =&gt; @order_dishes_label.id Order_dishes_label.count.should == size_before_delete - 1 endend 测试：bundle exec rspec 文件名]]></content>
      <tags>
        <tag>ruby</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[程序中的等于判断]]></title>
    <url>%2Fposts%2F2017-06-12-program-is-equal-to-the-judgment.html</url>
    <content type="text"><![CDATA[1.sql语句中： =2.ES6的js： ===3.大部分的脚本语言中： ==]]></content>
      <tags>
        <tag>base</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[js--根据选择不同 页面局部刷新]]></title>
    <url>%2Fposts%2F2017-06-08-js-depending-on-the-selected-page-partial-refresh.html</url>
    <content type="text"><![CDATA[12345678910111213141516&lt;div class="detail-tr form-action"&gt; &lt;%= f.select(:good_id, Good.where(:goods_first_category =&gt; '1').map&#123;|g| [g.name, g.id]&#125;, &#123;:include_blank=&gt;"请选择菜品用料"&#125;, :style =&gt; 'width: 200px;') %&gt; &lt;%= f.text_field :amount, placeholder: '请输入菜品用量' %&gt;&lt;p style="display:inline-block" id="material_unit"&gt;&lt;/p&gt; &lt;%= link_to_remove_association('删除', f, &#123; wrapper_class: 'detail-tr' &#125;)%&gt; &lt;%= f.hidden_field :id %&gt;&lt;/div&gt;&lt;script&gt;$('#dish_materials_attributes_0_good_id（select的id）').change(function()&#123; id = $(this).val() $.get('/interface/goods/' + id, function(data)&#123; $('#material_unit').text(data.unit) &#125;)&#125;)&lt;/script&gt;]]></content>
      <tags>
        <tag>js</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[gem --- cocoon]]></title>
    <url>%2Fposts%2F2017-05-22-cocoon.html</url>
    <content type="text"><![CDATA[1.Inside your Gemfile add the following: gem “cocoon” 2.Add the following to application.js so it compiles to the asset pipeline: //= require cocoon 3.model文件中添加（一级）accepts_nested_attributes_for :tasks, allow_destroy: true 4.在一级model的controller里面的params里面加上tasks_attributes: [:id, :description, :done, :_destroy(有这个才能删除)]以数组形式存入数据在def new下面加上@dish.materials.build 5.form 文件中添加 1234567891011&lt;div class=&quot;form-action&quot;&gt; &lt;%= link_to_add_association &apos;新增用料&apos;, f, :materials, class: &apos;btn btn-success&apos;, &apos;data-association-insertion-node&apos; =&gt; &apos;.materials&apos;, &apos;data-association-insertion-method&apos; =&gt; &apos;append&apos; %&gt; &lt;/div&gt; &lt;div class=&quot;materials&quot;&gt; &lt;%= f.fields_for :materials do |m| %&gt; &lt;%= render &apos;material_fields&apos;, f: m %&gt; &lt;% end %&gt; &lt;/div&gt; 12345678&lt;div class=&quot;detail-tr form-action&quot;&gt; &lt;%= f.hidden_field :id %&gt; &lt;%= f.select(:good_id, Good.where(:goods_first_category =&gt; &apos;1&apos;).map&#123;|g| [g.name, g.id]&#125;, &#123;:include_blank=&gt;&quot;请选择菜品用料&quot;&#125;, :style =&gt; &apos;width: 200px;&apos;) %&gt; &lt;%= f.text_field :amount, placeholder: &apos;请输入菜品用量&apos; %&gt;g &lt;%= link_to_remove_association(&apos;删除&apos;, f, &#123; wrapper_class: &apos;detail-tr&apos; &#125;)%&gt; #只有model中添加了那个destroy 才能用 &lt;/div&gt; ps: 1.要注意各个地方的名称对应 2.要给多个地方联动取值的时候 用tag+mark 或者 clas+mark ，不要用id+mark（这样只能取到第一个值）]]></content>
      <tags>
        <tag>ruby gem</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[select 2]]></title>
    <url>%2Fposts%2F2017-05-19-select-2.html</url>
    <content type="text"><![CDATA[1.在view表单中添加下拉单， :multiple =&gt; true, 选择一个数组 123456&lt;div class=&quot;control-group&quot;&gt; &lt;%= f.label t(&apos;global.user&apos;), :class =&gt; &apos;control&apos; %&gt; &lt;div class=&quot;controls&quot;&gt; &lt;%= select_tag(:user_id, options_from_collection_for_select(User.all, &quot;id&quot;, &quot;nickname&quot;), :multiple=&gt;true)%&gt; &lt;/div&gt; &lt;/div&gt; 2.在对应controller 中添加方法： (transaction ：Rails 中的事务处理， 事务用来确保多条SQL语句要么全部执行成功、要么不执行。事务可以帮助开发者保证应用中的数据一致性。常见的使用事务的场景是银行转账，钱从一个账户转移到另外一个账户。如果中间的某一步出错，那么整个过程应该重置。) 123456789101112def create params[:user_id].each do |id| Message.transaction do @message = Message.create( content: params[:message][:content], title: params[:message][:title], user_id: id ) end end redirect_to messages_pathend 3.使用select2gem “select2-rails”, ‘3.5.2’ #gem中添加//= require select2 # application.js中添加 *= require select2 # application.css 中添加4.在view 表中页面中 添加 代码： 123$( &quot;#user_id&quot; ).select2(&#123; theme: &quot;bootstrap&quot;&#125;); ps: 在新建页面上显示placeholder编辑页面显示选中的值true, :style=>"min-width: 200px", data: {placeholder: "例如:厨师长"}) %>]]></content>
      <tags>
        <tag>ruby html</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[capistrano---自动化部署]]></title>
    <url>%2Fposts%2Fundefined.html</url>
    <content type="text"><![CDATA[1.添加Gemfile (bundle install)group :development gem ‘capistrano’, ‘2.12.0’ gem ‘capistrano-rbenv’, ‘1.0.1’end2.运行 $ capify . (会生成两个文件)$ capify .capify .[skip] ‘./Capfile’ already exists[skip] ‘./config/deploy.rb’ already exists[done] capified!会生成两个关键性的文件： Capfile , config/deploy.rb下面是一个完整的 部署脚本( config/deploy.rb )的例子, 修改其中的 用户名,端口号, 目标服务器的域名 , 服务器的启动方式, 就可以直接运行了.: -- encoding : utf-8 --require ‘capistrano-rbenv’load ‘deploy/assets’SSH_USER = ‘你的用户名’SSH_PORT = ‘你的端口号’server = “目标服务器的域名或者ip”FOLDER_IN_REMOTE_SERVER = ‘远程服务器上的目标文件夹’ ssh_options[:port] = SSH_PORTset :rake, “bundle exec rake”set :application, “app name”set :repository, “.”set :scm, :noneset :deploy_via, :copy role :web, serverrole :app, serverrole :db, server, :primary =&gt; truerole :db, server set :deploy_to, FOLDER_IN_REMOTE_SERVERdefault_run_options[:pty] = true change to your usernameset :user, SSH_USER namespace :deploy do task :start do run “cd #{release_path} &amp;&amp; bundle exec thin start -C config/thin.yml” end task :stop do run “cd #{release_path} &amp;&amp; bundle exec thin stop -C config/thin.yml” end task :restart, :roles =&gt; :app, :except =&gt; { :no_release =&gt; true } do db_migrate stop sleep 2 start end task :db_migrate do run “cd #{release_path} &amp;&amp; bundle install” run “cd #{release_path} &amp;&amp; bundle exec rake db:migrate RAILS_ENV=production” end namespace :assets do task :precompile do #run “bundle install” #run “cd #{release_path} &amp;&amp; bundle exec rake RAILS_ENV=production RAILS_GROUPS=assets assets:precompile “ end endend desc “Copy database.yml to release_path”task :cp_database_yml do puts “=== executing my customized command: “ run “cp -r #{shared_path}/config/* #{release_path}/config/“ run “ln -s #{shared_path}/files #{release_path}/public/files” 因为在开发机器上会存在这个文件夹，所以需要先把它删掉，再 ln run “rm #{release_path}/public/uploads -rf” run “ln -s #{shared_path}/public/uploads #{release_path}/public/uploads” puts “=== done (executing my customized command)”end before “deploy:assets:precompile”, :cp_database_yml #after “deploy”, “deploy:restart”第一次运行时,要先 配置好目标服务器上的文件夹.$ cap deploy:setup注意: 这里让它创建基本的目标文件夹目录层次就可以:/opt/app: current (这是个软链接 soft link, )-&gt; /opt/app/releases/20150518030114/ releases/ shared/ assets config files log pids public system为 shared 目录下，增加各种配置文件，它们只需要被配置一遍。例如：config/thin.yml # 服务器的配置config/database.yml # 数据库的配置config/log4r.yml # 日志文件的配置config/settings.yml # 系统的配置配置好ruby环境， mysql, thin, nginx 等开始部署$ bundle exec cap deploy.这个命令会执行下面的过程:准备启动服务器:安装各种新增的rubygem做必要的数据库迁移配置各种文件修改上传文件夹的softlink其他,每次使用裸代码做部署的时候,都要人肉做的事情. (修改保存日志的路径, 修改 rails server的配置, )编译,压缩 js/ css重启 服务器( $ nginx -s reload, $ kill -9 xxx , $ thin start -C config/thin.yml) 参考1参考2]]></content>
  </entry>
  <entry>
    <title><![CDATA[阿里云ssl证书配置的坑]]></title>
    <url>%2Fposts%2F2017-05-15-1839693.html</url>
    <content type="text"><![CDATA[正常来说只要按照阿里云给的说明配置就可以了 但是会遇到很多神奇的坑如下：1.Nginx配置的时候要在服务器上查询 使用的Nginx文件位置 which nginx2.遇到ssl不识别的问题就要重新编译 123$./configure –prefix=/usr/local/nginx/ –with-http_ssl_module$make$make install 注意：1）在编译之前需要将Nginx先停掉 如果Nginx文件已经配置完无法停掉时，就将ssl相关代码注释掉之后再编译 2）编译需要有源代码的情况下 如果没有就要去官网上下载一个 用命令下载并解压下下来的tar.gz文件 12$wget 网址$tar zxvf 文件名 3.端口必须用443]]></content>
      <tags>
        <tag>server</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[给已有的h5项目导入vuex]]></title>
    <url>%2Fposts%2F2017-05-12-1822532.html</url>
    <content type="text"><![CDATA[1.npm install vuex –verbose2.将App.vue 更名为 main.vue3.将main.js中引用文件改成main.vue4.新建views 和 vuex 文件夹。并将vuex中文件导入5.测试 在main.vue 中引用 然后用mounted函数console.info]]></content>
      <tags>
        <tag>vuex</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[vue.js h5项目搭建]]></title>
    <url>%2Fposts%2F2017-05-12-1821610.html</url>
    <content type="text"><![CDATA[1.在远程（coding.net/github）上面先建立一个项目2.安装cli npm install -g vue-cli3.建立vue.js项目 vue init webpack 文件名4.npm install5.git init git add . git commit -m”init commit” git remote add origin 远程网址 git pull origin master git push -u origin master6.添加Gemfile 123source &apos;https://ruby.taobao.org/&apos;gem &apos;capistrano&apos;, &apos;2.12.0&apos;gem &apos;capistrano-rbenv&apos;, &apos;1.0.1&apos; 然后bundle7.添加deploy文件 capify .7.添加deploy.rb里面脚本内容8.cap deploy:setup9.cap deploy10.到远程配置Nginx 进到/etc/nginx-1.11.10/conf/nginx.conf 里面 更改server下面的listen端口号 更改server下面的location的root 本地运行vue项目1.npm install2.npm run dev]]></content>
      <tags>
        <tag>vue</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[dydm-shsd-wvle-rlbh]]></title>
    <url>%2Fposts%2Fundefined.html</url>
    <content type="text"><![CDATA[dydm-shsd-wvle-rlbh]]></content>
  </entry>
  <entry>
    <title><![CDATA[在ios中调用web接口]]></title>
    <url>%2Fposts%2F2017-04-06-calls-the-web-interface-in-ios.html</url>
    <content type="text"><![CDATA[NSURLRequest *request = [NSURLRequest requestWithURL:[NSURL URLWithString:[NSString stringWithWebRoute:@&quot;interface/categories&quot;]]]; NSData *response = [NSURLConnection sendSynchronousRequest:request returningResponse:nil error:nil]; NSError *error; responseHash = [NSJSONSerialization JSONObjectWithData:response options:NSJSONReadingMutableLeaves error:&amp;error]; ps:stringWithWebRoute 是一个自定义的方法 +(NSString)stringWithWebRoute:(NSString)route { return [NSString stringWithRoute:route domainName:WEB_SERVER andId:YES]; } 后面接的是web接口的地址]]></content>
      <tags>
        <tag>oc</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ios navigation declare]]></title>
    <url>%2Fposts%2F2017-04-06-ios-navigation-declare.html</url>
    <content type="text"><![CDATA[self.navigation = (CustomNavigationController*) self.navigationController; 查看navigation是否为空po self.navigation ps:一般在ios webview中没有特殊报错，但是又无法实现功能时 经常是navigation为空，在(void)viewDidLoad中声明一下就好了]]></content>
      <tags>
        <tag>oc</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[markdown简明教程]]></title>
    <url>%2Fposts%2Fmarkdown%20%E7%AE%80%E6%98%8E%E6%95%99%E7%A8%8B.html</url>
    <content type="text"><![CDATA[Markdown 学习Markdown 是一种轻量级的「标记语言」，它的优点很多，目前也被越来越多的写作爱好者，撰稿者广泛使用。看到这里请不要被「标记」、「语言」所迷惑，Markdown 的语法十分简单。常用的标记符号也不超过十个，这种相对于更为复杂的HTML 标记语言来说，Markdown 可谓是十分轻量的，学习成本也不需要太多，且一旦熟悉这种语法规则，会有一劳永逸的效果。 MarkdownPad2.5 注册码邮箱：Soar360@live.com 授权秘钥：GBPduHjWfJU1mZqcPM3BikjYKF6xKhlKIys3i1MU2eJHqWGImDHzWdD6xhMNLGVpbP2M5SN6bnxn2kSE8qHqNY5QaaRxmO3YSMHxlv2EYpjdwLcPwfeTG7kUdnhKE0vVy4RidP6Y2wZ0q74f47fzsZo45JE2hfQBFi2O9Jldjp1mW8HUpTtLA2a5/sQytXJUQl/QKO0jUQY4pa5CCx20sV1ClOTZtAGngSOJtIOFXK599sBr5aIEFyH0K7H4BoNMiiDMnxt1rD8Vb/ikJdhGMMQr0R4B+L3nWU97eaVPTRKfWGDE8/eAgKzpGwrQQoDh+nzX1xoVQ8NAuH+s4UcSeQ== 使用 Markdown 的优点 专注你的文字内容而不是排版样式。 轻松的导出 HTML、PDF 和本身的 .md 文件。 纯文本内容，兼容所有的文本编辑器与字处理软件。 可读，直观。适合所有人的写作语言。 工具工具茫茫多 windows 下 markdownPad2 在线 http://md.birdteam.net/ 语法标题标题有六级由 # 组成类比于 h1 ~ h6 123456# 这是一级标题（H1，通常用于文档标题） ## 这是二级标题（H2，有些渲染器会为二级标题添加 hr 底线） ### 这是三级标题（H3） #### 这是四级标题（H4） ##### 这是五级标题（H5） ###### 这是六级标题（H6） 注：在#后加一个空格再跟标题 首行缩进&emsp;&emsp;写文章时，我们常常希望能够首行缩进，这时可以在段首加入&amp;ensp;或&amp;nbsp来输入一个空格.加入&amp;emsp;来输入两个空格。这里的空格是英文状态的空格，英文状态的两个空格相当于中文状态的一个空格 添加空行添加空行可以结束先前的格式状态。个人建议在改变格式时，均添加一个空行 文本 123456789&gt;引用状态[空行]### 标题状态[空行]------[空行]- 列表状态- 列表状态[空行] 效果 引用状态 标题状态 列表状态 列表状态 换行换行的时候 结尾要加上 两个空格。 斜体与粗体斜体：使用 两个星号 ** 中间夹杂的就是 斜体, 例如：斜体粗体： 使用 四个星号 **** 中间夹杂的就是 粗体, 例如：粗体 无序列表使用 + - * 都表示无序列表注：后面也需要跟一个空格 例如： 使用 - 号 吃饭 睡觉 打豆豆 再打豆豆 接着打豆豆 使用 + 号 吃饭 睡觉 打豆豆 使用 * 号 吃饭 睡觉 打豆豆 有序列表使用 1. 2. 3. 可以表示有序列表注：后面也需要跟一个空格例如： 买菜 洗菜 切菜 炒菜 吃菜 洗碗 引用使用 &gt; 表示引用 海明威曾经写过：我可以被杀死，但是不可以被打败 表格 默认对齐 居左对齐 居中对齐 居右对齐 窗前 明月 光 ， 疑是 地上 霜 ， 姓名 性别 年纪 班级 张三 男 29 0830 李四 女 28 0830 时间 地点 人物 事件事件事件事件事件事件事件 上午 北京 我 吃面 注：表格开始与结尾都需要一行空行 插入代码插入代码的方式有两种 在每行代码前加入4个空格或者添加一个制表符（TAB键） 在代码两侧添加三个反引号‘123456789101112131415161718192021#### 方式一其缩进是相对于当前格式状态下的。文本- 列表项- 列表项 [TAB][TAB]printf(&quot;hello world!&quot;);效果- 列表项- 列表项 printf(&quot;hello world!&quot;);在列表项状态下，需要输入两次TAB键(制表符)才能以代码格式插入。#### 方式2反引号最好在代码的前后行添加，而不是直接加在代码两边。- 使用这个符号 ` `` ` 中间夹`&lt;br&gt;`着代码 - `&lt;br&gt;`- 使用 三个 ` 符号成对夹代码 好好学习 天天向上 锻炼身体 ``` 连接百度http://www.baidu.com 图片 限制图片大小并居中许多 MarkDown 编辑器中直接按原图大小显示图片，造成版面凌乱。使用该命令&lt;img src=&quot;图片地址&quot; width=&quot;图片显示宽度&quot; height=&quot;显示高度&quot; alt=&quot;图片名称&quot;/&gt;设置图片大小，再用&lt;div style=&quot;text-align:center&quot;&gt;&lt;/div&gt;命令包裹达到居中效果。 实践简书 http://www.jianshu.com/github https://github.com/ 参考资料官网地址： http://wowubuntu.com/markdown/basic.html]]></content>
      <tags>
        <tag>markdown</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[OC-页面跳转]]></title>
    <url>%2Fposts%2F2017-03-09-1526311.html</url>
    <content type="text"><![CDATA[1.新建一个controller，在目标controller.h文件下 @property (nonatomic, strong) NSString * currentRoute; 2.在源头文件下webview下1）if ([currentRoute containsString:@”slider_show”]) { SliderDetailViewController * sliderShow = [[SliderDetailViewController alloc]init]; sliderShow.currentRoute = currentRoute; 2）interface之后添加 @property(nonatomic,strong)UIWebView *webView; 3）上方添加#import “HomeViewController.h”—想要跳转到的页面 ps:.m文件是显示的页面webview .h是封装各种方法使用的 vue.js 如果是与h5交互的页面跳转 要在main.js中添加 12345678910111213141516router.beforeEach((to, from, next) =&gt; &#123; console.info(to) console.info(from) console.info(&apos;跳转了&apos;) let link if (to.query.client === &apos;ios&apos;) &#123; link = true &#125; else if (from.query.client === &apos;ios&apos;)&#123; console.info(&apos;full_path ===&apos; + to.fullPath) window.location.href = &apos;http://link_to&apos; + to.fullPath link= false &#125; else &#123; link = true &#125; next(link)&#125;) 要不然会只在一个页面进行h5页面之间的跳转 不会进行webview之间的跳转rails 则不需要 可以直接进行跳转]]></content>
      <tags>
        <tag>oc</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[远程部署代码]]></title>
    <url>%2Fposts%2F2017-03-08-1522514.html</url>
    <content type="text"><![CDATA[web：1.登录到远程 ssh root@www.siwei.tech -p 358882.进到 /opt/app/pin_tuan_bao_web/current 3.git pull 将代码拉下来 如果有migration就 bundle exec rake db:migrate 如果有js或者css就 bundle exec rake assets:precompile RAILS_ENV=production 4.重启远程服务器： bundle exec thin restart -C config/thin.yml h5：首次就是先bundle在本地bundle exec cap deploy]]></content>
      <tags>
        <tag>server</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[程序基础]]></title>
    <url>%2Fposts%2F2017-03-04-1505854.html</url>
    <content type="text"><![CDATA[对象：数据方法：对象的行为参数：执行方法时必须的条件]]></content>
      <tags>
        <tag>base</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[将按钮变成图片]]></title>
    <url>%2Fposts%2F2017-03-02-the-button-into-a-picture.html</url>
    <content type="text"><![CDATA[1234567&lt;div class="image-upload"&gt; &lt;label for="file-input"&gt; &lt;img src="placeholder.jpg"/&gt; &lt;/label&gt; &lt;input id="file-input" type="file"/&gt;&lt;/div&gt; With styling: 1234.image-upload &gt; input&#123; display: none;&#125;]]></content>
      <tags>
        <tag>html</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[rails--model删除]]></title>
    <url>%2Fposts%2F2017-02-25-1465367.html</url>
    <content type="text"><![CDATA[destroy: 会删掉 关联表的 数据（通过调用关联表的方法） delete : 不会。 只会删掉当前对象对应的表。 例子： 老王去世了。 老王有20张银行卡。 如果： 我们是上帝。 我们就可以这样写： laowang.destroy (老王的银行卡也会被删掉） laowang.delete （只删掉老王， 保留银行卡）]]></content>
      <tags>
        <tag>ruby</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[form]]></title>
    <url>%2Fposts%2F2017-02-25-1465322.html</url>
    <content type="text"><![CDATA[]]></content>
      <tags>
        <tag>html</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[2017/2/22--做从h5页面往后台传数据有感]]></title>
    <url>%2Fposts%2F2017-02-22-1450430.html</url>
    <content type="text"><![CDATA[之前一直做接口，都是将后台的数据集成到前端页面，好容易熟悉了。。。。今天就要做从前端向后台传送数据（用户预约，后台显示数据）混乱的一天，心得如下 如果想像后台传id但不是网址后方的那个而是另一个的话要在h5页面的script标签中data里面，加上你要传的id名称。初始值 赋为0，类似于index。 然后在created里面加上this.xxx = response.body.xxx(后面的这个xxx为你所在的这个界面接口中的这个变量的名称) 之后在method里定义的方法中里面的params加上 xxx: this.xxx 最后在后台的你要执行的操作的接口后面加上这个参数 或者 直接在接口的那个action中添加用case_id找到相对应的case，然后找到对应的设计师。 再将参数写在要执行的接口后面]]></content>
      <tags>
        <tag>ruby</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[rails 加断点&查看log]]></title>
    <url>%2Fposts%2F2017-02-21-1437766.html</url>
    <content type="text"><![CDATA[查看log：在terminal中$ tail -f/名称log 加断点1.在想要加断点的位置上面加上 binding.pry 2.执行操作 3.在rails s中可以查看断点执行情况，想要查看的参数输入之后回车就可以了 ps: 1.!!!—–跳出断点测试 2.!!@—–跳过此断点继续执行 3.测试要从里到外：先测试参数，再测试方法]]></content>
      <tags>
        <tag>ruby</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[rails N+1]]></title>
    <url>%2Fposts%2F2017-02-21-1437683.html</url>
    <content type="text"><![CDATA[解决方案：使用 includes， 在 where, 或者 find 等查询之前。 例如： @fans = Fan.joins(:sales_checks) .includes([:sales_checks =&gt; [{:wins =&gt; :award}, :cash_desk]])如果， fan : sales_checks = 1 : n, sales_checks : wins = 1 : n , sales_checks : cash_desk = n : 1 wins : award = n : 1 那么，我们在查询fan的时候，要带上 sales_checks, 那么就 Fan.includes(:sales_checks) 也可以写成： Fan.includes( [:sales_checks]) 如果在查询时，要带上 wins, 那么就： Fan.includes([:sales_checks =&gt; [:wins]]) 如果再带上 cash_desk的话, 那么就 Fan.includes([:sales_checks =&gt; [:wins, :cash_desk]) (注意这里 cash_desk是单数， 因为一个 cash_desk对应多个 sales_checks ) 如果要带上 wins的 award的话， 那么就是： Fan.includes([:sales_checks =&gt; [{:wins =&gt; :award}]]) 推荐大家使用bullet 这个gem .特别好用.]]></content>
      <tags>
        <tag>ruby</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[rails 初始化数据&代码中有中文]]></title>
    <url>%2Fposts%2F2017-02-21-rails-initialization-data.html</url>
    <content type="text"><![CDATA[1.在script文件夹下建立init_xxx.rb文件2.在terminal中运行：ruby script/init_xxx.rb 在文件顶端加上-- encoding : utf-8 --]]></content>
      <tags>
        <tag>ruby</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[服务器登录及退出]]></title>
    <url>%2Fposts%2F2017-02-21-server-log-and-exits.html</url>
    <content type="text"><![CDATA[服务器登录rootsiwei.tech-p 35888Sillyboy12$ ssh root@www.siwei.tech -p 35888 退出：ctrl+d]]></content>
      <tags>
        <tag>server</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[controller&model文件头尾固定代码&migration文件代码样式]]></title>
    <url>%2Fposts%2F2017-02-20-controller.html</url>
    <content type="text"><![CDATA[1.controller 无namespace的：class XxxsController &lt; ApplicationController 有namespace的：class Xxx::XxxsController &lt; ApplicationController namespace名称::controller名称 2.model class Xxx &lt; ActiveRecord::Base end 3.migrate文件中添加 t.字符类型 :字段名,comment: ‘备注’ t.timestamps]]></content>
      <tags>
        <tag>ruby</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[rails--路由]]></title>
    <url>%2Fposts%2F2017-02-19-rails-routing.html</url>
    <content type="text"><![CDATA[1.restful get 查询 post 新建 put 修改 delete 删除 2.root path root to: ‘xxx/xxx’(文件路径) 3.match路径 match ‘xxx/xxx’(http路径名), to: ‘xxx#xxx’(文件路径), via: ‘get’ 4.接口 render json: { key: value, …… } 5.查看 bunle exec rake routes 过滤想要的 undle exec rake routes | grep “xxx”]]></content>
      <tags>
        <tag>ruby</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[sass与css]]></title>
    <url>%2Fposts%2F2017-02-15-sass-and-css.html</url>
    <content type="text"><![CDATA[在要改全局css文件时要用$ sass –watch static/sass/pin_tuan_bao.scss:static/css/pin_tuan_bao.css监听文件，然后在sass文件中更改，就会自动改写到css里 注释：(HTML) (CSS) /* */ 单行：//]]></content>
      <tags>
        <tag>css</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[H5 页面跳转]]></title>
    <url>%2Fposts%2F2017-02-15-1419356.html</url>
    <content type="text"><![CDATA[2.在标签中写一个click方法 eg：@click=”show_more_lists 在下面的标签下的method方法下写：name里面写要跳转到的页面名称，在main.js里面可以找到 eg: show_more_lists () { this.$router.push({name: 'cases_list', params: {id: advertisement.id}}) },]]></content>
      <tags>
        <tag>vue</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[v-for&v-html&v-model]]></title>
    <url>%2Fposts%2F2017-02-14-1416386.html</url>
    <content type="text"><![CDATA[1.template标签下 123&lt;li v-for=&quot;item in items&quot;&gt; &#123;&#123; item.message &#125;&#125;&lt;/li&gt; 2.script标签下,声明数据，数 123456data: &#123; items: [ &#123;message: 'Foo' &#125;, &#123;message: 'Bar' &#125; ] &#125; 有索引的： 123&lt;li v-for=&quot;(item, index) in items&quot;&gt; &#123;&#123; parentMessage &#125;&#125; - &#123;&#123; index &#125;&#125; - &#123;&#123; item.message &#125;&#125;&lt;/li&gt; 1234567data: &#123; parentMessage: 'Parent', items: [ &#123; message: 'Foo' &#125;, &#123; message: 'Bar' &#125; ] &#125; ps v-for文档 v-model:双向绑定，在输入框输入文字并将值返回后台的时候用v-model文档 v-html：将HTML原始代码转化为页面]]></content>
      <tags>
        <tag>vue</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[rails-API]]></title>
    <url>%2Fposts%2F2017-02-14-api.html</url>
    <content type="text"><![CDATA[后台：1.添加app/controllers/interface/xxx_controller.rb文件，写上需要的接口（json） 注意事项： 1.index的接口： 模式：循环用map 类别区分：用where 2.show的接口： 模式：不要循环 区分类别：用if/else语句 3.对于没有数据的栏位要用rescue eg：yezhu: (@case.mobile_user.name rescue &apos;&apos;) 或者用SQL workbench添加数据。 4. 如果接口下方有需要用的关联的表，那么在上面的表后面要加上includes（：xxx） 用逗号隔开，如有多个也要都写上ps：添加默认值：在需要的栏位后面加上 【 || 默认值 】 如果默认值是字符串则需要用””括起来！ 前端向后台传数据的时候，写在接口中的find后面需要insert的参数2.在config/routes.rb中添加路径 如 123456789101112131415namespace :interface do resources :homes do collection do get :gong_dis end endend``` 3.查看config/index.js dev下面的target后面的服务器名有没有更换前台（对应的页面）： 1.&lt;sript&gt;标签下的created函数里面加上接口文件路径以及需要的log eg: 斜体部分为索要替换的路径部分 且需要id的时候要把id作为参数放在后面，不同路径形式不一 created () { this.$http.get(‘api/interface/homes’).then((response) =&gt; { console.info(response.body) this.response = response.body }, (error) =&gt; { console.error(error) }); }, 1234(&apos;api/interface/cases/she_ji_shi_info&apos; ,&#123;params:&#123;id: this.id&#125;&#125;)(&apos;api/interface/cases/&apos; + this.id) 2.在data函数下面定义返回的变量名，在里面添加上所需要的数组 eg:response为变量名。 data () { return { response: { sliders: [], categories: [], fuwus: [], zhibos: [], guanggaotu: [], }, } index: 0, }, 注意： show页面data中要添加寻找id的语句(写在return里面定义的变量外面---index的下面,要写在定义的变量上面) eg： $ id: this.$router.app.$route.params.id, 3.在&lt;template&gt;标签下解析要显示的数据 response.item(要显示的栏位名) ps: 数组解析用v-for 几种解析模式： 1.字段 {{ xxx.xxx}} 2.图片 &lt;img :src=&quot;xxx.xxx&quot; style=&quot;height:100%; width:100%;&quot;&gt;&lt;/img&gt;]]></content>
      <tags>
        <tag>ruby</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[竖形表格]]></title>
    <url>%2Fposts%2F2017-02-14-vertical-square-table.html</url>
    <content type="text"><![CDATA[姓名: 头像: 手机: 口号: 学号 111 222 333 姓名 leo may ken 班级 111 222 333]]></content>
      <tags>
        <tag>html</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[HTML实体符号]]></title>
    <url>%2Fposts%2F2017-02-12-html.html</url>
    <content type="text"><![CDATA[&nbsp; 空格&raquo;－－－－－ 》]]></content>
      <tags>
        <tag>html</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[js 前端组件style调用]]></title>
    <url>%2Fposts%2F2017-02-09-h5-front-end-component-style-called.html</url>
    <content type="text"><![CDATA[1.在对应的component文件中style后面加上需要的style名称eg:将:style=”style” —–&gt; :style=”[style,tab_item_style]” 在下面的props里面加上style名称eg: tab_item_style: [String, Object]2.在需要调用的view页面上标签后面加上styleeg: :tab_item_style=tab_item_style 在下面的sript／data／return里面填上需要的参数eg: tab_item_style: { fontSize: ‘20px’, fontWeight: ‘800’ } ps：要改swiper-item大小要通过height和sliderHeight这两个参数来改]]></content>
      <tags>
        <tag>js</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[添加多张图片]]></title>
    <url>%2Fposts%2F2017-02-06-add-multiple-pictures.html</url>
    <content type="text"><![CDATA[1.rails g uploader avatar avatar_uploader.rb123456789将 include carrierwave::minimagick 前面的＃去掉在store_dir end 下加process resize_to_fit:[800,800]version :thumb doprocess resize_to_fit:[200,200]endversion :medium doprocess resize_to_fit:[400,400]end 2.建立photo.rb model文件:$ rails g model xxx xxxx:xxx avatar:string自然建立migration文件 3.在需要添加图片的model文件中加上 12has_many :photosaccepts_nested_attributes_for :photos photo.rb12mount_uploader :avatar, AvatarUploaderbelongs_to :case 4.在需要添加图片的controller文件中加上def new下面加@photo = @xxx.photos.build def create中if @xxx.save下面加 12345if params[:photos] != nilparams[:photos][&apos;avatar&apos;].each do |a| @photo = @xxx.photos.create(:avatar =&gt; a)endend def show 下面加 123@photos = @xxx.photos.all``` 在def update变成 def update if params[:photos] != nil @case.photos.destroy_all #将原来的图片删掉 [:photos][‘avatar’].each do |a| @photo = @case.photos.create(:avatar =&gt; a) end @case.update(case_params) redirect_to cases_path elsif @case.update(case_params) redirect_to cases_path else render :edit endend 125.在new页面添加 &lt;%= f.label :avatar %&gt;&lt;%= f.file_field :avatar, :multiple =&gt; true,name:”photos[avatar][]” %&gt; 1在show页面添加 @xxx.photos.each do |photo| %> 暂无图片 ``` ps：一个xxx对应多个photo 一个photo对应一个avatar 这种时候要显示avatar就需要对于@xxx.photos这个数组进行遍历来实现]]></content>
      <tags>
        <tag>ruby</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[rails-容易错的地方]]></title>
    <url>%2Fposts%2F2017-02-04-1383293.html</url>
    <content type="text"><![CDATA[1.关键字不可以做变量名！！！ 会报语法错误 eg:case collection 2.在model文件相关联的时候 如果关联到同一张表但是用不同的外键时要在后面标明 eg: belongs_to :she_ji_shi, :class_name =&gt; SheJiShi, :foreign_key =&gt; ‘she_ji_shi_id’ 3.除了rails以外其余的语言方法名之后都要加（）4.||= 默认值 rescue 是抛出异常时给赋的值]]></content>
      <tags>
        <tag>ruby</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[css 基本样式&h5程序运行]]></title>
    <url>%2Fposts%2F2017-01-24-css.html</url>
    <content type="text"><![CDATA[1.width/height只有在display: inline-block;下才生效2.按钮变成椭圆形：border-radius:3.将图片放在左边：position: absolute; left: 80px;4.设置整个页面背景： 只有将最外侧标签写成body，height才会生效5.改变表格边的样式： Value Description void The outside borders are not shown above The top outside border is shown below The bottom outside border is shown hsides The top and bottom outside borders are shown vsides The left and right outside borders are shown lhs The left outside border is shown rhs The right outside border is shown box The outside borders are shown on all four sides border The outside borders are shown on all four sides 6.改变字体： 值 描述normal 默认值。浏览器显示一个标准的字体样式。italic 浏览器会显示一个斜体的字体样式。oblique 浏览器会显示一个倾斜的字体样式。inherit 规定应该从父元素继承字体样式 改变字体为苹方：font-family: PingFangSC-Regular, sans-serif; 7.字体加粗：关键字 100 ~ 900 为字体指定了 9 级加粗度。如果一个字体内置了这些加粗级别，那么这些数字就直接映射到预 定义的级别，100 对应最细的字体变形，900 对应最粗的字体变形。数字 400 等价于 normal，而 700 等价于 bold。 font-weight:900; 8.将模块放在边侧，可用float，调整位置用margin-left/margin-right9.padding／margin 顺序为上右下左,中间不用，隔开10.position:relative 时，如果top:－50% 不生效就用px来定位 或者给父类加上height11.设置背景透明度：opacity:x(0-1) eg: 0.812.添加背景图片： background-image：url() ps:运行h5程序 source ~/.bash_profile npm run dev]]></content>
      <tags>
        <tag>css</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[clone下来的代码配置运行]]></title>
    <url>%2Fposts%2F2017-01-22-1345243.html</url>
    <content type="text"><![CDATA[1.$ cd config $ cp log4r.yml.example log4r.yml $ cp settings.yml.example settings.yml $ cp database.yml.example database.yml 2.在项目根目录中mkdir log 3.vim database.yml，把password写进去，将socket那一行删掉。 4.$ bundle exec rake db:create 5.用script文件下的init文件来初始化数据库 eg: bundle exec ruby script/init_user.rb 6.$ bundle exec rake db:migrate cd config –&gt; touch secrets.yml填入 development:secret_key_base: 52eeb9ef4aebcf526c2415a6f3c0d579c7df7de12099a89a8ed834c840b348d999dec774a11a558d89f463b6bcf810d6e8c42849530e8f6f931ed0a5e66b57a4 test: secret_key_base: 3d768887879e8a78b39213eb90dfd271ac405d369d1de16945d3747a444ab0566842115abfd8b37062136c2a1a77f196aa255a16e47354fc101bac31d65acb6c Do not keep production secrets in the repository,instead read values from the environment.production: secret_key_base: 680911118945d25bfffe2b69ecb5d332fe9f5494ccae9f06cdc2cc74434babf5f5389d64fe1d2aad4bf9f71534c47f5f5a257affaa49af9fdea1d63314ff1993 ps -ef | grep rails 查看rails进程ps -ef | grep dev 查看前端进程]]></content>
      <tags>
        <tag>base</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[terminal&vim 基本命令]]></title>
    <url>%2Fposts%2F2017-01-20-linux-commands.html</url>
    <content type="text"><![CDATA[terminal:返回上级目录： cd.. 找到对应的rails运行程序：bundle execrm -rf 文件名 强制删除一个文件cd 切换目录（Change Directory）cd ~ 会把家目录设成当前目录ls 这指令会列出当前资料夹里面的档案ls -a 列出专案中所有档案pwd 查看你当前所在文件路径 查看硬盘状态df -kh 在当前目录下，从旧到新的列出所有的文件： (注意参数： trh)$ ls -altrh 查看当前的系统（CPU, 内存，进程）状态。$ top 显示出系统中的所有进程，并且以消耗的内存来从低到高的排序。$ ps aux –sort rss 查看当前服务器的所有分区，并且以用户$ df -kh 查看当前文件夹的大小$ du . -kh 查看文件夹大小 查看进程：ps -ef | grep rails 终止某个进程。 例如： 某个进程的id是3366$ kill -9 3366 查询：grep ‘user-select’ src -r grep ‘user-select’ src -r -n —-显示行数 grep login src -R –include=*vue -n —-查找所有.vue文件中有的 查看某个文件的尾部。 例如：$ tail /var/log/system.log默认显示文件的最后10行。可以跟踪显示某个文件的尾部：$ tail -f /var/log/system.log可以指定显示该文件的尾部100行：$ tail -n 100 /var/log/system.log最常见的用法：跟grep 共同使用, 例如，实时跟踪显示某个文件，只过滤出内容中带有ERROR：$ tail -f /var/log/system.log | grep ERROR－－－－－－－－－－－－－－－－－－－－－－－－－－－－－－－－－－－－－－－－－－－－－－－－－－－－－－－－－ vim:在vim中打开文件列表： ,+t在vim中切换分页：ctrl＋w+w切换terminal窗口：shiift+command+{ ／ }刷新文件树：shift+r上下分割当前打开的文件:Ctrl+W s让所有的屏都有一样的高度:Ctrl+W =增加高度:Ctrl+W +减少高度:Ctrl+W -替换文本：选中之后shift+; s/ 被替换的/要替换的/(g)–全局在最后加上某个： 全选 –》 ： –》s/$/你要加的东西在最前面加上某个： 全选 –》： –》s//你要加的东西自动换行：set wrap]]></content>
      <tags>
        <tag>system</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Mysql基础]]></title>
    <url>%2Fposts%2F2017-01-16-mysql.html</url>
    <content type="text"><![CDATA[数据库命令后要加;数据库对大小写不敏感退出mysql：exit第一部分：库 初始进入：mysql -u root如果有密码要用：mysql -u root -p设置密码：mysqladmin -u root password xxx 进入：mysql -u root -p 输入密码创建数据库：create database xxx default charset utf8 collate utf8_general_ci;查看数据库：show databases; 查看数据库编码格式：show variables like ‘character%’;修改数据库编码：默认创建的数据库默认不支持中文字符，如果我们需要它支持中文字符，则将它的编码设置为utf8格式. mysql&gt; ALTER DATABASE testDB CHARACTER SET UTF8; 使用数据库：use xxx;查看当前使用数据库：select database();删除数据库：drop database xxx; 第二部分：表创建表 ：create table 表名 (字段名1 数据类型, 字段名2 数据类型,。。。)；如果要设置主键或非空，则在数据类型后面加上 AUTO_INCREMENT（让主键值自动增长）primary key(主键)要搭配在一起用！或 not null主键：not null + uniquevarchar型要规定长度。ps：利用已有数据创建新表： mysql&gt; create table newTable select * from xxx; 显示表：show tables;删除表：drop table xxx;查看表结构：desc xxx;在表中添加列：alter table xxx add 字段名 字符类型; 修改列：alter table xxx modify 字段名 字符类型; alter table 表名 change 原字段名 新字段名 字段类型;–修改表列名 删除列：alter table xxx drop column xxx－; 修改是否可为空： ALTER TABLE MODIFY 数据类型 &lt;NULL ‘OR’ NOT NULL&gt;对表重命名：rename table xxx to NEW_xxx; 增添数据：insert into 表名 VALUES (default（id）, ‘xxx’,。。。); 多个：insert into 表名 VALUES (default（id）, ‘xxx’,。。。),(null（id）, ‘xxx’,。。。),…;更新数据：update table_name set 列名=’xxxx’,列名=’xxxx’,… where id=xx(或者某个条件);删除数据：delete from table_name where id = xx(或者某个条件); 查询：查询有多少个：select count(*) from xxx where (条件);查询所有：select * from xxx;查询某一列：select 列名 from 表名;查询包含某个字符的信息： select */列名 from 表名 where 列名 like ‘%xxx%’;多个条件用 and/or去重复查询：select distinct 字段名 from 表名；对查询结果排序：select 字段1，字段2…from 表名 where …. order by 属性名 [asc|desc] 多表联合查询：1、内连接：将两个表中存在连结关系的字段符合连接条件的记录形成记录集Select A.name,B.name from A inner join B on A.id=B.id和Select A.name,B.name from A,B where A.id=B.id结果是一样的（内连接的inner关键字可省略）；2、外连接：分为左外连接和右外连接左连接A、B表结果包括A的全部记录和符合条件的B的记录。右联结A、B表的结果和左联结B、A的结果是一样的，也就是说：Select A.name,B.name from A Left Join B on A.id=B.id和Select A.name,B.name from B Right Join A on B.id-A.id执行后的结果是一样的。3、全联结4、无联结5、三表联结查询select username,psw,gname,tel from (t1 left join t2 on t1.t1_id=t2.t1_id) left join t3 on t1.t1_id=t3.t1_id6、终极的三表联结查询items：商品表，item_visit_stats：商品访问表，item_trade_stats：商品销售表SELECT i.num_iid, i.title, i.price, SUM(iv.user_visits) AS uv,it.buyer_num,it.item_num,it.item_num*i.price AS turnoverFROM (items AS i RIGHT JOIN item_visit_stats AS iv ON i.num_iid=iv.num_iid)LEFT JOIN (SELECT num_iid,SUM(buyer_num) AS buyer_num,SUM(item_num) AS item_num FROM item_trade_statsWHERE seller_nick=”XXXX” AND business_day BETWEEN ‘2010-08-14’ AND ‘2010-08-15’ GROUP BY num_iid)AS it ON it.num_iid=iv.num_iidWHERE i.nick=”XXXX” AND iv.business_day BETWEEN ‘2010-08-14’ AND ‘2010-08-15’GROUP BY i.num_iid ORDER BY uv DESC 建立表之间的关系（添加外键）：在建立之初添加外键： (CONSTRAINT 外键名—给外键起名，可省略) FOREIGN KEY (主表作为外键列名) REFERENCES 从表名(从表列名); (上面要建立对应的列！！！)建立好表之后添加外键： ALTER TABLE主表名 ADD CONSTRAINT 外键名 FOREIGN KEY（主表作为外键的列名）REFERENCES 从表名（从表列名);解除关联（删除外键）：ALTER TABLE 表名 DROP FOREIGN KEY 外键名;查看已有的外键：use information_schema;SELECT * FROM information_schema.TABLE_CONSTRAINTSWHERE information_schema.TABLE_CONSTRAINTS.CONSTRAINT_TYPE = ‘FOREIGN KEY’AND information_schema.TABLE_CONSTRAINTS.TABLE_SCHEMA = ‘要查看的数据库名’AND information_schema.TABLE_CONSTRAINTS.TABLE_NAME = ‘要查看的表名’; 索引：创建索引：CREATE INDEX 索引名 ON 表名(列名[(length)]…);修改表时添加索引：ALTER TABLE 表名 ADD INDEX [索引名] (列名[(length)]…);创建表时添加索引：INDEX [索引名] (列名[(length)]…);删除索引：DROP INDEX 索引名 ON 表名禁用索引：ALTER TABLE 表名 DISABLE KEYS;打开索引：ALTER TABLE 表名 ENABLE KEYS; ps:CREATE DATABASE - 创建新数据库ALTER DATABASE - 修改数据库CREATE TABLE - 创建新表ALTER TABLE - 变更（改变）数据库表DROP TABLE - 删除表CREATE INDEX - 创建索引（搜索键）DROP INDEX - 删除索引INNER JOIN: 如果表中有至少一个匹配，则返回行 (把两个表中都存在id的行拼成一行（即内联）)LEFT JOIN: 即使右表中没有匹配，也从左表返回所有的行 (显示左表T1中的所有行，并把右表T2中符合条件加到左表T1中,右表T2中不符合条件，就不用加入结果表中，并 且NULL表示)RIGHT JOIN: 即使左表中没有匹配，也从右表返回所有的行 (显示右表T2中的所有行，并把左表T中符合条件加到右表T中,左表T1中不符合条件，就不用加入结果表中，并 且NULL表示)FULL JOIN: 只要其中一个表中存在匹配，就返回行 (显示左表T1、右表T2两边中的所有行，即把左联结果表 + 右联结果表组合在一起，然后过滤掉重复的。)]]></content>
      <tags>
        <tag>sql</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[按钮图标添加]]></title>
    <url>%2Fposts%2F2017-01-11-1297027.html</url>
    <content type="text"><![CDATA[1.安装font-awesome-rails Gemfile1gem "font-awesome-rails" bundle install app/assets/stylesheets/application.scss1@import "font-awesome"; 重开server 2.将需要换上按钮的地方。写上查找到的图标代码eg：将helper中的render_job_status(job) app/helpers/jobs_helper.rb1234567def render_job_status(job) if job.is_hidden content_tag(:span, "", :class =&gt; "fa fa-lock") else content_tag(:span, "", :class =&gt; "fa fa-globe") endend]]></content>
      <tags>
        <tag>ruby</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[rails 5.0]]></title>
    <url>%2Fposts%2F2017-01-05-1275873.html</url>
    <content type="text"><![CDATA[1.要想将现有的app rails版本升到5.0，要现将版本升到4.2，确认没问题之后在往上升。从4.2到5.0的时候要在app/models下新增一个文件 application_record.rb app/models/application_record.rb123Class ApplicationRecord &lt; ActiveRecord: :Baseself.abstract_class = trueend 2.APIrails new my_api –api]]></content>
      <tags>
        <tag>ruby</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[view-partial/helper/scope]]></title>
    <url>%2Fposts%2F2017-01-02-partcialhelperscope.html</url>
    <content type="text"><![CDATA[PartialStep 1: 产生一个要调用的partialeg： app/views/groups/_form.html.erb touch app/views/groups/_form.html.erb 填入以下内容： app/views/groups/_form.html.erb123456789101112131415161718&lt;%= form_for @group do |f| -%&gt;&lt;% if @group.errors.any? %&gt;&lt;ul&gt; &lt;% @group.errors.full_messages.each do |msg| %&gt; &lt;li&gt;&lt;%= msg %&gt;&lt;/li&gt; &lt;% end %&gt;&lt;/ul&gt;&lt;% end %&gt;标题&lt;%= f.text_field :title %&gt;&lt;br&gt;叙述&lt;br&gt;&lt;%= f.text_area :description %&gt;&lt;br&gt;&lt;%= f.submit "Submit", :disable_with =&gt; 'Submiting...' %&gt;&lt;% end %&gt; Step 2: 修改 app/views/groups/new.html.erb修改 app/views/groups/new.html.erb，把原先重复的表单程式码“整段删掉”，改成 &lt;%= render “form” %&gt; app/views/groups/new.html.erb12345&lt;div class="col-md-4 col-md-offset-4"&gt; &lt;h2&gt;新增讨论版&lt;/h2&gt; &lt;hr&gt; &lt;%= render "form" %&gt;&lt;/div&gt; Step 3: 修改 app/views/groups/edit.html.erb 修改 app/views/groups/edit.html.erb，把原先重复的表单程式码“整段删掉”，改成 &lt;%= render “form” %&gt; app/views/groups/edit.html.erb12345&lt;div class="col-md-4 col-md-offset-4"&gt; &lt;h2&gt;编辑讨论版&lt;/h2&gt; &lt;hr&gt; &lt;%= render "form" %&gt;&lt;/div&gt; Step 4: git 存档 git add .git commit -m “move form to partial” ps:partial 还可以这样用上面我们介绍了，form 可以放入 partial。这里我们要介绍 partial 还可以用在回圈上。Step 1. 修改 app/views/groups/index.html.erb 把 @groups.each 内整段砍掉，换成 partial app/views/groups/index.html.erb123456789101112131415161718&lt;div class="col-md-12"&gt; &lt;div class="group"&gt; &lt;%= link_to("New group", new_group_path, class: "btn btn-primary pull-right") %&gt; &lt;/div&gt; &lt;table class="table table-hover"&gt; &lt;thead&gt; &lt;tr&gt; &lt;td&gt;#&lt;/td&gt; &lt;td&gt;Title&lt;/td&gt; &lt;td&gt;Description&lt;/td&gt; &lt;td&gt;Creator &lt;/td&gt; &lt;/tr&gt; &lt;/thead&gt; &lt;tbody&gt; &lt;%= render :partial =&gt; "group_item", :collection =&gt; @groups, :as =&gt; :group %&gt; &lt;/tbody&gt; &lt;/table&gt;&lt;/div&gt; 然后 touch app/views/groups/_group_item.html.erb app/views/groups/_group_item.html.erb12345678910111213&lt;tr&gt; &lt;td&gt;#&lt;/td&gt; &lt;td&gt;&lt;%= link_to(group.title, group_path(group)) %&gt;&lt;/td&gt; &lt;td&gt;&lt;%= render_group_description(group) %&gt;&lt;/td&gt; &lt;td&gt;&lt;%= group.user.email %&gt;&lt;/td&gt; &lt;td&gt; &lt;% if current_user &amp;&amp; current_user == group.user %&gt; &lt;%= link_to("Edit", edit_group_path(group), class: "btn btn-sm btn-default")%&gt; &lt;%= link_to("Delete", group_path(group), class: "btn btn-sm btn-default", method: :delete, data: &#123; confirm: "Are you sure?" &#125; )%&gt; &lt;% end %&gt; &lt;/td&gt;&lt;/tr&gt; Step 2. git 存档git add .git commit -m “render partial with collection” HelperStep 1. 自制 render_group_description(group) 修改 app/helpers/groups_helper.rb 加入： app/helpers/groups_helper.rb12345module GroupsHelper def render_group_description(group) simple_format(group.description) endend 然后换掉 app/views/groups/index.html.erb 与 app/views/account/groups/index.html.erb 里关于 group.description 的部分： app/views/groups/index.html.erb123&lt;td&gt;&lt;%= link_to(group.title, group_path(group)) %&gt;&lt;/td&gt;&lt;td&gt;&lt;%= render_group_description(group) %&gt;&lt;/td&gt;&lt;td&gt; &lt;%= group.user.email %&gt; &lt;/td&gt; Step 2 : git 储存 git add .git commit -m “use self delimit helper” ps：自制的 Helper 是什么意思？Helper 就是用 Ruby 写的“View 装饰的小方法”，你也可以自己定义自制 Helper 都会放在 app/helpers 下 form-helper 1.checkbox 多选 与 radio button 单选 多选的例子: &lt;%= check_box_tag(:banana) %&gt;&lt;%= label_tag(:banana, “我喜欢香蕉”) %&gt;&lt;%= check_box_tag(:orange) %&gt;&lt;%= label_tag(:orange, “我喜欢橘子”) %&gt; 单选的例子: &lt;%= radio_button_tag(:sex, “male”) %&gt;&lt;%= label_tag(:sex_male, “男”) %&gt;&lt;%= radio_button_tag(:sex, “female”) %&gt;&lt;%= label_tag(:sex_female, “女”) %&gt; 2.下拉菜单：1）自己给的选项&lt;%= select_tag ‘sex’, options_for_select([‘男’, ‘女’]) %&gt;2）在已有的信息中调取选项&lt;%= options_from_collection_for_select Book.all, :id, :title %&gt; 3.填写信息框：text_area比text_field框大且text_field会自带默认值text_field_tag要加默认值就要如下写：&lt;%= text_field_tag ‘article[title]’, ‘三体’ %&gt; Scope：在model中定义scope，controller中调用 app/models/post.rb1234class Post &lt; ApplicationRecord # ... 略 scope :recent, -&gt; &#123; order("created_at DESC")&#125;end]]></content>
      <tags>
        <tag>ruby</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[记不住的知识点！！！]]></title>
    <url>%2Fposts%2F2016-12-26-remember-knowledge.html</url>
    <content type="text"><![CDATA[1.删除纽 method: :delete2.限制 validates :xxx(要限制的栏位),presence: true(不为空)3.要将两个东西关联到一起的话就要在一个中加上另一个的id（用id关联）rails g migration xx，且要在model中添加关系(belongs_to :xxx,optional: true) migration里add_column :xxxs（在哪个model中加）,:xxx（要加的东西）,:xxx(类型)]]></content>
      <tags>
        <tag>easy</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Macau一日游]]></title>
    <url>%2Fposts%2F2016-12-20-day-trip-to-macau.html</url>
    <content type="text"><![CDATA[我向往香港和澳门很久，终于在去年冬天有机会去一睹她们的风采。相比于香港的繁华与忙碌我更喜欢澳门当地人的一种悠闲与恬静。 从香港到澳门一般都是坐船有好几个港口之间都可以互通，我是从中港城的码头直接坐到外港客运码头（这个路线的船比较多），不用提前买票只要去的时候现买就可以。要注意的是，有的时候海上有大风浪会很晕，如果你很容易晕，建议：在登船之前买点晕船药或者土豪可以直接做飞机过去。我下了船之后在码头等我同学，但是我在等他无聊的时候用ATM查了一下我的银行卡余额！！！这里要特别注意（敲黑板划重点）！！用内地的卡在澳门ATM机上哪怕不取钱查询余额也是要收手续费的！最二的是我还查了两遍。。。 我同学到了之后我们选择了坐公交车去大三巴看一下～毕竟是标志性建筑！在下了公交车之后还要走一段才能到大三巴，在这一路上有钜记饼家，里面可以免费试吃，基本上每样都可以尝，胃小点的妹纸都能吃饱了。还有猪肉脯什么的，想尝什么味道的都可以哈哈～走（吃）了一段之后就到大三巴了我去的那天天气有点阴看起来有点灰蒙蒙的，大三巴牌坊我觉得也就看一下拍两张照片就差不多了。可是在大三巴边上有很多当地的建筑也是值得一看的。这是我在大三巴边上随手拍的一个居民楼，是不是很有味道～大三巴边上的牛杂和咖喱鱼蛋是真的很好吃啊～有一家有好多人都在排队买，但是就在他边上有一家没什么人但是味道一样不差～我觉得比我前一晚在香港吃的好吃哈哈～可惜吃的太投入忘记拍照片。在吃牛杂之前，我同学还给我安利了澳门一个当地很有名的猪扒包，据说流星花园有在那里取景哦～猪扒包对我来说不是很合口味哈哈，面包太硬了，不过里面夹的肉味道还是很不错的。 看完大三巴我们决定去威尼斯人，因为澳门有免费的巴士可以到威尼斯人，所以我俩就决定走到坐免费巴士的地方，不得不说，澳门的好吃的真的是不少，在这一路上上我们还吃了木糠布甸，炸鸡，还喝了两杯奶茶。这么听起来我俩像俩大胃王哈哈。木糠布甸在这里要着重推荐一下，她的口感不像一般的布丁qq的有点像放在冷藏室的蛋糕的意思，不过非常好吃，喜欢甜品的不要错过噢～我们坐上了到银河的巴士（穿过银河就是威尼斯人了）。下了车之后本来想从银河穿过去直接去威尼斯人的，但是我在银河里发现里面有好都牌子都在打折！！！喜欢shopping的妹纸注意啦！银河绝对是购物天堂，里面有很多牌子折扣特别低，冬天的时候有的牌子的当年秋季款在香港已经没有卖的了，香港的都是来年春季新款所以折扣什么的也没有力度特别大的，这个时候澳门的银河里面就还会有一些而且巨折哈哈，再算上汇率真的是非常便宜，在那里可以买买买了～～买完之后就到了威尼斯人，不得不说，威尼斯人里面真的好漂亮，来两张图观赏一下～它上面的人造天空真的很像真的！都说去威尼斯人一定要去里面的赌场。。。但是我没去。。不过到了威尼斯人里一定要吃安德鲁蛋挞。据说是最正宗的，他在威尼斯人里有一家店里面有面包什么的，但是如果你只想尝尝蛋挞的话，有一个小柜台直接买就好了，没有店里人那么多。 因为我只给澳门留了一天时间，所以这样就要去码头坐船回香港了～下次有机会还要去尝尝澳门火锅啦啦啦～作为一个吃货来说，这样的一天行程也算圆满了～哈哈]]></content>
      <tags>
        <tag>life</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[专案起始流程]]></title>
    <url>%2Fposts%2F2016-12-18-new-ad-hoc-processes.html</url>
    <content type="text"><![CDATA[1.mkdir 文件夹名称 －－－－新建一个你需要放专案的文件夹（可省略）2.rails new 专案名称 －－－－新建一个专案3.cd 专案名称 －－－－进入你的专案 4.atom ./打开atom，选择 File &gt; Add Project Folder… －－－－在你的atom中打开专案5-1.git init －－－－把repository（repo）初始化到一个叫做 .git 的资料夹 git add . －－－－告诉 git 你想要把目前资料夹（即 .）还有它底下的所有东西加进repo git commit -m “xxx” －－－－告诉 git 真的要执行你叫它做的事5-2.prepare work (1).install bootstrap: 在atom修改 Gemfile，在 group :development, :test do前一行加入 gem ‘bootstrap-sass’（＃32） bundle install mv app/assets/stylesheets/application.css app/assets/stylesheets/application.scss 将 application.css 更名为 application.scss app/assets/stylesheets/application.scss1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950 @import "bootstrap-sprockets"; @import "bootstrap";``` (2).应用bootstrap到全栈（navbar &amp; footer） mkdir app/views/common touch app/views/common/_navbar.html.erb```ruby app/views/common/_navbar.html.erb &lt;nav class="navbar navbar-default" role="navigation"&gt; &lt;div class="container-fluid"&gt; &lt;div class="navbar-header"&gt; &lt;a class="navbar-brand" href="/"&gt;Rails 101&lt;/a&gt; &lt;/div&gt; &lt;div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1"&gt; &lt;ul class="nav navbar-nav navbar-right"&gt; &lt;li&gt; &lt;%= link_to("登入", '#') %&gt; &lt;/li&gt; &lt;/ul&gt; &lt;/div&gt; &lt;/div&gt; &lt;/nav&gt;``` touch app/views/common/_footer.html.erb```ruby app/views/common/_footer.html.erb &lt;footer class="container" style="margin-top: 100px;"&gt; &lt;p class="text-center"&gt;Copyright ©2016 Rails101 &lt;br&gt;Design by &lt;a href="http://courses.growthschool.com/courses/rails-101/" target=_new&gt;xdite&lt;/a&gt; &lt;/p&gt; &lt;/footer&gt;``` ```ruby app/views/layouts/application.html.erb &lt;!DOCTYPE html&gt; &lt;html&gt; &lt;head&gt; &lt;title&gt;Rails101&lt;/title&gt; &lt;%= csrf_meta_tags %&gt; &lt;%= stylesheet_link_tag 'application', media: 'all', 'data-turbolinks-track': 'reload' %&gt; &lt;%= javascript_include_tag 'application', 'data-turbolinks-track': 'reload' %&gt; &lt;/head&gt; &lt;body&gt; &lt;div class="container-fluid"&gt; &lt;%= render "common/navbar" %&gt; &lt;%= yield %&gt; &lt;/div&gt; &lt;%= render "common/footer" %&gt; &lt;/body&gt; &lt;/html&gt; (3).提示信息 s1. app/assets/javascripts/application.js123456 ... (一堆注解) //= require jquery //= require jquery_ujs //= require turbolinks+//= require bootstrap/alert //= require_tree . s2.touch app/views/common/_flashes.html.erb app/views/common/_flashes.html.erb1234567891011121314151617181920 &lt;% if flash.any? %&gt; &lt;% user_facing_flashes.each do |key, value| %&gt; &lt;div class="alert alert-dismissable alert-&lt;%= flash_class(key) %&gt;"&gt; &lt;button class="close" data-dismiss="alert"&gt;×&lt;/button&gt; &lt;%= value %&gt; &lt;/div&gt; &lt;% end %&gt; &lt;% end %&gt;``` s3.touch app/helpers/flashes_helper.rb```ruby flashes_helper.rb module FlashesHelper FLASH_CLASSES = &#123; alert: "danger", notice: "success", warning: "warning"&#125;.freeze def flash_class(key) FLASH_CLASSES.fetch key.to_sym, key end def user_facing_flashes flash.to_hash.slice "alert", "notice","warning" end end app/views/layout/application.html.erb12&lt;%= render "common/flashes" %&gt;&lt;%= yield %&gt; s4. flash[:alert] = “xxx” (4).登录系统 s1.gem “devise” –&gt; bundle install –&gt; rails g devise:install –&gt; rails g devise user –&gt; rake db:migrate s2. app/views/common/_navbar.html.erb123456789101112131415- &lt;li&gt; &lt;%= link_to("登入", '#') %&gt; &lt;/li&gt;+ &lt;% if !current_user %&gt;+ &lt;li&gt;&lt;%= link_to("注册", new_user_registration_path) %&gt; &lt;/li&gt;+ &lt;li&gt;&lt;%= link_to("登入", new_user_session_path) %&gt;&lt;/li&gt;+ &lt;% else %&gt;+ &lt;li class="dropdown"&gt;+ &lt;a href="#" class="dropdown-toggle" data-toggle="dropdown"&gt;+ Hi!, &lt;%= current_user.email %&gt;+ &lt;b class="caret"&gt;&lt;/b&gt;+ &lt;/a&gt;+ &lt;ul class="dropdown-menu"&gt;+ &lt;li&gt; &lt;%= link_to("登出", destroy_user_session_path, method: :delete) %&gt; &lt;/li&gt;+ &lt;/ul&gt;+ &lt;/li&gt;+ &lt;% end %&gt; s3. app/assets/javascripts/application.js12//= require bootstrap/alert//= require bootstrap/dropdow (5).安装simple_form gem “simple_form” –&gt; bundle install –&gt; rails generate simple_form:install –bootstrap 重开sever 1234567 &lt;%= simple_form_for @group do |f| %&gt; &lt;div class="form-group"&gt; &lt;%= f.input :title, input_html: &#123; class: "form-control"&#125; %&gt; &lt;%= f.input :description, input_html: &#123; class: "form-control"&#125; %&gt; &lt;/div&gt; &lt;%= f.submit "Submit", class: "btn btn-primary", data: &#123; disable_with: "Submitting..." &#125; %&gt;&lt;% end %&gt; 6.rails g model xxx 栏位:字符型 rake db:migrate rails g controller xxxs (rails g controller welcome) CRUD7.touch app/views/xxxs/index.html.erb (touch app/views/welcome/index.html.erb)8.resources :xxxs／root “welcome#index” －－－－在route.rb中添加路径]]></content>
      <tags>
        <tag>基础</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[conversation]]></title>
    <url>%2Fposts%2F2016-12-14-conversation.html</url>
    <content type="text"><![CDATA[mailboxer1.在gemfile中添加 1gem &apos;mailboxer&apos;, github: &apos;mailboxer/mailboxer&apos; $ bundle install$ rails g mailboxer:install$ rake db:migrate$ rails g mailboxer:views(发邮件／notification时候的设置，对于message没有页面设置) 2.在model_user中添加 user.rb1234567891011121314151617181920212223 acts_as_messageable def name "User #&#123;id&#125;" end def mailboxer_email(object) nil end(#Returning any kind of identification you want for the modeldef name return "You should add method :name in your Messageable model"end#Returning the email address of the model if an email should be sent for this object (Message or Notification).#If no mail has to be sent, return nil.def mailboxer_email(object) #Check if an email should be sent for that object #if true return "define_email@on_your.model" #if false #return nilend) ps：在rails c上面测试是否安装成功 12u = User.firstu.send_message User.last, &quot;body&quot;, &quot;subject&quot; 3. routes.rb123resources :conversations do resources :messagesend 4.rails g controller conversations conversations_controller.rb123def index@conversations = current_user.mailbox.conversations #(sentbox+inbox+trash)end touch app/views/conversations/index.html.erbindex.html.erb1234&lt;h1&gt;所有对话&lt;/h1&gt;&lt;% @conversations.each do |conversation| %&gt;&lt;%= link_to conversation.subject %&gt;&lt;% end %&gt; ps:打开测试]]></content>
      <tags>
        <tag>ruby</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[常见命令]]></title>
    <url>%2Fposts%2F2016-12-13-1204405.html</url>
    <content type="text"><![CDATA[rm -rf 专案名称 强制删除一个非空目录cd 切换目录（Change Directory）cd ~ 会把家目录设成当前目录ls 这指令会列出当前资料夹里面的档案ls -a 列出专案中所有档案pwd 查看你当前所在文件路径&lt;%= pluralize(topic.votes.count, “vote”) %&gt; 复数显示@topic.update_attributes(count: @topic.votes.count) 更新参数将@topic.votes.count赋给count model column 名称建错了的话，rails d model xxx 删除model(rails g migration xxxdef self.uprename_column :modelname, :旧名, :新名 end)未验证如果还提示已存在就rake db:drop scope写在model文件中eg： scope :recent, -&gt; { order(“created_at DESC”)}]]></content>
      <tags>
        <tag>easy</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[邮件－－css排版]]></title>
    <url>%2Fposts%2Fundefined.html</url>
    <content type="text"><![CDATA[1.安裝roadie-rails 在Gemfile中添加 gem ‘roadie-rails’, ‘~&gt; 1.0’ 之后bundle install 重启rails server 2.在order_mailer.rb中引用 app/mailer/order_mailer.rb1234567891011class OrderMailer &lt; ApplicationMailer+ include Roadie::Rails::Automatic def notify_order_placed(order) @order = order @user = order.user @product_lists = @order.product_lists mail(to: @user.email , subject: "[JDstore] 感謝您完成本次的下單，以下是您這次購物明細 #&#123;order.token&#125;") endend 3.在通知信上引用CSS app/view/order_mailer/notify_order_placed_html.erb1+ &lt;link rel="stylesheet" type="text/css" href="/assets/application.scss" /&gt; 4.测试 rails console中输入 1OrderMailer.notify_order_placed(Order.last).deliver!]]></content>
  </entry>
  <entry>
    <title><![CDATA[rails--参数]]></title>
    <url>%2Fposts%2F2016-12-12-update-column.html</url>
    <content type="text"><![CDATA[如果要更新某个栏位他没有反应的话，要去user中查看一下defined的条件，且如果column没有update就用 1@xxx.update_column(:xxx, xx) eg:@user.update_column(:is_vip, true ) 12&lt;%= pluralize(topic.votes.count, &quot;vote&quot;) %&gt; 复数显示@topic.update_attributes(count: @topic.votes.count) 更新参数将@topic.votes.count赋给count model column 名称建错了的话，rails d model xxx 删除model(rails g migration xxxdef self.uprename_column :modelname, :旧名, :新名 end)未验证如果还提示已存在就rake db:drop 页面跳转的时候如果参数同时传过去要在后面加上(:xxx =&gt; :sss) scope写在model文件中eg： scope :recent, -&gt; { order(“created_at DESC”)}]]></content>
      <tags>
        <tag>ruby</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[rails -- console]]></title>
    <url>%2Fposts%2Fundefined.html</url>
    <content type="text"><![CDATA[查找某个用户信息：User.find_by_id(xx)查找最后一个用户信息：User.last删除信息： Xxx.destroy_all修改信息： my_xxx.update_attributes(title: ‘xxx’)1.创建新的条目： x = xxx.new 保存： x.save 2.查找： find：返回单个数据 xxx.find（x）–id（只能用id查询，只返回单个数据） xxx.find_by_xxx（） –某种条件 xxx.find_by_xxx_and_sss( , ) –多种条件查询 where：返回一个数组 xxx.where(‘xxx = “ “‘) –某种条件 xxx.where(‘xxx = ?’,” “) –某种条件 xxx.where(‘xxx &gt;/&lt; ‘) –某种条件 排序： xxx.all.order（‘xx desc/asc’） 限制个数 和其他的条件并用 .limit（x）–数量 3.更改：先将值赋给一个变量。之后再更改然后保存 4.删除：查询之后 .delete]]></content>
  </entry>
  <entry>
    <title><![CDATA[order顺序]]></title>
    <url>%2Fposts%2F2016-12-11-1198205.html</url>
    <content type="text"><![CDATA[ASC 由小至大排列DESC 由大至小排列一般默认为ASC，需要倒序排列时标注]]></content>
      <tags>
        <tag>easy</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[scaffold]]></title>
    <url>%2Fposts%2F2016-12-10-1193045.html</url>
    <content type="text"><![CDATA[scaffold是一个具有完整CRUD的modelrails g scaffold之后无需再次手动建立controller在rails g scaffold的时候他就已经内建好controller并且写好了CRUD scaffold]]></content>
      <tags>
        <tag>ruby</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[devise－strong params]]></title>
    <url>%2Fposts%2F2016-12-07-1179820.html</url>
    <content type="text"><![CDATA[教程1.简单参数增加方法： 在application／controller中加入（username 是你想加的参数） 1234567891011121314151617181920 class ApplicationController &lt; ActionController::Base before_action :configure_permitted_parameters, if: :devise_controller? protected def configure_permitted_parameters devise_parameter_sanitizer.permit(:sign_up, keys: [:username]) end end ``` &lt;!--more--&gt;2.如果你要增加的是nested attributes（与其他model有关联的参数？）[nested attributes](http://api.rubyonra ils.org/classes/ActiveRecord/NestedAttributes/ClassMethods.html)，也就是说用accepts_nested_attri butes_for 时，你就要告诉devise所有的关联和类型。devise才会同意你改掉devise的默认值或者进行一些用户操作。 （1）simple scalar values（简单标量值）：eg```ruby def configure_permitted_parameters devise_parameter_sanitizer.permit(:sign_in) do |user_params| user_params.permit(:username, :email) end end （2）array：eg 12345def configure_permitted_parameters devise_parameter_sanitizer.permit(:sign_up) do |user_params| user_params.permit(&#123; roles: [] &#125;, :email, :password, :password_confirmation) endend For the list of permitted scalars, and how to declare permitted keys in nested hashes and arrays, see （3） 如果你有好几个 Devise models, 你想在每个model中设置不同的参数（parameter sanitizer）。 我们就需要从 Devise::ParameterSanitizer继承并且添加你自己的逻辑: 123456class User::ParameterSanitizer &lt; Devise::ParameterSanitizer def initialize(*) super permit(:sign_up, keys: [:username, :email]) endend 然后让你的controller调用它: 1234567891011class ApplicationController &lt; ActionController::Base protected def devise_parameter_sanitizer if resource_class == User User::ParameterSanitizer.new(User, :user, params) else super # Use the default one end endend]]></content>
      <categories>
        <category>ruby</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[Multi Role]]></title>
    <url>%2Fposts%2F2016-12-07-1179407.html</url>
    <content type="text"><![CDATA[第一种方式：gem rolify rolify 第二种方式：1.在model中定义角色，批准方式等 user.rb123456789101112131415161718192021222324252627282930313233enum role: &#123; :user, :vip, :admin &#125;after_initialize :set_default_role, if: :new_record?def set_default_role self.role ||= :userenddef admin? self.role == 'admin' is_admin == trueenddef is_user? self.role = 'user'enddef vip? self.role = 'vip' is_vip == trueenddef qunlified_vip? role == 'vip' &amp;&amp; is_adminenddef unqunlified_vip? role == 'vip' &amp;&amp; !is_adminenddef approve! self.is_admin = true saveendend 2.在注册界面加上角色选择按钮 devise/registration/new.rb1234&lt;%= f.radio_button(:role, "user") %&gt;&lt;%= label(:role, "用户注册") %&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;%= f.radio_button(:role, "vip") %&gt;&lt;%= label(:role, "商家注册") %&gt; 3.在model中加上role，is_vip的栏位rails g migration add_role_to_users 123def change add_column :users, :role, :string end rails g migration add_is_vip_to_user 123def change add_column :users, :is_vip, :boolean, default: false end 4.新建一个controller定义index，批准，取消等方法 controller/admin/users_controller.rb12345678910111213141516171819 class Admin::UsersController &lt; ApplicationController before_action :authenticate_user! before_action :require_is_admin layout 'admin' def index @users = User.where(role:'vip').order('is_vip ASC') end def approve_vip @user = User.find(params[:user_id]) @user.approve! redirect_to :back end def cancel_vip @user = User.find(params[:user_id]) @user.cancel! redirect_to :back endend 5.在route中添加路径 config/routes.rb123456namespace :admin do resources :users do post :approve_vip post :cancel_vip endend 6.建立view页面，显示需要的界面 views/admin/user/index.html.erb123456789101112131415161718192021222324252627282930313233343536373839&lt;div class="container body well"&gt; &lt;h3 class="text-center"&gt;会员管理&lt;/h3&gt; &lt;br&gt; &lt;br&gt; &lt;table class="table table-responsive"&gt; &lt;thead&gt; &lt;tr&gt; &lt;th&gt;用户id&lt;/th&gt; &lt;th&gt;用户邮箱&lt;/th&gt; &lt;th&gt;用户角色&lt;/th&gt; &lt;th&gt;状态&lt;/th&gt; &lt;th&gt;审批&lt;/th&gt; &lt;/tr&gt; &lt;/thead&gt; &lt;tbody&gt; &lt;% @users.each do |user| %&gt; &lt;tr&gt; &lt;td&gt;&lt;%= user.id %&gt;&lt;/td&gt; &lt;td&gt;&lt;%= user.email %&gt;&lt;/td&gt; &lt;td&gt;&lt;%= user.role %&gt;&lt;/td&gt; &lt;td&gt; &lt;% if user.qunlified_vip? %&gt; 已通过审核 &lt;% else %&gt; 未通过审核 &lt;% end %&gt; &lt;/td&gt; &lt;td&gt; &lt;% if user.unqunlified_vip? %&gt; &lt;%= link_to("批准成为会员", admin_user_approve_vip_path(user),:method =&gt; :post)%&gt; &lt;% else %&gt; &lt;%= link_to("取消会员身份", admin_user_cancel_vip_path(user),:method =&gt; :post)%&gt; &lt;% end %&gt; &lt;/td&gt; &lt;/tr&gt; &lt;% end %&gt; &lt;/tbody&gt; &lt;/table&gt;&lt;/div&gt; PS: 同一页面两个表格中显示两个不同的role]]></content>
      <tags>
        <tag>ruby</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[gem-carriewave]]></title>
    <url>%2Fposts%2F2016-12-06-1176390.html</url>
    <content type="text"><![CDATA[carriewave是一个可以帮助我们上传我们需要文件的插件。它可以上传文档，图片，且可以一次上传多张图片。1.上传文档（1）在gemfile中添加 gem “carriewave” bundle install 重开sever：ctrl＋c =&gt; rails s（2）加入uploader机制 rails g uploader xxx eg：rails g uploader attachment （3）在上传的Model中 mount_uploader :xxx,XxxUploader eg：mount_uploader :attachment,AttachmentUploader（4）在需要的view（new）页面中添加 &lt;%= f.input :xxx %&gt;（5）修改.gitignore，加入public/uploads（6）在关联的model中加上栏位 =&gt; rake db:migrate eg：attatchment:string（7）新建一个controller eg: class ResumesController &lt; ApplicationController before_action :authenticate_user! def new @job = Job.find(params[:job_id]) @resume = Resume.new end def create @job = Job.find(params[:job_id]) @resume = Resume.new(resume_params) @resume.job = @job @resume.user = current_user if @resume.save flash[:notice]=&quot;Upload Success&quot; redirect_to job_path(@job) else render :new end end private def resume_params params.require(:resume).permit(:content,:attachment) end end（8）在routes里加上 resources :xxx 2.添加图片（一张）（1）在gemfile中添加 gem “carriewave” gem “mini_magick” 然后 bundle install rails g uploader image 重开sever（2）在相关model中添加栏位 image :string =&gt; rake db:migrate（3）在 Model 中添加 mount_uploader :image,ImageUploder（4）在image_uploader中 ”include Carriewave::Minigack“ 前面的＃删掉 在Store_dir end下加 process resize_to_fit:[800,800] version :thumb do process resize_to_fit:[200,200] end version :medium do process resize_to_fit:[400,400] end（5）View: new &lt;%= f.input :image,as::file %&gt; edit &lt;% if @xxx.image.present? %&gt; &lt;span&gt;目前商品图片&lt;/span&gt; &lt;%= image_tag (@xxx.image.thumb.url) %&gt; &lt;% end %&gt; show index &lt;% @products.each do |product| %&gt; &lt;div class=&quot;col-xs-6 col-md-3&quot;&gt; &lt;%= link_to product_path(product) do%&gt; &lt;% if product.image.present? %&gt; &lt;%= image_tag(product.image.thumb.url, class:&quot;thumbnail&quot;)%&gt; &lt;% else %&gt; &lt;%= image_tag(&quot;http://placehold.it/200x200&amp;text=No pic&quot;,class:&quot;thumbnail&quot;)%&gt; &lt;% end %&gt; &lt;% end %&gt; show页面在循环中的product前面加上@3.上传多张图片 教程1教程2中文]]></content>
      <tags>
        <tag>ruby</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[使devise可见]]></title>
    <url>%2Fposts%2F2016-12-05-make-the-devise-visible.html</url>
    <content type="text"><![CDATA[1.使devise下页面可见 rails generate devise:views > 2-1.使devise下controller 可见（1) rails generate devise:controllers [scope] eg: rails g devise:controllers users 你将会看到controller被创建在app/controllers/users/文件夹下。而且session controller会如下显示 ： 123456class Users::SessionsController &lt; Devise::SessionsController# GET /resource/sign_in# def new# super# endend （2） 在路径中将devise_for :users替换成 1devise_for :users, controllers: &#123; sessions: 'users/sessions' &#125; （3） 将 devise／session下的 view 文件复制进 user／session 下。 因为controller被改变了，他就不能用原来默认咋在 devise／session 文件夹下的view了（4）改你想要的controller的actions 第一种： 12345class Users::SessionsController &lt; Devise::SessionsController def create # custom sign-in code endend 或者就简单添加你想要做的操作 第二种：1234567class Users::SessionsController &lt; Devise::SessionsController def create super do |resource| BackgroundWorker.trigger(resource) end endend 2-2.gem env–查看gem安装路径之后cp 复制出来]]></content>
      <tags>
        <tag>ruby</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[terminal 新建文件]]></title>
    <url>%2Fposts%2F2016-12-05-page-design.html</url>
    <content type="text"><![CDATA[1.新建页面 touch 2.新建文件夹 mkdir eg:mkdir app/views/common 3.新建model rails g model xxx xx:xx 删除model rails d model xxx 4.新建controllerrails g controller xxx]]></content>
      <tags>
        <tag>ruby</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[git 命令汇总]]></title>
    <url>%2Fposts%2F2016-12-04-1170928.html</url>
    <content type="text"><![CDATA[基础命令Push:1.在github上新建一个repo。2.将网页上提供的代码粘贴到terminal中3.git push origin master(只有一个branch)git push –all origin (有很多branch) Pull:1.进入要克隆的专案网址2.点击clone／download，复制githu提供的网址3.终端输入git clone 上一步复制的网址 ps：1.添加上游专案1）git remote remove origin ：删掉远程的分支2）git remote：查看远程文件3）git remote -v ：查看远程网址4）git remote add xxxx(写自己改的名字) + git网址 ：添加分支5）ls -al：查看本地所有文件夹然后在拉最新的develop分支的指令如下：4）git fetch xxxx（就是上一步自己改过的名字）git fetch origin 远程分支名x:本地分支名x5）git checkout 自己分支的名字（不能在develop这个分支上写代码）每一次建立新功能时，都先建立一个分支，命名规则如下：ID-简易功能描述 eg：git checkout -b shin-devise 从github上 pull下来某个专案的代码1）先回到柱分支 ： ~/DesignDeck/develop2）在分支上操作 git pull project develop 这样就把最新的专案代码copy到本地电脑中了 这里的project指的是远程网址上的：“project” https://github.com/DesignDeckTeam/DesignDeck.git这里的project下的分支中名为develop的代码 stash git stash save git stash show git stash drop git stash pop git stash apply git stash list –date=short cherry-pickgit cherry-pick可以选择某一个分支中的一个或几个commit(s)来进行操作。例如，假设我们有个稳定版本的分支，叫v2.0，另外还有个开发版本的分支v3.0，我们不能直接把两个分支合并，这样会导致稳定版本混乱，但是又想增加一个v3.0中的功能到v2.0中，这里就可以使用cherry-pick了。 就是对已经存在的commit 进行 再次提交； 简单用法： 1git cherry-pick &lt;commit id&gt; 注意：当执行完 cherry-pick 以后，将会 生成一个新的提交；这个新的提交的哈希值和原来的不同，但标识名 一样； 例如：$ git checkout old_cc$ git cherry-pick 38361a68 # 这个 38361a68 号码，位于： $ git logcommit 38361a68138140827b31b72f8bbfd88b3705d77a 如果顺利，就会正常提交。结果： Finished one cherry-pick.On branch old_ccYour branch is ahead of ‘origin/old_cc’ by 3 commits. 如果在cherry-pick 的过程中出现了冲突 Automatic cherry-pick failed. After resolving the conflicts,mark the corrected paths with ‘git add ‘ or ‘git rm ‘and commit the result with: 1$ git commit -c 15a2b6c61927e5aed6718de89ad9dafba939a90b 就跟普通的冲突一样，手工解决：2.1 1$ git status # 看哪些文件出现冲突 both modified: app/models/user.rb2.2 1$ vim app/models/user.rb # 手动解决它。 2.3 1$ git add app/models/user.rb 2.4 1$ git commit -c &lt;新的commit号码&gt; 更多命令1.查看已提交commit改动： 1$ git diff COMMIT^! 2.在branchA上merge branchB 1$ git merge branch-B 3.为某个commit 创建patch 文件 1$ git format-patch -1 &lt;sha&gt; 4.应用patch文件（必须除了改动以外其他都一样才能应用成功） 1$ git apply &lt;path_file&gt;]]></content>
      <tags>
        <tag>git</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[1.submit按钮没反应 2.显示多张图片问题 等其他问题及其解决方法]]></title>
    <url>%2Fposts%2F2016-10-26-1041499.html</url>
    <content type="text"><![CDATA[1.设置完页面基本需求后，点击submit属性按钮没有任何反应解答：在controller，submit要完成的action后加上！。 如：new界面的submit点击完没有反应的话，就在controller中def create下的if @xxx.save后面加上一个！变成 if @xxx.save！，这样运行网站时就会提示存在何种错误。 2.（最最重要！！！！）上传图片时，相关代码完成后。就是没有图片在页面上显示，一直显示no pic。解答：在index页面显示图片的区域不可有@，应为xxx.image 而在show页面则必须要有@，应该是@xxx.image ps.不只是图片需要这样，显示状态等，需要引用model中栏位的地方，都要注意此问题！！！！！！！ 3.bfore_action :authenticate_user!必须要在before_action :require_is_admin前面 4.在设定多个角色时，要将role和栏位（如:is_admin）联系在一起这样才能变换一个role或者栏位时，使得另一个跟着一起变 化。判断条件也应该是两个一起判断的。 5.rake db seed的用法：在seed.rb中写入需要的数据 rake db:drop rake db:create rake db:schema:load rake db:seed]]></content>
      <tags>
        <tag>easy</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[heroku上传]]></title>
    <url>%2Fposts%2Fheroku-upload.html</url>
    <content type="text"><![CDATA[1.先登录：heroku login 输入帐号和密码2.上传key：heroku keys:add3.在heroku注册新的应用程式，给你新应用程式的 URL（网址）：运行heroku create后 会给你新的网址4.进入atom：atom . 5.找到atom里的gemfile 改gemfile 1.＃7:将gem ‘sqlite3’剪下 2.粘到＃35（＃30的group中） 3.在＃47上添加:group :production do gem “pg” end 4.保存（command＋s）6.在atom中找到git/config，在[remote “heroku”]:URL上更新最新的网址。7.在config/routes.rb设定首页：root “topics#index”8.最最重要 改完后一定存档（command＋s）每一页都要单独保存！9.bundle install（如果有gemfile修改 改完为了后为了让异动被套用b）10.把 Gemfile 的异动 commit 进 git： git add Gemfile git add Gemfile.lock git commit -m “move sqlite3 to dev group &amp; add pg to production group “11.git push heroku master/git push heroku ch08:master（把本地所有已经存好的异动都push到Heroku）12.heroku run rake db:migrate（在heroku中执行）13.heroku open （打开网页） ps：有时候上传错了之后删除可是再次上传还是显示错误的app]]></content>
      <tags>
        <tag>heroku</tag>
      </tags>
  </entry>
</search>
